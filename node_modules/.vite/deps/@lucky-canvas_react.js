import {
  init_compat_module,
  wn
} from "./chunk-Z57MMDR6.js";
import "./chunk-4VF4MQ4G.js";
import "./chunk-V4OQ3NZ2.js";

// node_modules/.pnpm/@lucky-canvas+react@0.1.13/node_modules/@lucky-canvas/react/dist/index.esm.js
init_compat_module();
function e(t, e2) {
  var i2 = Object.keys(t);
  if (Object.getOwnPropertySymbols) {
    var n2 = Object.getOwnPropertySymbols(t);
    e2 && (n2 = n2.filter(function(e3) {
      return Object.getOwnPropertyDescriptor(t, e3).enumerable;
    })), i2.push.apply(i2, n2);
  }
  return i2;
}
function i(t) {
  for (var i2 = 1; i2 < arguments.length; i2++) {
    var n2 = null != arguments[i2] ? arguments[i2] : {};
    i2 % 2 ? e(Object(n2), true).forEach(function(e2) {
      s(t, e2, n2[e2]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n2)) : e(Object(n2)).forEach(function(e2) {
      Object.defineProperty(t, e2, Object.getOwnPropertyDescriptor(n2, e2));
    });
  }
  return t;
}
function n(t, e2) {
  if (!(t instanceof e2)) throw new TypeError("Cannot call a class as a function");
}
function r(t, e2) {
  for (var i2 = 0; i2 < e2.length; i2++) {
    var n2 = e2[i2];
    n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(t, n2.key, n2);
  }
}
function o(t, e2, i2) {
  return e2 && r(t.prototype, e2), i2 && r(t, i2), t;
}
function s(t, e2, i2) {
  return e2 in t ? Object.defineProperty(t, e2, { value: i2, enumerable: true, configurable: true, writable: true }) : t[e2] = i2, t;
}
function a(t, e2) {
  if ("function" != typeof e2 && null !== e2) throw new TypeError("Super expression must either be null or a function");
  t.prototype = Object.create(e2 && e2.prototype, { constructor: { value: t, writable: true, configurable: true } }), e2 && c(t, e2);
}
function h(t) {
  return h = Object.setPrototypeOf ? Object.getPrototypeOf : function(t2) {
    return t2.__proto__ || Object.getPrototypeOf(t2);
  }, h(t);
}
function c(t, e2) {
  return c = Object.setPrototypeOf || function(t2, e3) {
    return t2.__proto__ = e3, t2;
  }, c(t, e2);
}
function l(t, e2) {
  if (e2 && ("object" == typeof e2 || "function" == typeof e2)) return e2;
  if (void 0 !== e2) throw new TypeError("Derived constructors may only return object or undefined");
  return function(t2) {
    if (void 0 === t2) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return t2;
  }(t);
}
function u(t) {
  var e2 = function() {
    if ("undefined" == typeof Reflect || !Reflect.construct) return false;
    if (Reflect.construct.sham) return false;
    if ("function" == typeof Proxy) return true;
    try {
      return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      })), true;
    } catch (t2) {
      return false;
    }
  }();
  return function() {
    var i2, n2 = h(t);
    if (e2) {
      var r2 = h(this).constructor;
      i2 = Reflect.construct(n2, arguments, r2);
    } else i2 = n2.apply(this, arguments);
    return l(this, i2);
  };
}
var f = function(t, e2) {
  return f = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t2, e3) {
    t2.__proto__ = e3;
  } || function(t2, e3) {
    for (var i2 in e3) Object.prototype.hasOwnProperty.call(e3, i2) && (t2[i2] = e3[i2]);
  }, f(t, e2);
};
function p(t, e2) {
  if ("function" != typeof e2 && null !== e2) throw new TypeError("Class extends value " + String(e2) + " is not a constructor or null");
  function i2() {
    this.constructor = t;
  }
  f(t, e2), t.prototype = null === e2 ? Object.create(e2) : (i2.prototype = e2.prototype, new i2());
}
var d = function() {
  return d = Object.assign || function(t) {
    for (var e2, i2 = 1, n2 = arguments.length; i2 < n2; i2++) for (var r2 in e2 = arguments[i2]) Object.prototype.hasOwnProperty.call(e2, r2) && (t[r2] = e2[r2]);
    return t;
  }, d.apply(this, arguments);
};
function g(t, e2, i2, n2) {
  return new (i2 || (i2 = Promise))(function(r2, o2) {
    function s2(t2) {
      try {
        h2(n2.next(t2));
      } catch (t3) {
        o2(t3);
      }
    }
    function a2(t2) {
      try {
        h2(n2.throw(t2));
      } catch (t3) {
        o2(t3);
      }
    }
    function h2(t2) {
      var e3;
      t2.done ? r2(t2.value) : (e3 = t2.value, e3 instanceof i2 ? e3 : new i2(function(t3) {
        t3(e3);
      })).then(s2, a2);
    }
    h2((n2 = n2.apply(t, e2 || [])).next());
  });
}
function v(t, e2) {
  var i2, n2, r2, o2, s2 = { label: 0, sent: function() {
    if (1 & r2[0]) throw r2[1];
    return r2[1];
  }, trys: [], ops: [] };
  return o2 = { next: a2(0), throw: a2(1), return: a2(2) }, "function" == typeof Symbol && (o2[Symbol.iterator] = function() {
    return this;
  }), o2;
  function a2(o3) {
    return function(a3) {
      return function(o4) {
        if (i2) throw new TypeError("Generator is already executing.");
        for (; s2; ) try {
          if (i2 = 1, n2 && (r2 = 2 & o4[0] ? n2.return : o4[0] ? n2.throw || ((r2 = n2.return) && r2.call(n2), 0) : n2.next) && !(r2 = r2.call(n2, o4[1])).done) return r2;
          switch (n2 = 0, r2 && (o4 = [2 & o4[0], r2.value]), o4[0]) {
            case 0:
            case 1:
              r2 = o4;
              break;
            case 4:
              return s2.label++, { value: o4[1], done: false };
            case 5:
              s2.label++, n2 = o4[1], o4 = [0];
              continue;
            case 7:
              o4 = s2.ops.pop(), s2.trys.pop();
              continue;
            default:
              if (!((r2 = (r2 = s2.trys).length > 0 && r2[r2.length - 1]) || 6 !== o4[0] && 2 !== o4[0])) {
                s2 = 0;
                continue;
              }
              if (3 === o4[0] && (!r2 || o4[1] > r2[0] && o4[1] < r2[3])) {
                s2.label = o4[1];
                break;
              }
              if (6 === o4[0] && s2.label < r2[1]) {
                s2.label = r2[1], r2 = o4;
                break;
              }
              if (r2 && s2.label < r2[2]) {
                s2.label = r2[2], s2.ops.push(o4);
                break;
              }
              r2[2] && s2.ops.pop(), s2.trys.pop();
              continue;
          }
          o4 = e2.call(t, s2);
        } catch (t2) {
          o4 = [6, t2], n2 = 0;
        } finally {
          i2 = r2 = 0;
        }
        if (5 & o4[0]) throw o4[1];
        return { value: o4[0] ? o4[1] : void 0, done: true };
      }([o3, a3]);
    };
  }
}
function y(t, e2) {
  for (var i2 = 0, n2 = e2.length, r2 = t.length; i2 < n2; i2++, r2++) t[r2] = e2[i2];
  return t;
}
Array.prototype.includes || Object.defineProperty(Array.prototype, "includes", { value: function(t, e2) {
  if (null == this) throw new TypeError('"this" is null or not defined');
  var i2 = Object(this), n2 = i2.length >>> 0;
  if (0 === n2) return false;
  for (var r2, o2, s2 = 0 | e2, a2 = Math.max(s2 >= 0 ? s2 : n2 - Math.abs(s2), 0); a2 < n2; ) {
    if ((r2 = i2[a2]) === (o2 = t) || "number" == typeof r2 && "number" == typeof o2 && isNaN(r2) && isNaN(o2)) return true;
    a2++;
  }
  return false;
} }), String.prototype.includes || (String.prototype.includes = function(t, e2) {
  return "number" != typeof e2 && (e2 = 0), !(e2 + t.length > this.length) && -1 !== this.indexOf(t, e2);
}), Array.prototype.find || Object.defineProperty(Array.prototype, "find", { value: function(t) {
  if (null == this) throw new TypeError('"this" is null or not defined');
  var e2 = Object(this), i2 = e2.length >>> 0;
  if ("function" != typeof t) throw new TypeError("predicate must be a function");
  for (var n2 = arguments[1], r2 = 0; r2 < i2; ) {
    var o2 = e2[r2];
    if (t.call(n2, o2, r2, e2)) return o2;
    r2++;
  }
} });
var m = function(t) {
  for (var e2 = [], i2 = 1; i2 < arguments.length; i2++) e2[i2 - 1] = arguments[i2];
  return e2.some(function(e3) {
    return Object.prototype.toString.call(t).slice(8, -1).toLowerCase() === e3;
  });
};
var w = function(t, e2) {
  return Object.prototype.hasOwnProperty.call(t, e2);
};
var b = function(t) {
  return [].filter.call(t, function(t2) {
    return "\n" !== t2;
  }).join("");
};
var k = function(t) {
  if ("string" != typeof t) return false;
  if ("transparent" === (t = t.toLocaleLowerCase().trim())) return false;
  var e2;
  if (/^rgba/.test(t) && 0 === (null === (e2 = /([^\s,]+)\)$/.exec(t)) ? 0 : "object" == typeof e2 ? NaN : "number" == typeof e2 ? e2 : "string" == typeof e2 ? "%" === e2[e2.length - 1] ? Number(e2.slice(0, -1)) / 100 : Number(e2) : NaN)) return false;
  return true;
};
var S = function(t, e2) {
  var i2, n2 = (null === (i2 = t.padding) || void 0 === i2 ? void 0 : i2.split(" ").map(function(t2) {
    return e2(t2);
  })) || [0], r2 = 0, o2 = 0, s2 = 0, a2 = 0;
  switch (n2.length) {
    case 1:
      r2 = o2 = s2 = a2 = n2[0];
      break;
    case 2:
      r2 = o2 = n2[0], s2 = a2 = n2[1];
      break;
    case 3:
      r2 = n2[0], s2 = a2 = n2[1], o2 = n2[2];
      break;
    default:
      r2 = n2[0], o2 = n2[1], s2 = n2[2], a2 = n2[3];
  }
  var h2 = { paddingTop: r2, paddingBottom: o2, paddingLeft: s2, paddingRight: a2 };
  for (var c2 in h2) h2[c2] = w(t, c2) && m(t[c2], "string", "number") ? e2(t[c2]) : h2[c2];
  return [r2, o2, s2, a2];
};
var C = function(t) {
  var e2 = [], i2 = t.map(function(t2) {
    return Number(t2);
  }).reduce(function(t2, i3) {
    if (i3 > 0) {
      var n3 = t2 + i3;
      return e2.push(n3), n3;
    }
    return e2.push(NaN), t2;
  }, 0), n2 = Math.random() * i2;
  return e2.findIndex(function(t2) {
    return n2 <= t2;
  });
};
var z = function(t, e2, i2, n2) {
  void 0 === n2 && (n2 = 1 / 0), n2 <= 0 && (n2 = 1 / 0);
  for (var r2 = "", o2 = [], s2 = t.measureText("...").width, a2 = 0; a2 < e2.length; a2++) {
    r2 += e2[a2];
    var h2 = t.measureText(r2).width, c2 = i2(o2);
    if (n2 === o2.length + 1 && (h2 += s2), c2 < 0) return o2;
    if (h2 > c2 && (o2.push(r2.slice(0, -1)), r2 = e2[a2]), n2 === o2.length) return o2[o2.length - 1] += "...", o2;
  }
  return r2 && o2.push(r2), o2.length || o2.push(e2), o2;
};
var x = function() {
  function t() {
    this.subs = [];
  }
  return t.prototype.addSub = function(t2) {
    this.subs.includes(t2) || this.subs.push(t2);
  }, t.prototype.notify = function() {
    this.subs.forEach(function(t2) {
      t2.update();
    });
  }, t;
}();
var E = "__proto__" in {};
function O(t, e2, i2, n2) {
  Object.defineProperty(t, e2, { value: i2, enumerable: !!n2, writable: true, configurable: true });
}
var L = Array.prototype;
var I = Object.create(L);
["push", "pop", "shift", "unshift", "sort", "splice", "reverse"].forEach(function(t) {
  I[t] = function() {
    for (var e2 = [], i2 = 0; i2 < arguments.length; i2++) e2[i2] = arguments[i2];
    var n2 = L[t].apply(this, e2), r2 = this.__luckyOb__;
    return ["push", "unshift", "splice"].includes(t) && r2.walk(this), r2.dep.notify(), n2;
  };
});
var A = function() {
  function t(t2) {
    this.dep = new x(), O(t2, "__luckyOb__", this), Array.isArray(t2) && (E ? t2.__proto__ = I : Object.getOwnPropertyNames(I).forEach(function(e2) {
      O(t2, e2, I[e2]);
    })), this.walk(t2);
  }
  return t.prototype.walk = function(t2) {
    Object.keys(t2).forEach(function(e2) {
      P(t2, e2, t2[e2]);
    });
  }, t;
}();
function _(t) {
  if (t && "object" == typeof t) return "__luckyOb__" in t ? t.__luckyOb__ : new A(t);
}
function P(t, e2, i2) {
  var n2 = new x(), r2 = Object.getOwnPropertyDescriptor(t, e2);
  if (!r2 || false !== r2.configurable) {
    var o2 = r2 && r2.get, s2 = r2 && r2.set;
    o2 && !s2 || 2 !== arguments.length || (i2 = t[e2]);
    var a2 = _(i2);
    Object.defineProperty(t, e2, { get: function() {
      var e3 = o2 ? o2.call(t) : i2;
      return x.target && (n2.addSub(x.target), a2 && a2.dep.addSub(x.target)), e3;
    }, set: function(e3) {
      e3 !== i2 && (i2 = e3, o2 && !s2 || (s2 ? s2.call(t, e3) : i2 = e3, a2 = _(e3), n2.notify()));
    } });
  }
}
var T = 0;
var W = function() {
  function t(t2, e2, i2, n2) {
    void 0 === n2 && (n2 = {}), this.id = T++, this.$lucky = t2, this.expr = e2, this.deep = !!n2.deep, this.getter = "function" == typeof e2 ? e2 : function(t3) {
      t3 += ".";
      for (var e3 = [], i3 = "", n3 = 0; n3 < t3.length; n3++) {
        var r2 = t3[n3];
        if (/\[|\./.test(r2)) e3.push(i3), i3 = "";
        else {
          if (/\W/.test(r2)) continue;
          i3 += r2;
        }
      }
      return function(t4) {
        return e3.reduce(function(t5, e4) {
          return t5[e4];
        }, t4);
      };
    }(e2), this.cb = i2, this.value = this.get();
  }
  return t.prototype.get = function() {
    x.target = this;
    var t2 = this.getter.call(this.$lucky, this.$lucky);
    return this.deep && function(t3) {
      var e2 = function(t4) {
        m(t4, "array", "object") && Object.keys(t4).forEach(function(i2) {
          var n2 = t4[i2];
          e2(n2);
        });
      };
      e2(t3);
    }(t2), x.target = null, t2;
  }, t.prototype.update = function() {
    var t2 = this.get(), e2 = this.value;
    this.value = t2, this.cb.call(this.$lucky, t2, e2);
  }, t;
}();
var $ = function() {
  function t(t2, e2) {
    var i2 = this;
    this.version = "1.7.25", this.htmlFontSize = 16, this.rAF = function() {
    }, this.boxWidth = 0, this.boxHeight = 0, "string" == typeof t2 ? t2 = { el: t2 } : 1 === t2.nodeType && (t2 = { el: "", divElement: t2 }), t2 = t2, this.config = t2, this.data = e2, t2.flag || (t2.flag = "WEB"), t2.el && (t2.divElement = document.querySelector(t2.el)), t2.divElement && (t2.canvasElement = document.createElement("canvas"), t2.divElement.appendChild(t2.canvasElement)), t2.canvasElement && (t2.ctx = t2.canvasElement.getContext("2d"), t2.canvasElement.setAttribute("package", "lucky-canvas@1.7.25"), t2.canvasElement.addEventListener("click", function(t3) {
      return i2.handleClick(t3);
    })), this.ctx = t2.ctx, this.initWindowFunction(), this.config.ctx || console.error("无法获取到 CanvasContext2D"), window && "function" == typeof window.addEventListener && window.addEventListener("resize", function(t3, e3) {
      void 0 === e3 && (e3 = 300);
      var i3 = null;
      return function() {
        for (var n2 = this, r2 = [], o2 = 0; o2 < arguments.length; o2++) r2[o2] = arguments[o2];
        i3 || (i3 = setTimeout(function() {
          t3.apply(n2, r2), clearTimeout(i3), i3 = null;
        }, e3));
      };
    }(function() {
      return i2.resize();
    }, 300)), window && "function" == typeof window.MutationObserver && new window.MutationObserver(function() {
      i2.resize();
    }).observe(document.documentElement, { attributes: true });
  }
  return t.prototype.resize = function() {
    var t2, e2;
    null === (e2 = (t2 = this.config).beforeResize) || void 0 === e2 || e2.call(t2), this.setHTMLFontSize(), this.setDpr(), this.resetWidthAndHeight(), this.zoomCanvas();
  }, t.prototype.initLucky = function() {
    if (this.resize(), !this.boxWidth || !this.boxHeight) return console.error("无法获取到宽度或高度");
  }, t.prototype.handleClick = function(t2) {
  }, t.prototype.setHTMLFontSize = function() {
    window && (this.htmlFontSize = +window.getComputedStyle(document.documentElement).fontSize.slice(0, -2));
  }, t.prototype.clearCanvas = function() {
    var t2 = [this.boxWidth, this.boxHeight], e2 = t2[0], i2 = t2[1];
    this.ctx.clearRect(-e2, -i2, 2 * e2, 2 * i2);
  }, t.prototype.setDpr = function() {
    var t2 = this.config;
    t2.dpr || (window ? window.dpr = t2.dpr = window.devicePixelRatio || 1 : t2.dpr || console.error(t2, "未传入 dpr 可能会导致绘制异常"));
  }, t.prototype.resetWidthAndHeight = function() {
    var t2 = this.config, e2 = this.data, i2 = 0, n2 = 0;
    t2.divElement && (i2 = t2.divElement.offsetWidth, n2 = t2.divElement.offsetHeight), this.boxWidth = this.getLength(e2.width || t2.width) || i2, this.boxHeight = this.getLength(e2.height || t2.height) || n2, t2.divElement && (t2.divElement.style.overflow = "hidden", t2.divElement.style.width = this.boxWidth + "px", t2.divElement.style.height = this.boxHeight + "px");
  }, t.prototype.zoomCanvas = function() {
    var t2 = this.config, e2 = this.ctx, i2 = t2.canvasElement, n2 = t2.dpr, r2 = [this.boxWidth * n2, this.boxHeight * n2], o2 = r2[0], s2 = r2[1];
    i2 && (i2.width = o2, i2.height = s2, i2.style.width = o2 + "px", i2.style.height = s2 + "px", i2.style["transform-origin"] = "left top", i2.style.transform = "scale(" + 1 / n2 + ")", e2.scale(n2, n2));
  }, t.prototype.initWindowFunction = function() {
    var t2 = this.config;
    if (window) return this.rAF = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function(t3) {
      window.setTimeout(t3, 1e3 / 60);
    }, t2.setTimeout = window.setTimeout, t2.setInterval = window.setInterval, t2.clearTimeout = window.clearTimeout, void (t2.clearInterval = window.clearInterval);
    if (t2.rAF) this.rAF = t2.rAF;
    else if (t2.setTimeout) {
      var e2 = t2.setTimeout;
      this.rAF = function(t3) {
        return e2(t3, 16.7);
      };
    } else this.rAF = function(t3) {
      return setTimeout(t3, 16.7);
    };
  }, t.prototype.isWeb = function() {
    return ["WEB", "UNI-H5", "TARO-H5"].includes(this.config.flag);
  }, t.prototype.loadImg = function(t2, e2, i2) {
    var n2 = this;
    return void 0 === i2 && (i2 = "$resolve"), new Promise(function(r2, o2) {
      if (t2 || o2("=> '" + e2.src + "' 不能为空或不合法"), "WEB" !== n2.config.flag) return e2[i2] = r2, void (e2.$reject = o2);
      var s2 = new Image();
      s2.onload = function() {
        return r2(s2);
      }, s2.onerror = function() {
        return o2("=> '" + e2.src + "' 图片加载失败");
      }, s2.src = t2;
    });
  }, t.prototype.drawImage = function(t2, e2) {
    for (var i2, n2, r2, o2 = [], s2 = 2; s2 < arguments.length; s2++) o2[s2 - 2] = arguments[s2];
    var a2 = this.config, h2 = a2.flag, c2 = a2.dpr;
    if (["WEB", "MP-WX"].includes(h2)) r2 = e2;
    else {
      if (!["UNI-H5", "UNI-MP", "TARO-H5", "TARO-MP"].includes(h2)) return console.error("意料之外的 flag, 该平台尚未兼容!");
      r2 = e2.path;
    }
    var l2 = null === (n2 = (i2 = r2.canvas || r2).getContext) || void 0 === n2 ? void 0 : n2.call(i2, "2d");
    if (l2 && !this.isWeb()) {
      o2 = o2.map(function(t3) {
        return t3 * c2;
      });
      var u2 = l2.getImageData.apply(l2, o2.slice(0, 4));
      t2.putImageData.apply(t2, y([u2], o2.slice(4, 6)));
    } else {
      8 === o2.length && (o2 = o2.map(function(t3, e3) {
        return e3 < 4 ? t3 * c2 : t3;
      }));
      try {
        t2.drawImage.apply(t2, y([r2], o2));
      } catch (t3) {
      }
    }
  }, t.prototype.computedWidthAndHeight = function(t2, e2, i2, n2) {
    if (!e2.width && !e2.height) return [t2.width, t2.height];
    if (e2.width && !e2.height) {
      var r2 = this.getLength(e2.width, i2);
      return [r2, t2.height * (r2 / t2.width)];
    }
    if (!e2.width && e2.height) {
      var o2 = this.getLength(e2.height, n2);
      return [t2.width * (o2 / t2.height), o2];
    }
    return [this.getLength(e2.width, i2), this.getLength(e2.height, n2)];
  }, t.prototype.changeUnits = function(t2, e2) {
    var i2 = this;
    void 0 === e2 && (e2 = 1);
    var n2 = this.config;
    return Number(t2.replace(/^([-]*[0-9.]*)([a-z%]*)$/, function(t3, r2, o2) {
      var s2 = { "%": function(t4) {
        return t4 * (e2 / 100);
      }, px: function(t4) {
        return 1 * t4;
      }, rem: function(t4) {
        return t4 * i2.htmlFontSize;
      }, vw: function(t4) {
        return t4 / 100 * window.innerWidth;
      } }[o2];
      if (s2) return s2(r2);
      var a2 = n2.handleCssUnit || n2.unitFunc;
      return a2 ? a2(r2, o2) : r2;
    }));
  }, t.prototype.getLength = function(t2, e2) {
    return m(t2, "number") ? t2 : m(t2, "string") ? this.changeUnits(t2, e2) : 0;
  }, t.prototype.getOffsetX = function(t2, e2) {
    return void 0 === e2 && (e2 = 0), (e2 - t2) / 2;
  }, t.prototype.getOffscreenCanvas = function(t2, e2) {
    if (!w(this, "_offscreenCanvas") && (window && window.document && "WEB" === this.config.flag ? this._offscreenCanvas = document.createElement("canvas") : this._offscreenCanvas = this.config.offscreenCanvas, !this._offscreenCanvas)) return console.error("离屏 Canvas 无法渲染!");
    var i2 = this.config.dpr, n2 = this._offscreenCanvas;
    n2.width = (t2 || 300) * i2, n2.height = (e2 || 150) * i2;
    var r2 = n2.getContext("2d");
    return r2.clearRect(0, 0, t2, e2), r2.scale(i2, i2), r2.dpr = i2, { _offscreenCanvas: n2, _ctx: r2 };
  }, t.prototype.$set = function(t2, e2, i2) {
    t2 && "object" == typeof t2 && P(t2, e2, i2);
  }, t.prototype.$computed = function(t2, e2, i2) {
    var n2 = this;
    Object.defineProperty(t2, e2, { get: function() {
      return i2.call(n2);
    } });
  }, t.prototype.$watch = function(t2, e2, i2) {
    void 0 === i2 && (i2 = {}), "object" == typeof e2 && (e2 = (i2 = e2).handler);
    var n2 = new W(this, t2, e2, i2);
    return i2.immediate && e2.call(this, n2.value), function() {
    };
  }, t.version = "1.7.25", t;
}();
var R = function(t) {
  return Math.PI / 180 * t;
};
var D = function(t) {
  for (var e2 = [], i2 = 1; i2 < arguments.length; i2++) e2[i2 - 1] = arguments[i2];
  var n2 = e2[0], r2 = e2[1], o2 = e2[2], s2 = e2[3], a2 = e2[4], h2 = Math.min(o2, s2), c2 = Math.PI;
  a2 > h2 / 2 && (a2 = h2 / 2), t.beginPath(), t.moveTo(n2 + a2, r2), t.lineTo(n2 + a2, r2), t.lineTo(n2 + o2 - a2, r2), t.arc(n2 + o2 - a2, r2 + a2, a2, -c2 / 2, 0), t.lineTo(n2 + o2, r2 + s2 - a2), t.arc(n2 + o2 - a2, r2 + s2 - a2, a2, 0, c2 / 2), t.lineTo(n2 + a2, r2 + s2), t.arc(n2 + a2, r2 + s2 - a2, a2, c2 / 2, c2), t.lineTo(n2, r2 + a2), t.arc(n2 + a2, r2 + a2, a2, c2, -c2 / 2), t.closePath();
};
var F = function(t, e2, i2, n2) {
  return t >= n2 && (t = n2), i2 * (t /= n2) * t + e2;
};
var H = function(t, e2, i2, n2) {
  return t >= n2 && (t = n2), -i2 * (t /= n2) * (t - 2) + e2;
};
var j = function(t) {
  function e2(e3, i2) {
    var n2, r2 = t.call(this, e3, { width: i2.width, height: i2.height }) || this;
    return r2.blocks = [], r2.prizes = [], r2.buttons = [], r2.defaultConfig = {}, r2.defaultStyle = {}, r2._defaultConfig = {}, r2._defaultStyle = {}, r2.Radius = 0, r2.prizeRadius = 0, r2.prizeDeg = 0, r2.prizeAng = 0, r2.rotateDeg = 0, r2.maxBtnRadius = 0, r2.startTime = 0, r2.endTime = 0, r2.stopDeg = 0, r2.endDeg = 0, r2.FPS = 16.6, r2.step = 0, r2.ImageCache = /* @__PURE__ */ new Map(), r2.initData(i2), r2.initWatch(), r2.initComputed(), null === (n2 = e3.beforeCreate) || void 0 === n2 || n2.call(r2), r2.init(), r2;
  }
  return p(e2, t), e2.prototype.resize = function() {
    var e3, i2;
    t.prototype.resize.call(this), this.Radius = Math.min(this.boxWidth, this.boxHeight) / 2, this.ctx.translate(this.Radius, this.Radius), this.draw(), null === (i2 = (e3 = this.config).afterResize) || void 0 === i2 || i2.call(e3);
  }, e2.prototype.initLucky = function() {
    this.Radius = 0, this.prizeRadius = 0, this.prizeDeg = 0, this.prizeAng = 0, this.rotateDeg = 0, this.maxBtnRadius = 0, this.startTime = 0, this.endTime = 0, this.stopDeg = 0, this.endDeg = 0, this.FPS = 16.6, this.prizeFlag = -1, this.step = 0, t.prototype.initLucky.call(this);
  }, e2.prototype.initData = function(t2) {
    this.$set(this, "width", t2.width), this.$set(this, "height", t2.height), this.$set(this, "blocks", t2.blocks || []), this.$set(this, "prizes", t2.prizes || []), this.$set(this, "buttons", t2.buttons || []), this.$set(this, "defaultConfig", t2.defaultConfig || {}), this.$set(this, "defaultStyle", t2.defaultStyle || {}), this.$set(this, "startCallback", t2.start), this.$set(this, "endCallback", t2.end);
  }, e2.prototype.initComputed = function() {
    var t2 = this;
    this.$computed(this, "_defaultConfig", function() {
      return d({ gutter: "0px", offsetDegree: 0, speed: 20, speedFunction: "quad", accelerationTime: 2500, decelerationTime: 2500, stopRange: 0 }, t2.defaultConfig);
    }), this.$computed(this, "_defaultStyle", function() {
      return d({ fontSize: "18px", fontColor: "#000", fontStyle: "sans-serif", fontWeight: "400", background: "rgba(0,0,0,0)", wordWrap: true, lengthLimit: "90%" }, t2.defaultStyle);
    });
  }, e2.prototype.initWatch = function() {
    var t2 = this;
    this.$watch("width", function(e3) {
      t2.data.width = e3, t2.resize();
    }), this.$watch("height", function(e3) {
      t2.data.height = e3, t2.resize();
    }), this.$watch("blocks", function(e3) {
      t2.initImageCache();
    }, { deep: true }), this.$watch("prizes", function(e3) {
      t2.initImageCache();
    }, { deep: true }), this.$watch("buttons", function(e3) {
      t2.initImageCache();
    }, { deep: true }), this.$watch("defaultConfig", function() {
      return t2.draw();
    }, { deep: true }), this.$watch("defaultStyle", function() {
      return t2.draw();
    }, { deep: true }), this.$watch("startCallback", function() {
      return t2.init();
    }), this.$watch("endCallback", function() {
      return t2.init();
    });
  }, e2.prototype.init = function() {
    var t2, e3;
    return g(this, void 0, void 0, function() {
      var i2;
      return v(this, function(n2) {
        switch (n2.label) {
          case 0:
            return this.initLucky(), i2 = this.config, null === (t2 = i2.beforeInit) || void 0 === t2 || t2.call(this), this.draw(), this.draw(), [4, this.initImageCache()];
          case 1:
            return n2.sent(), null === (e3 = i2.afterInit) || void 0 === e3 || e3.call(this), [2];
        }
      });
    });
  }, e2.prototype.initImageCache = function() {
    var t2 = this;
    return new Promise(function(e3) {
      var i2 = { blocks: t2.blocks.map(function(t3) {
        return t3.imgs;
      }), prizes: t2.prizes.map(function(t3) {
        return t3.imgs;
      }), buttons: t2.buttons.map(function(t3) {
        return t3.imgs;
      }) };
      Object.keys(i2).forEach(function(n2) {
        var r2 = i2[n2], o2 = [];
        r2 && r2.forEach(function(e4, i3) {
          e4 && e4.forEach(function(e5, r3) {
            o2.push(t2.loadAndCacheImg(n2, i3, r3));
          });
        }), Promise.all(o2).then(function() {
          t2.draw(), e3();
        });
      });
    });
  }, e2.prototype.handleClick = function(t2) {
    var e3, i2 = this.ctx;
    i2.beginPath(), i2.arc(0, 0, this.maxBtnRadius, 0, 2 * Math.PI, false), i2.isPointInPath(t2.offsetX, t2.offsetY) && 0 === this.step && (null === (e3 = this.startCallback) || void 0 === e3 || e3.call(this, t2));
  }, e2.prototype.loadAndCacheImg = function(t2, e3, i2) {
    return g(this, void 0, void 0, function() {
      var n2 = this;
      return v(this, function(r2) {
        return [2, new Promise(function(r3, o2) {
          var s2 = n2[t2][e3];
          if (s2 && s2.imgs) {
            var a2 = s2.imgs[i2];
            a2 && n2.loadImg(a2.src, a2).then(function(t3) {
              return g(n2, void 0, void 0, function() {
                return v(this, function(e4) {
                  switch (e4.label) {
                    case 0:
                      return "function" != typeof a2.formatter ? [3, 2] : [4, Promise.resolve(a2.formatter.call(this, t3))];
                    case 1:
                      t3 = e4.sent(), e4.label = 2;
                    case 2:
                      return this.ImageCache.set(a2.src, t3), r3(), [2];
                  }
                });
              });
            }).catch(function(n3) {
              console.error(t2 + "[" + e3 + "].imgs[" + i2 + "] " + n3), o2();
            });
          }
        })];
      });
    });
  }, e2.prototype.drawBlock = function(t2, e3, i2) {
    var n2 = this, r2 = this.ctx;
    k(e3.background) && (r2.beginPath(), r2.fillStyle = e3.background, r2.arc(0, 0, t2, 0, 2 * Math.PI, false), r2.fill()), e3.imgs && e3.imgs.forEach(function(e4, i3) {
      var o2 = n2.ImageCache.get(e4.src);
      if (o2) {
        var s2 = n2.computedWidthAndHeight(o2, e4, 2 * t2, 2 * t2), a2 = s2[0], h2 = s2[1], c2 = [n2.getOffsetX(a2) + n2.getLength(e4.left, 2 * t2), n2.getLength(e4.top, 2 * t2) - t2], l2 = c2[0], u2 = c2[1];
        r2.save(), e4.rotate && r2.rotate(R(n2.rotateDeg)), n2.drawImage(r2, o2, l2, u2, a2, h2), r2.restore();
      }
    });
  }, e2.prototype.draw = function() {
    var t2, e3, i2 = this, n2 = this, r2 = n2.config, o2 = n2.ctx, s2 = n2._defaultConfig, a2 = n2._defaultStyle;
    null === (t2 = r2.beforeDraw) || void 0 === t2 || t2.call(this, o2), o2.clearRect(-this.Radius, -this.Radius, 2 * this.Radius, 2 * this.Radius), this.prizeRadius = this.blocks.reduce(function(t3, e4, n3) {
      return i2.drawBlock(t3, e4, n3), t3 - i2.getLength(e4.padding && e4.padding.split(" ")[0]);
    }, this.Radius), this.prizeDeg = 360 / this.prizes.length, this.prizeAng = R(this.prizeDeg);
    var h2 = this.prizeRadius * Math.sin(this.prizeAng / 2) * 2, c2 = R(this.rotateDeg - 90 + this.prizeDeg / 2 + s2.offsetDegree), l2 = function(t3, e4) {
      return i2.getOffsetX(o2.measureText(e4).width) + i2.getLength(t3.left, h2);
    }, u2 = function(t3, e4, n3) {
      var r3 = t3.lineHeight || a2.lineHeight || t3.fontSize || a2.fontSize;
      return i2.getLength(t3.top, e4) + (n3 + 1) * i2.getLength(r3);
    };
    o2.save(), this.prizes.forEach(function(t3, e4) {
      var n3 = c2 + e4 * i2.prizeAng, r3 = i2.prizeRadius - i2.maxBtnRadius, f2 = t3.background || a2.background;
      k(f2) && (o2.fillStyle = f2, function(t4, e5, i3, n4, r4, o3) {
        t4.beginPath();
        var s3, a3, h3 = R(90 / Math.PI / i3 * o3), c3 = n4 + h3, l3 = r4 - h3;
        t4.arc(0, 0, i3, c3, l3, false), t4.lineTo.apply(t4, (s3 = (n4 + r4) / 2, a3 = o3 / 2 / Math.abs(Math.sin((n4 - r4) / 2)), [+(Math.cos(s3) * a3).toFixed(8), +(Math.sin(s3) * a3).toFixed(8)])), t4.closePath();
      }(o2, i2.maxBtnRadius, i2.prizeRadius, n3 - i2.prizeAng / 2, n3 + i2.prizeAng / 2, i2.getLength(s2.gutter)), o2.fill());
      var p2 = Math.cos(n3) * i2.prizeRadius, d2 = Math.sin(n3) * i2.prizeRadius;
      o2.translate(p2, d2), o2.rotate(n3 + R(90)), t3.imgs && t3.imgs.forEach(function(t4, e5) {
        var n4 = i2.ImageCache.get(t4.src);
        if (n4) {
          var s3 = i2.computedWidthAndHeight(n4, t4, i2.prizeAng * i2.prizeRadius, r3), a3 = s3[0], c3 = s3[1], l3 = [i2.getOffsetX(a3) + i2.getLength(t4.left, h2), i2.getLength(t4.top, r3)], u3 = l3[0], f3 = l3[1];
          i2.drawImage(o2, n4, u3, f3, a3, c3);
        }
      }), t3.fonts && t3.fonts.forEach(function(t4) {
        var e5 = t4.fontColor || a2.fontColor, n4 = t4.fontWeight || a2.fontWeight, h3 = i2.getLength(t4.fontSize || a2.fontSize), c3 = t4.fontStyle || a2.fontStyle, f3 = w(t4, "wordWrap") ? t4.wordWrap : a2.wordWrap, p3 = t4.lengthLimit || a2.lengthLimit, d3 = t4.lineClamp || a2.lineClamp;
        o2.fillStyle = e5, o2.font = n4 + " " + (h3 >> 0) + "px " + c3;
        var g2 = String(t4.text);
        (f3 ? z(o2, b(g2), function(e6) {
          var n5 = (i2.prizeRadius - u2(t4, r3, e6.length)) * Math.tan(i2.prizeAng / 2) * 2 - i2.getLength(s2.gutter);
          return i2.getLength(p3, n5);
        }, d3) : g2.split("\n")).filter(function(t5) {
          return !!t5;
        }).forEach(function(e6, i3) {
          o2.fillText(e6, l2(t4, e6), u2(t4, r3, i3));
        });
      }), o2.rotate(R(360) - n3 - R(90)), o2.translate(-p2, -d2);
    }), o2.restore(), this.buttons.forEach(function(t3, e4) {
      var n3 = i2.getLength(t3.radius, i2.prizeRadius);
      i2.maxBtnRadius = Math.max(i2.maxBtnRadius, n3), k(t3.background) && (o2.beginPath(), o2.fillStyle = t3.background, o2.arc(0, 0, n3, 0, 2 * Math.PI, false), o2.fill()), t3.pointer && k(t3.background) && (o2.beginPath(), o2.fillStyle = t3.background, o2.moveTo(-n3, 0), o2.lineTo(n3, 0), o2.lineTo(0, 2 * -n3), o2.closePath(), o2.fill()), t3.imgs && t3.imgs.forEach(function(t4, e5) {
        var r3 = i2.ImageCache.get(t4.src);
        if (r3) {
          var s3 = i2.computedWidthAndHeight(r3, t4, 2 * n3, 2 * n3), a3 = s3[0], h3 = s3[1], c3 = [i2.getOffsetX(a3) + i2.getLength(t4.left, n3), i2.getLength(t4.top, n3)], l3 = c3[0], u3 = c3[1];
          i2.drawImage(o2, r3, l3, u3, a3, h3);
        }
      }), t3.fonts && t3.fonts.forEach(function(t4) {
        var e5 = t4.fontColor || a2.fontColor, r3 = t4.fontWeight || a2.fontWeight, s3 = i2.getLength(t4.fontSize || a2.fontSize), h3 = t4.fontStyle || a2.fontStyle;
        o2.fillStyle = e5, o2.font = r3 + " " + (s3 >> 0) + "px " + h3, String(t4.text).split("\n").forEach(function(e6, i3) {
          o2.fillText(e6, l2(t4, e6), u2(t4, n3, i3));
        });
      });
    }), null === (e3 = r2.afterDraw) || void 0 === e3 || e3.call(this, o2);
  }, e2.prototype.carveOnGunwaleOfAMovingBoat = function() {
    var t2 = this, e3 = t2._defaultConfig, i2 = t2.prizeFlag, n2 = t2.prizeDeg, r2 = t2.rotateDeg;
    this.endTime = Date.now();
    for (var o2 = this.stopDeg = r2, s2 = e3.speed, a2 = (Math.random() * n2 - n2 / 2) * this.getLength(e3.stopRange), h2 = 0, c2 = 0, l2 = 0; ++h2; ) {
      var u2 = 360 * h2 - i2 * n2 - r2 - e3.offsetDegree + a2 - n2 / 2, f2 = H(this.FPS, o2, u2, e3.decelerationTime) - o2;
      if (f2 > s2) {
        this.endDeg = s2 - c2 > f2 - s2 ? u2 : l2;
        break;
      }
      l2 = u2, c2 = f2;
    }
  }, e2.prototype.play = function() {
    var t2, e3;
    0 === this.step && (this.startTime = Date.now(), this.prizeFlag = void 0, this.step = 1, null === (e3 = (t2 = this.config).afterStart) || void 0 === e3 || e3.call(t2), this.run());
  }, e2.prototype.stop = function(t2) {
    if (0 !== this.step && 3 !== this.step) {
      if (!t2 && 0 !== t2) {
        var e3 = this.prizes.map(function(t3) {
          return t3.range;
        });
        t2 = C(e3);
      }
      t2 < 0 ? (this.step = 0, this.prizeFlag = -1) : (this.step = 2, this.prizeFlag = t2 % this.prizes.length);
    }
  }, e2.prototype.run = function(t2) {
    var e3;
    void 0 === t2 && (t2 = 0);
    var i2 = this, n2 = i2.rAF, r2 = i2.step, o2 = i2.prizeFlag, s2 = i2._defaultConfig, a2 = s2.accelerationTime, h2 = s2.decelerationTime, c2 = s2.speed;
    if (0 !== r2) {
      if (-1 !== o2) {
        3 !== r2 || this.endDeg || this.carveOnGunwaleOfAMovingBoat();
        var l2 = Date.now() - this.startTime, u2 = Date.now() - this.endTime, f2 = this.rotateDeg;
        if (1 === r2 || l2 < a2) {
          this.FPS = l2 / t2;
          var p2 = F(l2, 0, c2, a2);
          p2 === c2 && (this.step = 2), f2 += p2 % 360;
        } else 2 === r2 ? (f2 += c2 % 360, void 0 !== o2 && o2 >= 0 && (this.step = 3, this.stopDeg = 0, this.endDeg = 0)) : 3 === r2 ? (f2 = H(u2, this.stopDeg, this.endDeg, h2), u2 >= h2 && (this.step = 0)) : this.stop(-1);
        this.rotateDeg = f2, this.draw(), n2(this.run.bind(this, t2 + 1));
      }
    } else null === (e3 = this.endCallback) || void 0 === e3 || e3.call(this, this.prizes.find(function(t3, e4) {
      return e4 === o2;
    }) || {});
  }, e2.prototype.conversionAxis = function(t2, e3) {
    var i2 = this.config;
    return [t2 / i2.dpr - this.Radius, e3 / i2.dpr - this.Radius];
  }, e2;
}($);
var M = function(t) {
  function e2(e3, i2) {
    var n2, r2 = t.call(this, e3, { width: i2.width, height: i2.height }) || this;
    return r2.rows = 3, r2.cols = 3, r2.blocks = [], r2.prizes = [], r2.buttons = [], r2.defaultConfig = {}, r2.defaultStyle = {}, r2.activeStyle = {}, r2._defaultConfig = {}, r2._defaultStyle = {}, r2._activeStyle = {}, r2.cellWidth = 0, r2.cellHeight = 0, r2.startTime = 0, r2.endTime = 0, r2.currIndex = 0, r2.stopIndex = 0, r2.endIndex = 0, r2.demo = false, r2.timer = 0, r2.FPS = 16.6, r2.step = 0, r2.prizeFlag = -1, r2.cells = [], r2.ImageCache = /* @__PURE__ */ new Map(), r2.initData(i2), r2.initWatch(), r2.initComputed(), null === (n2 = e3.beforeCreate) || void 0 === n2 || n2.call(r2), r2.init(), r2;
  }
  return p(e2, t), e2.prototype.resize = function() {
    var e3, i2;
    t.prototype.resize.call(this), this.draw(), null === (i2 = (e3 = this.config).afterResize) || void 0 === i2 || i2.call(e3);
  }, e2.prototype.initLucky = function() {
    this.cellWidth = 0, this.cellHeight = 0, this.startTime = 0, this.endTime = 0, this.currIndex = 0, this.stopIndex = 0, this.endIndex = 0, this.demo = false, this.timer = 0, this.FPS = 16.6, this.prizeFlag = -1, this.step = 0, t.prototype.initLucky.call(this);
  }, e2.prototype.initData = function(t2) {
    this.$set(this, "width", t2.width), this.$set(this, "height", t2.height), this.$set(this, "rows", Number(t2.rows) || 3), this.$set(this, "cols", Number(t2.cols) || 3), this.$set(this, "blocks", t2.blocks || []), this.$set(this, "prizes", t2.prizes || []), this.$set(this, "buttons", t2.buttons || []), this.$set(this, "button", t2.button), this.$set(this, "defaultConfig", t2.defaultConfig || {}), this.$set(this, "defaultStyle", t2.defaultStyle || {}), this.$set(this, "activeStyle", t2.activeStyle || {}), this.$set(this, "startCallback", t2.start), this.$set(this, "endCallback", t2.end);
  }, e2.prototype.initComputed = function() {
    var t2 = this;
    this.$computed(this, "_defaultConfig", function() {
      var e3 = d({ gutter: 5, speed: 20, accelerationTime: 2500, decelerationTime: 2500 }, t2.defaultConfig);
      return e3.gutter = t2.getLength(e3.gutter), e3.speed = e3.speed / 40, e3;
    }), this.$computed(this, "_defaultStyle", function() {
      return d({ borderRadius: 20, fontColor: "#000", fontSize: "18px", fontStyle: "sans-serif", fontWeight: "400", background: "rgba(0,0,0,0)", shadow: "", wordWrap: true, lengthLimit: "90%" }, t2.defaultStyle);
    }), this.$computed(this, "_activeStyle", function() {
      return d({ background: "#ffce98", shadow: "" }, t2.activeStyle);
    });
  }, e2.prototype.initWatch = function() {
    var t2 = this;
    this.$watch("width", function(e3) {
      t2.data.width = e3, t2.resize();
    }), this.$watch("height", function(e3) {
      t2.data.height = e3, t2.resize();
    }), this.$watch("blocks", function(e3) {
      t2.initImageCache();
    }, { deep: true }), this.$watch("prizes", function(e3) {
      t2.initImageCache();
    }, { deep: true }), this.$watch("buttons", function(e3) {
      t2.initImageCache();
    }, { deep: true }), this.$watch("rows", function() {
      return t2.init();
    }), this.$watch("cols", function() {
      return t2.init();
    }), this.$watch("defaultConfig", function() {
      return t2.draw();
    }, { deep: true }), this.$watch("defaultStyle", function() {
      return t2.draw();
    }, { deep: true }), this.$watch("activeStyle", function() {
      return t2.draw();
    }, { deep: true }), this.$watch("startCallback", function() {
      return t2.init();
    }), this.$watch("endCallback", function() {
      return t2.init();
    });
  }, e2.prototype.init = function() {
    var t2, e3;
    return g(this, void 0, void 0, function() {
      var i2;
      return v(this, function(n2) {
        switch (n2.label) {
          case 0:
            return this.initLucky(), i2 = this.config, null === (t2 = i2.beforeInit) || void 0 === t2 || t2.call(this), this.draw(), [4, this.initImageCache()];
          case 1:
            return n2.sent(), null === (e3 = i2.afterInit) || void 0 === e3 || e3.call(this), [2];
        }
      });
    });
  }, e2.prototype.initImageCache = function() {
    var t2 = this;
    return new Promise(function(e3) {
      var i2 = t2.buttons.map(function(t3) {
        return t3.imgs;
      });
      t2.button && i2.push(t2.button.imgs);
      var n2 = { blocks: t2.blocks.map(function(t3) {
        return t3.imgs;
      }), prizes: t2.prizes.map(function(t3) {
        return t3.imgs;
      }), buttons: i2 };
      Object.keys(n2).forEach(function(i3) {
        var r2 = n2[i3], o2 = [];
        r2 && r2.forEach(function(e4, n3) {
          e4 && e4.forEach(function(e5, r3) {
            o2.push(t2.loadAndCacheImg(i3, n3, r3));
          });
        }), Promise.all(o2).then(function() {
          t2.draw(), e3();
        });
      });
    });
  }, e2.prototype.handleClick = function(t2) {
    var e3 = this, i2 = this.ctx;
    y(y([], this.buttons), [this.button]).forEach(function(n2) {
      var r2;
      if (n2) {
        var o2 = e3.getGeometricProperty([n2.x, n2.y, n2.col || 1, n2.row || 1]), s2 = o2[0], a2 = o2[1], h2 = o2[2], c2 = o2[3];
        i2.beginPath(), i2.rect(s2, a2, h2, c2), i2.isPointInPath(t2.offsetX, t2.offsetY) && 0 === e3.step && ("function" == typeof n2.callback && n2.callback.call(e3, n2), null === (r2 = e3.startCallback) || void 0 === r2 || r2.call(e3, t2, n2));
      }
    });
  }, e2.prototype.loadAndCacheImg = function(t2, e3, i2) {
    return g(this, void 0, void 0, function() {
      var n2 = this;
      return v(this, function(r2) {
        return [2, new Promise(function(r3, o2) {
          var s2 = n2[t2][e3];
          if ("buttons" === t2 && !n2.buttons.length && n2.button && (s2 = n2.button), s2 && s2.imgs) {
            var a2 = s2.imgs[i2];
            if (a2) {
              var h2 = [n2.loadImg(a2.src, a2), a2.activeSrc && n2.loadImg(a2.activeSrc, a2, "$activeResolve")];
              Promise.all(h2).then(function(t3) {
                var e4 = t3[0], i3 = t3[1];
                return g(n2, void 0, void 0, function() {
                  var t4;
                  return v(this, function(n3) {
                    switch (n3.label) {
                      case 0:
                        return "function" != typeof (t4 = a2.formatter) ? [3, 3] : [4, Promise.resolve(t4.call(this, e4))];
                      case 1:
                        return e4 = n3.sent(), i3 ? [4, Promise.resolve(t4.call(this, i3))] : [3, 3];
                      case 2:
                        i3 = n3.sent(), n3.label = 3;
                      case 3:
                        return this.ImageCache.set(a2.src, e4), i3 && this.ImageCache.set(a2.activeSrc, i3), r3(), [2];
                    }
                  });
                });
              }).catch(function(n3) {
                console.error(t2 + "[" + e3 + "].imgs[" + i2 + "] " + n3), o2();
              });
            }
          }
        })];
      });
    });
  }, e2.prototype.draw = function() {
    var t2, e3, i2 = this, n2 = this, r2 = n2.config, o2 = n2.ctx, s2 = n2._defaultConfig, a2 = n2._defaultStyle, h2 = n2._activeStyle;
    null === (t2 = r2.beforeDraw) || void 0 === t2 || t2.call(this, o2), o2.clearRect(0, 0, this.boxWidth, this.boxHeight), this.cells = y(y([], this.prizes), this.buttons), this.button && this.cells.push(this.button), this.cells.forEach(function(t3) {
      t3.col = t3.col || 1, t3.row = t3.row || 1;
    }), this.prizeArea = this.blocks.reduce(function(t3, e4, n3) {
      var r3 = t3.x, s3 = t3.y, a3 = t3.w, h3 = t3.h, c2 = S(e4, i2.getLength.bind(i2)), l2 = c2[0], u2 = c2[1], f2 = c2[2], p2 = c2[3], d2 = e4.borderRadius ? i2.getLength(e4.borderRadius) : 0, g2 = e4.background;
      return k(g2) && (o2.fillStyle = i2.handleBackground(r3, s3, a3, h3, g2), D(o2, r3, s3, a3, h3, d2), o2.fill()), e4.imgs && e4.imgs.forEach(function(t4, e5) {
        var n4 = i2.ImageCache.get(t4.src);
        if (n4) {
          var c3 = i2.computedWidthAndHeight(n4, t4, a3, h3), l3 = c3[0], u3 = c3[1], f3 = [i2.getOffsetX(l3, a3) + i2.getLength(t4.left, a3), i2.getLength(t4.top, h3)], p3 = f3[0], d3 = f3[1];
          i2.drawImage(o2, n4, r3 + p3, s3 + d3, l3, u3);
        }
      }), { x: r3 + f2, y: s3 + l2, w: a3 - f2 - p2, h: h3 - l2 - u2 };
    }, { x: 0, y: 0, w: this.boxWidth, h: this.boxHeight }), this.cellWidth = (this.prizeArea.w - s2.gutter * (this.cols - 1)) / this.cols, this.cellHeight = (this.prizeArea.h - s2.gutter * (this.rows - 1)) / this.rows, this.cells.forEach(function(t3, e4) {
      var n3 = i2.getGeometricProperty([t3.x, t3.y, t3.col, t3.row]), s3 = n3[0], c2 = n3[1], l2 = n3[2], u2 = n3[3], f2 = false;
      (void 0 === i2.prizeFlag || i2.prizeFlag > -1) && (f2 = e4 === i2.currIndex % i2.prizes.length >> 0);
      var p2 = f2 ? h2.background : t3.background || a2.background;
      if (k(p2)) {
        var d2 = (f2 ? h2.shadow : t3.shadow || a2.shadow).replace(/px/g, "").split(",")[0].split(" ").map(function(t4, e5) {
          return e5 < 3 ? Number(t4) : t4;
        });
        4 === d2.length && (o2.shadowColor = d2[3], o2.shadowOffsetX = d2[0] * r2.dpr, o2.shadowOffsetY = d2[1] * r2.dpr, o2.shadowBlur = d2[2], d2[0] > 0 ? l2 -= d2[0] : (l2 += d2[0], s3 -= d2[0]), d2[1] > 0 ? u2 -= d2[1] : (u2 += d2[1], c2 -= d2[1])), o2.fillStyle = i2.handleBackground(s3, c2, l2, u2, p2);
        var g2 = i2.getLength(t3.borderRadius ? t3.borderRadius : a2.borderRadius);
        D(o2, s3, c2, l2, u2, g2), o2.fill(), o2.shadowColor = "rgba(0, 0, 0, 0)", o2.shadowOffsetX = 0, o2.shadowOffsetY = 0, o2.shadowBlur = 0;
      }
      e4 >= i2.prizes.length && (e4 -= i2.prizes.length), t3.imgs && t3.imgs.forEach(function(t4, e5) {
        var n4 = i2.ImageCache.get(t4.src), r3 = i2.ImageCache.get(t4.activeSrc);
        if (n4) {
          var a3 = f2 && r3 || n4;
          if (a3) {
            var h3 = i2.computedWidthAndHeight(a3, t4, l2, u2), p3 = h3[0], d3 = h3[1], g3 = [s3 + i2.getOffsetX(p3, l2) + i2.getLength(t4.left, l2), c2 + i2.getLength(t4.top, u2)], v2 = g3[0], y2 = g3[1];
            i2.drawImage(o2, a3, v2, y2, p3, d3);
          }
        }
      }), t3.fonts && t3.fonts.forEach(function(t4) {
        var e5 = f2 && h2.fontStyle ? h2.fontStyle : t4.fontStyle || a2.fontStyle, n4 = f2 && h2.fontWeight ? h2.fontWeight : t4.fontWeight || a2.fontWeight, r3 = f2 && h2.fontSize ? i2.getLength(h2.fontSize) : i2.getLength(t4.fontSize || a2.fontSize), p3 = f2 && h2.lineHeight ? h2.lineHeight : t4.lineHeight || a2.lineHeight || t4.fontSize || a2.fontSize, d3 = w(t4, "wordWrap") ? t4.wordWrap : a2.wordWrap, g3 = t4.lengthLimit || a2.lengthLimit, v2 = t4.lineClamp || a2.lineClamp;
        o2.font = n4 + " " + (r3 >> 0) + "px " + e5, o2.fillStyle = f2 && h2.fontColor ? h2.fontColor : t4.fontColor || a2.fontColor;
        var y2 = [], m2 = String(t4.text);
        if (d3) {
          var k2 = i2.getLength(g3, l2);
          y2 = z(o2, b(m2), function() {
            return k2;
          }, v2);
        } else y2 = m2.split("\n");
        y2.forEach(function(e6, n5) {
          o2.fillText(e6, s3 + i2.getOffsetX(o2.measureText(e6).width, l2) + i2.getLength(t4.left, l2), c2 + i2.getLength(t4.top, u2) + (n5 + 1) * i2.getLength(p3));
        });
      });
    }), null === (e3 = r2.afterDraw) || void 0 === e3 || e3.call(this, o2);
  }, e2.prototype.handleBackground = function(t2, e3, i2, n2, r2) {
    var o2 = this.ctx;
    return r2.includes("linear-gradient") && (r2 = function(t3, e4, i3, n3, r3, o3) {
      var s2 = /linear-gradient\((.+)\)/.exec(o3)[1].split(",").map(function(t4) {
        return t4.trim();
      }), a2 = s2.shift(), h2 = [0, 0, 0, 0];
      if (a2.includes("deg")) {
        var c2 = function(t4) {
          return Math.tan(t4 / 180 * Math.PI);
        };
        (a2 = a2.slice(0, -3) % 360) >= 0 && a2 < 45 ? h2 = [e4, i3 + r3, e4 + n3, i3 + r3 - n3 * c2(a2 - 0)] : a2 >= 45 && a2 < 90 ? h2 = [e4, i3 + r3, e4 + n3 - r3 * c2(a2 - 45), i3] : a2 >= 90 && a2 < 135 ? h2 = [e4 + n3, i3 + r3, e4 + n3 - r3 * c2(a2 - 90), i3] : a2 >= 135 && a2 < 180 ? h2 = [e4 + n3, i3 + r3, e4, i3 + n3 * c2(a2 - 135)] : a2 >= 180 && a2 < 225 ? h2 = [e4 + n3, i3, e4, i3 + n3 * c2(a2 - 180)] : a2 >= 225 && a2 < 270 ? h2 = [e4 + n3, i3, e4 + r3 * c2(a2 - 225), i3 + r3] : a2 >= 270 && a2 < 315 ? h2 = [e4, i3, e4 + r3 * c2(a2 - 270), i3 + r3] : a2 >= 315 && a2 < 360 && (h2 = [e4, i3, e4 + n3, i3 + r3 - n3 * c2(a2 - 315)]);
      } else a2.includes("top") ? h2 = [e4, i3 + r3, e4, i3] : a2.includes("bottom") ? h2 = [e4, i3, e4, i3 + r3] : a2.includes("left") ? h2 = [e4 + n3, i3, e4, i3] : a2.includes("right") && (h2 = [e4, i3, e4 + n3, i3]);
      var l2 = t3.createLinearGradient.apply(t3, h2.map(function(t4) {
        return t4 >> 0;
      }));
      return s2.reduce(function(t4, e5, i4) {
        var n4 = e5.split(" ");
        return 1 === n4.length ? t4.addColorStop(i4, n4[0]) : 2 === n4.length && t4.addColorStop.apply(t4, n4), t4;
      }, l2);
    }(o2, t2, e3, i2, n2, r2)), r2;
  }, e2.prototype.carveOnGunwaleOfAMovingBoat = function() {
    var t2 = this, e3 = t2._defaultConfig, i2 = t2.prizeFlag, n2 = t2.currIndex;
    this.endTime = Date.now();
    for (var r2 = this.stopIndex = n2, o2 = e3.speed, s2 = 0, a2 = 0, h2 = 0; ++s2; ) {
      var c2 = this.prizes.length * s2 + i2 - r2, l2 = H(this.FPS, r2, c2, e3.decelerationTime) - r2;
      if (l2 > o2) {
        this.endIndex = o2 - a2 > l2 - o2 ? c2 : h2;
        break;
      }
      h2 = c2, a2 = l2;
    }
  }, e2.prototype.play = function() {
    var t2, e3;
    0 === this.step && (this.startTime = Date.now(), this.prizeFlag = void 0, this.step = 1, null === (e3 = (t2 = this.config).afterStart) || void 0 === e3 || e3.call(t2), this.run());
  }, e2.prototype.stop = function(t2) {
    if (0 !== this.step && 3 !== this.step) {
      if (!t2 && 0 !== t2) {
        var e3 = this.prizes.map(function(t3) {
          return t3.range;
        });
        t2 = C(e3);
      }
      t2 < 0 ? (this.step = 0, this.prizeFlag = -1) : (this.step = 2, this.prizeFlag = t2 % this.prizes.length);
    }
  }, e2.prototype.run = function(t2) {
    var e3;
    void 0 === t2 && (t2 = 0);
    var i2 = this, n2 = i2.rAF, r2 = i2.step, o2 = i2.prizes, s2 = i2.prizeFlag, a2 = i2._defaultConfig, h2 = a2.accelerationTime, c2 = a2.decelerationTime, l2 = a2.speed;
    if (0 !== r2) {
      if (-1 !== s2) {
        3 !== r2 || this.endIndex || this.carveOnGunwaleOfAMovingBoat();
        var u2 = Date.now() - this.startTime, f2 = Date.now() - this.endTime, p2 = this.currIndex;
        if (1 === r2 || u2 < h2) {
          this.FPS = u2 / t2;
          var d2 = F(u2, 0.1, l2 - 0.1, h2);
          d2 === l2 && (this.step = 2), p2 += d2 % o2.length;
        } else 2 === r2 ? (p2 += l2 % o2.length, void 0 !== s2 && s2 >= 0 && (this.step = 3, this.stopIndex = 0, this.endIndex = 0)) : 3 === r2 ? (p2 = H(f2, this.stopIndex, this.endIndex, c2), f2 >= c2 && (this.step = 0)) : this.stop(-1);
        this.currIndex = p2, this.draw(), n2(this.run.bind(this, t2 + 1));
      }
    } else null === (e3 = this.endCallback) || void 0 === e3 || e3.call(this, this.prizes.find(function(t3, e4) {
      return e4 === s2;
    }) || {});
  }, e2.prototype.getGeometricProperty = function(t2) {
    var e3 = t2[0], i2 = t2[1], n2 = t2[2], r2 = void 0 === n2 ? 1 : n2, o2 = t2[3], s2 = void 0 === o2 ? 1 : o2, a2 = this.cellWidth, h2 = this.cellHeight, c2 = this._defaultConfig.gutter, l2 = [this.prizeArea.x + (a2 + c2) * e3, this.prizeArea.y + (h2 + c2) * i2];
    return r2 && s2 && l2.push(a2 * r2 + c2 * (r2 - 1), h2 * s2 + c2 * (s2 - 1)), l2;
  }, e2.prototype.conversionAxis = function(t2, e3) {
    var i2 = this.config;
    return [t2 / i2.dpr, e3 / i2.dpr];
  }, e2;
}($);
var B = function(t) {
  function e2(e3, i2) {
    var n2, r2 = t.call(this, e3, { width: i2.width, height: i2.height }) || this;
    return r2.blocks = [], r2.prizes = [], r2.slots = [], r2.defaultConfig = {}, r2._defaultConfig = {}, r2.defaultStyle = {}, r2._defaultStyle = {}, r2.endCallback = function() {
    }, r2.cellWidth = 0, r2.cellHeight = 0, r2.cellAndSpacing = 0, r2.widthAndSpacing = 0, r2.heightAndSpacing = 0, r2.FPS = 16.6, r2.scroll = [], r2.stopScroll = [], r2.endScroll = [], r2.startTime = 0, r2.endTime = 0, r2.step = 0, r2.prizeFlag = void 0, r2.ImageCache = /* @__PURE__ */ new Map(), r2.initData(i2), r2.initWatch(), r2.initComputed(), null === (n2 = e3.beforeCreate) || void 0 === n2 || n2.call(r2), r2.init(), r2;
  }
  return p(e2, t), e2.prototype.resize = function() {
    var e3, i2;
    t.prototype.resize.call(this), this.draw(), null === (i2 = (e3 = this.config).afterResize) || void 0 === i2 || i2.call(e3);
  }, e2.prototype.initLucky = function() {
    this.cellWidth = 0, this.cellHeight = 0, this.cellAndSpacing = 0, this.widthAndSpacing = 0, this.heightAndSpacing = 0, this.FPS = 16.6, this.scroll = [], this.stopScroll = [], this.endScroll = [], this.startTime = 0, this.endTime = 0, this.prizeFlag = void 0, this.step = 0, t.prototype.initLucky.call(this);
  }, e2.prototype.initData = function(t2) {
    this.$set(this, "width", t2.width), this.$set(this, "height", t2.height), this.$set(this, "blocks", t2.blocks || []), this.$set(this, "prizes", t2.prizes || []), this.$set(this, "slots", t2.slots || []), this.$set(this, "defaultConfig", t2.defaultConfig || {}), this.$set(this, "defaultStyle", t2.defaultStyle || {}), this.$set(this, "endCallback", t2.end);
  }, e2.prototype.initComputed = function() {
    var t2 = this;
    this.$computed(this, "_defaultConfig", function() {
      var e3 = d({ mode: "vertical", rowSpacing: 0, colSpacing: 5, speed: 20, direction: 1, accelerationTime: 2500, decelerationTime: 2500 }, t2.defaultConfig);
      return e3.rowSpacing = t2.getLength(e3.rowSpacing), e3.colSpacing = t2.getLength(e3.colSpacing), e3;
    }), this.$computed(this, "_defaultStyle", function() {
      return d({ borderRadius: 0, fontColor: "#000", fontSize: "18px", fontStyle: "sans-serif", fontWeight: "400", background: "rgba(0,0,0,0)", wordWrap: true, lengthLimit: "90%" }, t2.defaultStyle);
    });
  }, e2.prototype.initWatch = function() {
    var t2 = this;
    this.$watch("width", function(e3) {
      t2.data.width = e3, t2.resize();
    }), this.$watch("height", function(e3) {
      t2.data.height = e3, t2.resize();
    }), this.$watch("blocks", function(e3) {
      t2.initImageCache();
    }, { deep: true }), this.$watch("prizes", function(e3) {
      t2.initImageCache();
    }, { deep: true }), this.$watch("slots", function(e3) {
      t2.drawOffscreenCanvas(), t2.draw();
    }, { deep: true }), this.$watch("defaultConfig", function() {
      return t2.draw();
    }, { deep: true }), this.$watch("defaultStyle", function() {
      return t2.draw();
    }, { deep: true }), this.$watch("endCallback", function() {
      return t2.init();
    });
  }, e2.prototype.init = function() {
    var t2, e3;
    return g(this, void 0, void 0, function() {
      var i2;
      return v(this, function(n2) {
        switch (n2.label) {
          case 0:
            return this.initLucky(), i2 = this.config, null === (t2 = i2.beforeInit) || void 0 === t2 || t2.call(this), this.drawOffscreenCanvas(), this.draw(), [4, this.initImageCache()];
          case 1:
            return n2.sent(), null === (e3 = i2.afterInit) || void 0 === e3 || e3.call(this), [2];
        }
      });
    });
  }, e2.prototype.initImageCache = function() {
    var t2 = this;
    return new Promise(function(e3) {
      var i2 = { blocks: t2.blocks.map(function(t3) {
        return t3.imgs;
      }), prizes: t2.prizes.map(function(t3) {
        return t3.imgs;
      }) };
      Object.keys(i2).forEach(function(n2) {
        var r2 = i2[n2], o2 = [];
        r2 && r2.forEach(function(e4, i3) {
          e4 && e4.forEach(function(e5, r3) {
            o2.push(t2.loadAndCacheImg(n2, i3, r3));
          });
        }), Promise.all(o2).then(function() {
          t2.drawOffscreenCanvas(), t2.draw(), e3();
        });
      });
    });
  }, e2.prototype.loadAndCacheImg = function(t2, e3, i2) {
    return g(this, void 0, void 0, function() {
      var n2 = this;
      return v(this, function(r2) {
        return [2, new Promise(function(r3, o2) {
          var s2 = n2[t2][e3];
          if (s2 && s2.imgs) {
            var a2 = s2.imgs[i2];
            a2 && n2.loadImg(a2.src, a2).then(function(t3) {
              return g(n2, void 0, void 0, function() {
                return v(this, function(e4) {
                  switch (e4.label) {
                    case 0:
                      return "function" != typeof a2.formatter ? [3, 2] : [4, Promise.resolve(a2.formatter.call(this, t3))];
                    case 1:
                      t3 = e4.sent(), e4.label = 2;
                    case 2:
                      return this.ImageCache.set(a2.src, t3), r3(), [2];
                  }
                });
              });
            }).catch(function(n3) {
              console.error(t2 + "[" + e3 + "].imgs[" + i2 + "] " + n3), o2();
            });
          }
        })];
      });
    });
  }, e2.prototype.drawOffscreenCanvas = function() {
    var t2 = this, e3 = this._defaultConfig, i2 = this._defaultStyle, n2 = this.drawBlocks(), r2 = n2.w, o2 = n2.h, s2 = this.prizes.length, a2 = this.displacementWidthOrHeight(), h2 = a2.cellWidth, c2 = a2.cellHeight, l2 = a2.widthAndSpacing, u2 = a2.heightAndSpacing, f2 = new Array(s2).fill(void 0).map(function(t3, e4) {
      return e4;
    }), p2 = 0, d2 = 0;
    this.slots.forEach(function(e4, i3) {
      void 0 === t2.scroll[i3] && (t2.scroll[i3] = 0), e4.order = e4.order || f2;
      var n3 = e4.order.length;
      p2 = Math.max(p2, r2 + l2 * n3), d2 = Math.max(d2, o2 + u2 * n3);
    });
    var g2 = this.getOffscreenCanvas(p2, d2), v2 = g2._offscreenCanvas, y2 = g2._ctx;
    this._offscreenCanvas = v2, this.slots.forEach(function(n3, r3) {
      var o3 = h2 * r3, s3 = c2 * r3, a3 = 0, f3 = function(t3, e4) {
        for (var i3 = {}, n4 = [], r4 = 0; r4 < t3.length; r4++) i3[r4] = t3[r4];
        for (r4 = 0; r4 < e4.length; r4++) {
          var o4 = i3[e4[r4]];
          o4 && (n4[r4] = o4);
        }
        return n4;
      }(t2.prizes, n3.order);
      if (f3.length) {
        f3.forEach(function(r4, f4) {
          if (r4) {
            n3.order[f4];
            var p4 = l2 * f4 + e3.colSpacing / 2, d3 = u2 * f4 + e3.rowSpacing / 2, g4 = t2.displacement([o3, d3, u2], [p4, s3, l2]), v3 = g4[0], m3 = g4[1], S3 = g4[2];
            a3 += S3;
            var C3 = r4.background || i2.background;
            if (k(C3)) {
              var x3 = t2.getLength(w(r4, "borderRadius") ? r4.borderRadius : i2.borderRadius);
              D(y2, v3, m3, h2, h2, x3), y2.fillStyle = C3, y2.fill();
            }
            r4.imgs && r4.imgs.forEach(function(e4, i3) {
              var n4 = t2.ImageCache.get(e4.src);
              if (n4) {
                var r5 = t2.computedWidthAndHeight(n4, e4, h2, c2), o4 = r5[0], s4 = r5[1], a4 = [v3 + t2.getOffsetX(o4, h2) + t2.getLength(e4.left, h2), m3 + t2.getLength(e4.top, c2)], l3 = a4[0], u3 = a4[1];
                t2.drawImage(y2, n4, l3, u3, o4, s4);
              }
            }), r4.fonts && r4.fonts.forEach(function(e4) {
              var n4 = e4.fontStyle || i2.fontStyle, r5 = e4.fontWeight || i2.fontWeight, o4 = t2.getLength(e4.fontSize || i2.fontSize), s4 = e4.lineHeight || i2.lineHeight || e4.fontSize || i2.fontSize, a4 = w(e4, "wordWrap") ? e4.wordWrap : i2.wordWrap, l3 = e4.lengthLimit || i2.lengthLimit, u3 = e4.lineClamp || i2.lineClamp;
              y2.font = r5 + " " + (o4 >> 0) + "px " + n4, y2.fillStyle = e4.fontColor || i2.fontColor;
              var f5 = [], p5 = String(e4.text);
              if (a4) {
                var d4 = t2.getLength(l3, h2);
                f5 = z(y2, b(p5), function() {
                  return d4;
                }, u3);
              } else f5 = p5.split("\n");
              f5.forEach(function(i3, n5) {
                y2.fillText(i3, v3 + t2.getOffsetX(y2.measureText(i3).width, h2) + t2.getLength(e4.left, h2), m3 + t2.getLength(e4.top, c2) + (n5 + 1) * t2.getLength(s4));
              });
            });
          }
        });
        for (var p3 = t2.displacement([o3, 0, h2, a3], [0, s3, a3, c2]), g3 = p3[0], m2 = p3[1], S2 = p3[2], C2 = p3[3], x2 = a3; x2 < d2 + a3; ) {
          var E2 = t2.displacement([g3, x2], [x2, m2]), O2 = E2[0], L2 = E2[1];
          t2.drawImage(y2, v2, g3, m2, S2, C2, O2, L2, S2, C2), x2 += a3;
        }
      }
    });
  }, e2.prototype.drawBlocks = function() {
    var t2 = this, e3 = this;
    e3.config;
    var i2 = e3.ctx;
    e3._defaultConfig;
    var n2 = e3._defaultStyle;
    return this.prizeArea = this.blocks.reduce(function(e4, r2, o2) {
      var s2 = e4.x, a2 = e4.y, h2 = e4.w, c2 = e4.h, l2 = S(r2, t2.getLength.bind(t2)), u2 = l2[0], f2 = l2[1], p2 = l2[2], d2 = l2[3], g2 = r2.borderRadius ? t2.getLength(r2.borderRadius) : 0, v2 = r2.background || n2.background;
      return k(v2) && (D(i2, s2, a2, h2, c2, g2), i2.fillStyle = v2, i2.fill()), r2.imgs && r2.imgs.forEach(function(e5, n3) {
        var r3 = t2.ImageCache.get(e5.src);
        if (r3) {
          var o3 = t2.computedWidthAndHeight(r3, e5, h2, c2), l3 = o3[0], u3 = o3[1], f3 = [t2.getOffsetX(l3, h2) + t2.getLength(e5.left, h2), t2.getLength(e5.top, c2)], p3 = f3[0], d3 = f3[1];
          t2.drawImage(i2, r3, s2 + p3, a2 + d3, l3, u3);
        }
      }), { x: s2 + p2, y: a2 + u2, w: h2 - p2 - d2, h: c2 - u2 - f2 };
    }, { x: 0, y: 0, w: this.boxWidth, h: this.boxHeight });
  }, e2.prototype.draw = function() {
    var t2, e3 = this, i2 = this, n2 = i2.config, r2 = i2.ctx;
    i2._defaultConfig, i2._defaultStyle, null === (t2 = n2.beforeDraw) || void 0 === t2 || t2.call(this, r2), r2.clearRect(0, 0, this.boxWidth, this.boxHeight);
    var o2 = this.drawBlocks(), s2 = o2.x, a2 = o2.y, h2 = o2.w, c2 = o2.h;
    if (this._offscreenCanvas) {
      var l2 = this, u2 = l2.cellWidth, f2 = l2.cellHeight, p2 = l2.cellAndSpacing, d2 = l2.widthAndSpacing, g2 = l2.heightAndSpacing;
      this.slots.forEach(function(t3, i3) {
        var n3 = p2 * t3.order.length, o3 = e3.displacement(-(c2 - g2) / 2, -(h2 - d2) / 2), l3 = e3.scroll[i3] + o3;
        l3 < 0 && (l3 = l3 % n3 + n3), l3 > n3 && (l3 %= n3);
        var v2 = e3.displacement([u2 * i3, l3, u2, c2], [l3, f2 * i3, h2, f2]), y2 = v2[0], m2 = v2[1], w2 = v2[2], b2 = v2[3], k2 = e3.displacement([s2 + d2 * i3, a2, u2, c2], [s2, a2 + g2 * i3, h2, f2]), S2 = k2[0], C2 = k2[1], z2 = k2[2], x2 = k2[3];
        e3.drawImage(r2, e3._offscreenCanvas, y2, m2, w2, b2, S2, C2, z2, x2);
      });
    }
  }, e2.prototype.carveOnGunwaleOfAMovingBoat = function() {
    var t2 = this, e3 = this, i2 = e3._defaultConfig, n2 = e3.prizeFlag, r2 = e3.cellAndSpacing;
    this.endTime = Date.now(), this.slots.forEach(function(e4, o2) {
      var s2 = e4.order;
      if (s2.length) for (var a2 = e4.speed || i2.speed, h2 = e4.direction || i2.direction, c2 = s2.findIndex(function(t3) {
        return t3 === n2[o2];
      }), l2 = r2 * s2.length, u2 = t2.stopScroll[o2] = t2.scroll[o2], f2 = 0; ++f2; ) {
        var p2 = r2 * c2 + l2 * f2 * h2 - u2, d2 = H(t2.FPS, u2, p2, i2.decelerationTime) - u2;
        if (Math.abs(d2) > a2) {
          t2.endScroll[o2] = p2;
          break;
        }
      }
    });
  }, e2.prototype.play = function() {
    var t2, e3;
    0 === this.step && (this.startTime = Date.now(), this.prizeFlag = void 0, this.step = 1, null === (e3 = (t2 = this.config).afterStart) || void 0 === e3 || e3.call(t2), this.run());
  }, e2.prototype.stop = function(t2) {
    var e3;
    if (0 !== this.step && 3 !== this.step) {
      if ("number" == typeof t2) this.prizeFlag = new Array(this.slots.length).fill(t2);
      else {
        if (!m(t2, "array")) return this.stop(-1), console.error("stop() 无法识别的参数类型 " + typeof t2);
        if (t2.length !== this.slots.length) return this.stop(-1), console.error("stop([" + t2 + "]) 参数长度的不正确");
        this.prizeFlag = t2;
      }
      (null === (e3 = this.prizeFlag) || void 0 === e3 ? void 0 : e3.includes(-1)) ? (this.prizeFlag = [], this.step = 0) : this.step = 2;
    }
  }, e2.prototype.run = function(t2) {
    var e3, i2, n2 = this;
    void 0 === t2 && (t2 = 0);
    var r2 = this, o2 = r2.rAF, s2 = r2.step, a2 = r2.prizeFlag, h2 = r2._defaultConfig, c2 = r2.cellAndSpacing, l2 = r2.slots, u2 = h2.accelerationTime, f2 = h2.decelerationTime;
    if (0 !== this.step || (null == a2 ? void 0 : a2.length) !== l2.length) {
      if (void 0 === a2 || a2.length) {
        3 !== this.step || this.endScroll.length || this.carveOnGunwaleOfAMovingBoat();
        var p2 = Date.now() - this.startTime, d2 = Date.now() - this.endTime;
        l2.forEach(function(e4, i3) {
          var r3 = e4.order;
          if (r3 && r3.length) {
            var o3 = c2 * r3.length, g3 = Math.abs(e4.speed || h2.speed), v3 = e4.direction || h2.direction, y3 = 0, m3 = n2.scroll[i3];
            if (1 === s2 || p2 < u2) {
              n2.FPS = p2 / t2;
              var w2 = F(p2, 0, g3, u2);
              w2 === g3 && (n2.step = 2), y3 = (m3 + w2 * v3) % o3;
            } else if (2 === s2) y3 = (m3 + g3 * v3) % o3, (null == a2 ? void 0 : a2.length) === l2.length && (n2.step = 3, n2.stopScroll = [], n2.endScroll = []);
            else if (3 === s2 && d2) {
              var b2 = n2.stopScroll[i3], k2 = n2.endScroll[i3];
              y3 = H(d2, b2, k2, f2), d2 >= f2 && (n2.step = 0);
            }
            n2.scroll[i3] = y3;
          }
        }), this.draw(), o2(this.run.bind(this, t2 + 1));
      }
    } else {
      for (var g2 = a2[0], v2 = 0; v2 < l2.length; v2++) {
        var y2 = l2[v2], m2 = a2[v2];
        if (!(null === (e3 = y2.order) || void 0 === e3 ? void 0 : e3.includes(m2)) || g2 !== m2) {
          g2 = -1;
          break;
        }
      }
      null === (i2 = this.endCallback) || void 0 === i2 || i2.call(this, this.prizes.find(function(t3, e4) {
        return e4 === g2;
      }) || void 0);
    }
  }, e2.prototype.displacement = function(t2, e3) {
    return "horizontal" === this._defaultConfig.mode ? e3 : t2;
  }, e2.prototype.displacementWidthOrHeight = function() {
    var t2 = this._defaultConfig.mode, e3 = this.slots.length, i2 = this._defaultConfig, n2 = i2.colSpacing, r2 = i2.rowSpacing, o2 = this.prizeArea || this.drawBlocks();
    o2.x, o2.y;
    var s2, a2, h2 = o2.w, c2 = o2.h, l2 = 0, u2 = 0;
    return "horizontal" === t2 ? (u2 = this.cellHeight = (c2 - r2 * (e3 - 1)) / e3, l2 = this.cellWidth = u2) : (l2 = this.cellWidth = (h2 - n2 * (e3 - 1)) / e3, u2 = this.cellHeight = l2), s2 = this.widthAndSpacing = this.cellWidth + n2, a2 = this.heightAndSpacing = this.cellHeight + r2, this.cellAndSpacing = "horizontal" === t2 ? s2 : a2, { cellWidth: l2, cellHeight: u2, widthAndSpacing: s2, heightAndSpacing: a2 };
  }, e2;
}($);
var N = "@lucky-canvas/react";
var X = function(e2) {
  a(s2, wn.Component);
  var r2 = u(s2);
  function s2(e3) {
    var i2;
    return n(this, s2), (i2 = r2.call(this, e3)).myLucky = wn.createRef(), i2.lucky = void 0, i2;
  }
  return o(s2, [{ key: "componentDidMount", value: function() {
    if (!this.lucky) {
      this.myLucky.current.setAttribute("package", "".concat(N, "@").concat("0.1.13"));
      try {
        this.initLucky(), this.props.onSuccess && this.props.onSuccess();
      } catch (t) {
        this.props.onError && this.props.onError(t);
      } finally {
        this.props.onFinally && this.props.onFinally();
      }
    }
  } }, { key: "componentDidUpdate", value: function(t) {
    this.lucky && (this.props.width !== t.width && (this.lucky.width = this.props.width), this.props.height !== t.height && (this.lucky.height = this.props.height), this.props.blocks !== t.blocks && (this.lucky.blocks = this.props.blocks), this.props.prizes !== t.prizes && (this.lucky.prizes = this.props.prizes), this.props.buttons !== t.buttons && (this.lucky.buttons = this.props.buttons));
  } }, { key: "initLucky", value: function() {
    var t = this;
    this.lucky = new j({ flag: "WEB", divElement: this.myLucky.current }, i(i({}, this.props), {}, { start: function() {
      var e3;
      t.props.onStart && (e3 = t.props).onStart.apply(e3, arguments);
    }, end: function() {
      var e3;
      t.props.onEnd && (e3 = t.props).onEnd.apply(e3, arguments);
    } }));
  } }, { key: "init", value: function() {
    var t;
    (t = this.lucky).init.apply(t, arguments);
  } }, { key: "play", value: function() {
    var t;
    (t = this.lucky).play.apply(t, arguments);
  } }, { key: "stop", value: function() {
    var t;
    (t = this.lucky).stop.apply(t, arguments);
  } }, { key: "render", value: function() {
    return wn.createElement("div", { ref: this.myLucky });
  } }]), s2;
}();
X.defaultProps = { width: "", height: "", prizes: [], blocks: [], buttons: [], defaultStyle: {}, defaultConfig: {} };
var G = function(e2) {
  a(s2, wn.Component);
  var r2 = u(s2);
  function s2(e3) {
    var i2;
    return n(this, s2), (i2 = r2.call(this, e3)).myLucky = wn.createRef(), i2.lucky = void 0, i2;
  }
  return o(s2, [{ key: "componentDidMount", value: function() {
    if (!this.lucky) {
      this.myLucky.current.setAttribute("package", "".concat(N, "@").concat("0.1.13"));
      try {
        this.initLucky(), this.props.onSuccess && this.props.onSuccess();
      } catch (t) {
        this.props.onError && this.props.onError(t);
      } finally {
        this.props.onFinally && this.props.onFinally(err);
      }
    }
  } }, { key: "componentDidUpdate", value: function(t) {
    this.lucky && (this.props.width !== t.width && (this.lucky.width = this.props.width), this.props.height !== t.height && (this.lucky.height = this.props.height), this.props.cols !== t.cols && (this.lucky.cols = this.props.cols), this.props.rows !== t.rows && (this.lucky.rows = this.props.rows), this.props.blocks !== t.blocks && (this.lucky.blocks = this.props.blocks), this.props.prizes !== t.prizes && (this.lucky.prizes = this.props.prizes), this.props.buttons !== t.buttons && (this.lucky.buttons = this.props.buttons));
  } }, { key: "initLucky", value: function() {
    var t = this;
    this.lucky = new M({ flag: "WEB", divElement: this.myLucky.current }, i(i({}, this.props), {}, { start: function() {
      var e3;
      t.props.onStart && (e3 = t.props).onStart.apply(e3, arguments);
    }, end: function() {
      var e3;
      t.props.onEnd && (e3 = t.props).onEnd.apply(e3, arguments);
    } }));
  } }, { key: "init", value: function() {
    var t;
    (t = this.$lucky).init.apply(t, arguments);
  } }, { key: "play", value: function() {
    var t;
    (t = this.lucky).play.apply(t, arguments);
  } }, { key: "stop", value: function() {
    var t;
    (t = this.lucky).stop.apply(t, arguments);
  } }, { key: "render", value: function() {
    return wn.createElement("div", { ref: this.myLucky });
  } }]), s2;
}();
G.defaultProps = { width: "", height: "", cols: 3, rows: 3, blocks: [], prizes: [], buttons: [], defaultStyle: {}, activeStyle: {}, defaultConfig: {} };
var U = function(e2) {
  a(s2, wn.Component);
  var r2 = u(s2);
  function s2(e3) {
    var i2;
    return n(this, s2), (i2 = r2.call(this, e3)).myLucky = wn.createRef(), i2.lucky = void 0, i2;
  }
  return o(s2, [{ key: "componentDidMount", value: function() {
    if (!this.lucky) {
      this.myLucky.current.setAttribute("package", "".concat(N, "@").concat("0.1.13"));
      try {
        this.initLucky(), this.props.onSuccess && this.props.onSuccess();
      } catch (t) {
        this.props.onError && this.props.onError(t);
      } finally {
        this.props.onFinally && this.props.onFinally(err);
      }
    }
  } }, { key: "componentDidUpdate", value: function(t) {
    this.lucky && (this.props.width !== t.width && (this.lucky.width = this.props.width), this.props.height !== t.height && (this.lucky.height = this.props.height), this.props.blocks !== t.blocks && (this.lucky.blocks = this.props.blocks), this.props.prizes !== t.prizes && (this.lucky.prizes = this.props.prizes), this.props.slots !== t.slots && (this.lucky.slots = this.props.slots));
  } }, { key: "initLucky", value: function() {
    var t = this;
    this.lucky = new B({ flag: "WEB", divElement: this.myLucky.current }, i(i({}, this.props), {}, { start: function() {
      var e3;
      t.props.onStart && (e3 = t.props).onStart.apply(e3, arguments);
    }, end: function() {
      var e3;
      t.props.onEnd && (e3 = t.props).onEnd.apply(e3, arguments);
    } }));
  } }, { key: "init", value: function() {
    var t;
    (t = this.lucky).init.apply(t, arguments);
  } }, { key: "play", value: function() {
    var t;
    (t = this.lucky).play.apply(t, arguments);
  } }, { key: "stop", value: function() {
    var t;
    (t = this.lucky).stop.apply(t, arguments);
  } }, { key: "render", value: function() {
    return wn.createElement("div", { ref: this.myLucky });
  } }]), s2;
}();
U.defaultProps = { width: "", height: "", blocks: [], prizes: [], slots: [], defaultStyle: {}, defaultConfig: {} };
export {
  G as LuckyGrid,
  X as LuckyWheel,
  U as SlotMachine
};
/*! Bundled license information:

@lucky-canvas/react/dist/index.esm.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
//# sourceMappingURL=@lucky-canvas_react.js.map
