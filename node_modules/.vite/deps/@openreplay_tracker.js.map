{
  "version": 3,
  "sources": ["../../.pnpm/stackframe@1.3.4/node_modules/stackframe/stackframe.js", "../../.pnpm/error-stack-parser@2.1.4/node_modules/error-stack-parser/error-stack-parser.js", "../../.pnpm/fflate@0.8.2/node_modules/fflate/esm/browser.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/attributeSender.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/conditionsManager.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/featureFlags.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/utils.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/app/messages.gen.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/performance.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/tagWatcher.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/userTesting/styles.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/userTesting/recorder.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/userTesting/dnd.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/userTesting/utils.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/userTesting/SignalManager.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/userTesting/index.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/app/guards.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/app/canvas.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/app/logger.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/app/nodes.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/app/observer/observer.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/app/observer/iframe_observer.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/app/observer/shadow_root_observer.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/app/observer/iframe_offsets.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/app/observer/top_observer.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/app/sanitizer.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/app/session.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/app/ticker.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/app/index.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/connection.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/console.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/exception.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/img.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/input.js", "../../.pnpm/@medv+finder@3.2.0/node_modules/@medv/finder/finder.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/mouse.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/timing.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/scroll.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/viewport.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/constructedStyleSheets.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/cssrules.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/focus.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/fonts.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/axiosSpy.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/Network/networkMessage.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/Network/utils.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/Network/fetchProxy.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/Network/xhrProxy.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/Network/beaconProxy.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/Network/index.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/network.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/selection.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/modules/tabs.js", "../../.pnpm/@openreplay+tracker@14.0.3/node_modules/@openreplay/tracker/lib/index.js"],
  "sourcesContent": ["(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('stackframe', [], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        root.StackFrame = factory();\n    }\n}(this, function() {\n    'use strict';\n    function _isNumber(n) {\n        return !isNaN(parseFloat(n)) && isFinite(n);\n    }\n\n    function _capitalize(str) {\n        return str.charAt(0).toUpperCase() + str.substring(1);\n    }\n\n    function _getter(p) {\n        return function() {\n            return this[p];\n        };\n    }\n\n    var booleanProps = ['isConstructor', 'isEval', 'isNative', 'isToplevel'];\n    var numericProps = ['columnNumber', 'lineNumber'];\n    var stringProps = ['fileName', 'functionName', 'source'];\n    var arrayProps = ['args'];\n    var objectProps = ['evalOrigin'];\n\n    var props = booleanProps.concat(numericProps, stringProps, arrayProps, objectProps);\n\n    function StackFrame(obj) {\n        if (!obj) return;\n        for (var i = 0; i < props.length; i++) {\n            if (obj[props[i]] !== undefined) {\n                this['set' + _capitalize(props[i])](obj[props[i]]);\n            }\n        }\n    }\n\n    StackFrame.prototype = {\n        getArgs: function() {\n            return this.args;\n        },\n        setArgs: function(v) {\n            if (Object.prototype.toString.call(v) !== '[object Array]') {\n                throw new TypeError('Args must be an Array');\n            }\n            this.args = v;\n        },\n\n        getEvalOrigin: function() {\n            return this.evalOrigin;\n        },\n        setEvalOrigin: function(v) {\n            if (v instanceof StackFrame) {\n                this.evalOrigin = v;\n            } else if (v instanceof Object) {\n                this.evalOrigin = new StackFrame(v);\n            } else {\n                throw new TypeError('Eval Origin must be an Object or StackFrame');\n            }\n        },\n\n        toString: function() {\n            var fileName = this.getFileName() || '';\n            var lineNumber = this.getLineNumber() || '';\n            var columnNumber = this.getColumnNumber() || '';\n            var functionName = this.getFunctionName() || '';\n            if (this.getIsEval()) {\n                if (fileName) {\n                    return '[eval] (' + fileName + ':' + lineNumber + ':' + columnNumber + ')';\n                }\n                return '[eval]:' + lineNumber + ':' + columnNumber;\n            }\n            if (functionName) {\n                return functionName + ' (' + fileName + ':' + lineNumber + ':' + columnNumber + ')';\n            }\n            return fileName + ':' + lineNumber + ':' + columnNumber;\n        }\n    };\n\n    StackFrame.fromString = function StackFrame$$fromString(str) {\n        var argsStartIndex = str.indexOf('(');\n        var argsEndIndex = str.lastIndexOf(')');\n\n        var functionName = str.substring(0, argsStartIndex);\n        var args = str.substring(argsStartIndex + 1, argsEndIndex).split(',');\n        var locationString = str.substring(argsEndIndex + 1);\n\n        if (locationString.indexOf('@') === 0) {\n            var parts = /@(.+?)(?::(\\d+))?(?::(\\d+))?$/.exec(locationString, '');\n            var fileName = parts[1];\n            var lineNumber = parts[2];\n            var columnNumber = parts[3];\n        }\n\n        return new StackFrame({\n            functionName: functionName,\n            args: args || undefined,\n            fileName: fileName,\n            lineNumber: lineNumber || undefined,\n            columnNumber: columnNumber || undefined\n        });\n    };\n\n    for (var i = 0; i < booleanProps.length; i++) {\n        StackFrame.prototype['get' + _capitalize(booleanProps[i])] = _getter(booleanProps[i]);\n        StackFrame.prototype['set' + _capitalize(booleanProps[i])] = (function(p) {\n            return function(v) {\n                this[p] = Boolean(v);\n            };\n        })(booleanProps[i]);\n    }\n\n    for (var j = 0; j < numericProps.length; j++) {\n        StackFrame.prototype['get' + _capitalize(numericProps[j])] = _getter(numericProps[j]);\n        StackFrame.prototype['set' + _capitalize(numericProps[j])] = (function(p) {\n            return function(v) {\n                if (!_isNumber(v)) {\n                    throw new TypeError(p + ' must be a Number');\n                }\n                this[p] = Number(v);\n            };\n        })(numericProps[j]);\n    }\n\n    for (var k = 0; k < stringProps.length; k++) {\n        StackFrame.prototype['get' + _capitalize(stringProps[k])] = _getter(stringProps[k]);\n        StackFrame.prototype['set' + _capitalize(stringProps[k])] = (function(p) {\n            return function(v) {\n                this[p] = String(v);\n            };\n        })(stringProps[k]);\n    }\n\n    return StackFrame;\n}));\n", "(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('error-stack-parser', ['stackframe'], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('stackframe'));\n    } else {\n        root.ErrorStackParser = factory(root.StackFrame);\n    }\n}(this, function ErrorStackParser(StackFrame) {\n    'use strict';\n\n    var FIREFOX_SAFARI_STACK_REGEXP = /(^|@)\\S+:\\d+/;\n    var CHROME_IE_STACK_REGEXP = /^\\s*at .*(\\S+:\\d+|\\(native\\))/m;\n    var SAFARI_NATIVE_CODE_REGEXP = /^(eval@)?(\\[native code])?$/;\n\n    return {\n        /**\n         * Given an Error object, extract the most information from it.\n         *\n         * @param {Error} error object\n         * @return {Array} of StackFrames\n         */\n        parse: function ErrorStackParser$$parse(error) {\n            if (typeof error.stacktrace !== 'undefined' || typeof error['opera#sourceloc'] !== 'undefined') {\n                return this.parseOpera(error);\n            } else if (error.stack && error.stack.match(CHROME_IE_STACK_REGEXP)) {\n                return this.parseV8OrIE(error);\n            } else if (error.stack) {\n                return this.parseFFOrSafari(error);\n            } else {\n                throw new Error('Cannot parse given Error object');\n            }\n        },\n\n        // Separate line and column numbers from a string of the form: (URI:Line:Column)\n        extractLocation: function ErrorStackParser$$extractLocation(urlLike) {\n            // Fail-fast but return locations like \"(native)\"\n            if (urlLike.indexOf(':') === -1) {\n                return [urlLike];\n            }\n\n            var regExp = /(.+?)(?::(\\d+))?(?::(\\d+))?$/;\n            var parts = regExp.exec(urlLike.replace(/[()]/g, ''));\n            return [parts[1], parts[2] || undefined, parts[3] || undefined];\n        },\n\n        parseV8OrIE: function ErrorStackParser$$parseV8OrIE(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !!line.match(CHROME_IE_STACK_REGEXP);\n            }, this);\n\n            return filtered.map(function(line) {\n                if (line.indexOf('(eval ') > -1) {\n                    // Throw away eval information until we implement stacktrace.js/stackframe#8\n                    line = line.replace(/eval code/g, 'eval').replace(/(\\(eval at [^()]*)|(,.*$)/g, '');\n                }\n                var sanitizedLine = line.replace(/^\\s+/, '').replace(/\\(eval code/g, '(').replace(/^.*?\\s+/, '');\n\n                // capture and preseve the parenthesized location \"(/foo/my bar.js:12:87)\" in\n                // case it has spaces in it, as the string is split on \\s+ later on\n                var location = sanitizedLine.match(/ (\\(.+\\)$)/);\n\n                // remove the parenthesized location from the line, if it was matched\n                sanitizedLine = location ? sanitizedLine.replace(location[0], '') : sanitizedLine;\n\n                // if a location was matched, pass it to extractLocation() otherwise pass all sanitizedLine\n                // because this line doesn't have function name\n                var locationParts = this.extractLocation(location ? location[1] : sanitizedLine);\n                var functionName = location && sanitizedLine || undefined;\n                var fileName = ['eval', '<anonymous>'].indexOf(locationParts[0]) > -1 ? undefined : locationParts[0];\n\n                return new StackFrame({\n                    functionName: functionName,\n                    fileName: fileName,\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                    source: line\n                });\n            }, this);\n        },\n\n        parseFFOrSafari: function ErrorStackParser$$parseFFOrSafari(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !line.match(SAFARI_NATIVE_CODE_REGEXP);\n            }, this);\n\n            return filtered.map(function(line) {\n                // Throw away eval information until we implement stacktrace.js/stackframe#8\n                if (line.indexOf(' > eval') > -1) {\n                    line = line.replace(/ line (\\d+)(?: > eval line \\d+)* > eval:\\d+:\\d+/g, ':$1');\n                }\n\n                if (line.indexOf('@') === -1 && line.indexOf(':') === -1) {\n                    // Safari eval frames only have function names and nothing else\n                    return new StackFrame({\n                        functionName: line\n                    });\n                } else {\n                    var functionNameRegex = /((.*\".+\"[^@]*)?[^@]*)(?:@)/;\n                    var matches = line.match(functionNameRegex);\n                    var functionName = matches && matches[1] ? matches[1] : undefined;\n                    var locationParts = this.extractLocation(line.replace(functionNameRegex, ''));\n\n                    return new StackFrame({\n                        functionName: functionName,\n                        fileName: locationParts[0],\n                        lineNumber: locationParts[1],\n                        columnNumber: locationParts[2],\n                        source: line\n                    });\n                }\n            }, this);\n        },\n\n        parseOpera: function ErrorStackParser$$parseOpera(e) {\n            if (!e.stacktrace || (e.message.indexOf('\\n') > -1 &&\n                e.message.split('\\n').length > e.stacktrace.split('\\n').length)) {\n                return this.parseOpera9(e);\n            } else if (!e.stack) {\n                return this.parseOpera10(e);\n            } else {\n                return this.parseOpera11(e);\n            }\n        },\n\n        parseOpera9: function ErrorStackParser$$parseOpera9(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)/i;\n            var lines = e.message.split('\\n');\n            var result = [];\n\n            for (var i = 2, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(new StackFrame({\n                        fileName: match[2],\n                        lineNumber: match[1],\n                        source: lines[i]\n                    }));\n                }\n            }\n\n            return result;\n        },\n\n        parseOpera10: function ErrorStackParser$$parseOpera10(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;\n            var lines = e.stacktrace.split('\\n');\n            var result = [];\n\n            for (var i = 0, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(\n                        new StackFrame({\n                            functionName: match[3] || undefined,\n                            fileName: match[2],\n                            lineNumber: match[1],\n                            source: lines[i]\n                        })\n                    );\n                }\n            }\n\n            return result;\n        },\n\n        // Opera 10.65+ Error.stack very similar to FF/Safari\n        parseOpera11: function ErrorStackParser$$parseOpera11(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !!line.match(FIREFOX_SAFARI_STACK_REGEXP) && !line.match(/^Error created at/);\n            }, this);\n\n            return filtered.map(function(line) {\n                var tokens = line.split('@');\n                var locationParts = this.extractLocation(tokens.pop());\n                var functionCall = (tokens.shift() || '');\n                var functionName = functionCall\n                    .replace(/<anonymous function(: (\\w+))?>/, '$2')\n                    .replace(/\\([^)]*\\)/g, '') || undefined;\n                var argsRaw;\n                if (functionCall.match(/\\(([^)]*)\\)/)) {\n                    argsRaw = functionCall.replace(/^[^(]+\\(([^)]*)\\)$/, '$1');\n                }\n                var args = (argsRaw === undefined || argsRaw === '[arguments not available]') ?\n                    undefined : argsRaw.split(',');\n\n                return new StackFrame({\n                    functionName: functionName,\n                    args: args,\n                    fileName: locationParts[0],\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                    source: line\n                });\n            }, this);\n        }\n    };\n}));\n", "// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Some of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// However, the vast majority of the codebase has diverged from UZIP.js to increase performance and reduce bundle size.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\nvar wk = (function (c, id, msg, transfer, cb) {\n    var w = new Worker(ch2[id] || (ch2[id] = URL.createObjectURL(new Blob([\n        c + ';addEventListener(\"error\",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'\n    ], { type: 'text/javascript' }))));\n    w.onmessage = function (e) {\n        var d = e.data, ed = d.$e$;\n        if (ed) {\n            var err = new Error(ed[0]);\n            err['code'] = ed[1];\n            err.stack = ed[2];\n            cb(err, null);\n        }\n        else\n            cb(null, d);\n    };\n    w.postMessage(msg, transfer);\n    return w;\n});\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, i32 = Int32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new i32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return { b: b, r: r };\n};\nvar _a = freb(fleb, 2), fl = _a.b, revfl = _a.r;\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b.b, revfd = _b.r;\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >> 8) | ((x & 0x00FF) << 8)) >> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i) {\n        if (cd[i])\n            ++l[cd[i] - 1];\n    }\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 1; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i) {\n            if (cd[i]) {\n                co[i] = rev[le[cd[i] - 1]++] >> (15 - cd[i]);\n            }\n        }\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8)) >> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p + 7) / 8) | 0; };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    return new u8(v.subarray(s, e));\n};\n/**\n * Codes for errors generated within this library\n */\nexport var FlateErrorCode = {\n    UnexpectedEOF: 0,\n    InvalidBlockType: 1,\n    InvalidLengthLiteral: 2,\n    InvalidDistance: 3,\n    StreamFinished: 4,\n    NoStreamHandler: 5,\n    InvalidHeader: 6,\n    NoCallback: 7,\n    InvalidUTF8: 8,\n    ExtraFieldTooLong: 9,\n    InvalidDate: 10,\n    FilenameTooLong: 11,\n    StreamFinishing: 12,\n    InvalidZipData: 13,\n    UnknownCompressionMethod: 14\n};\n// error codes\nvar ec = [\n    'unexpected EOF',\n    'invalid block type',\n    'invalid length/literal',\n    'invalid distance',\n    'stream finished',\n    'no stream handler',\n    ,\n    'no callback',\n    'invalid UTF-8 data',\n    'extra field too long',\n    'date not in range 1980-2099',\n    'filename too long',\n    'stream finishing',\n    'invalid zip data'\n    // determined by unknown compression method\n];\n;\nvar err = function (ind, msg, nt) {\n    var e = new Error(msg || ec[ind]);\n    e.code = ind;\n    if (Error.captureStackTrace)\n        Error.captureStackTrace(e, err);\n    if (!nt)\n        throw e;\n    return e;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, st, buf, dict) {\n    // source length       dict length\n    var sl = dat.length, dl = dict ? dict.length : 0;\n    if (!sl || st.f && !st.l)\n        return buf || new u8(0);\n    var noBuf = !buf;\n    // have to estimate size\n    var resize = noBuf || st.i != 2;\n    // no state\n    var noSt = st.i;\n    // Assumes roughly 33% compression ratio average\n    if (noBuf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                // ensure size\n                if (resize)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8, st.f = final;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                err(1);\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17\n        if (resize)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var lpos = pos;\n        for (;; lpos = pos) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >> 4;\n            pos += c & 15;\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n            if (!c)\n                err(2);\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lpos = pos, lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >> 4;\n                if (!d)\n                    err(3);\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & (1 << b) - 1, pos += b;\n                }\n                if (pos > tbts) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                if (resize)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                if (bt < dt) {\n                    var shift = dl - dt, dend = Math.min(dt, end);\n                    if (shift + bt < 0)\n                        err(3);\n                    for (; bt < dend; ++bt)\n                        buf[bt] = dict[shift + bt];\n                }\n                for (; bt < end; ++bt)\n                    buf[bt] = buf[bt - dt];\n            }\n        }\n        st.l = lm, st.p = lpos, st.b = bt, st.f = final;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    // don't reallocate for streams or user buffers\n    return bt != buf.length && noBuf ? slc(buf, 0, bt) : buf.subarray(0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >> 8;\n    d[o + 2] |= v >> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return { t: et, l: 0 };\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return { t: v, l: 1 };\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return { t: new u8(tr), l: mbt };\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return { c: cl.subarray(0, cli), n: s };\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a.t, mlb = _a.l;\n    var _b = hTree(df, 15), ddt = _b.t, mdb = _b.l;\n    var _c = lc(dlt), lclt = _c.c, nlc = _c.n;\n    var _d = lc(ddt), lcdt = _d.c, ndc = _d.n;\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        ++lcfreq[lclt[i] & 31];\n    for (var i = 0; i < lcdt.length; ++i)\n        ++lcfreq[lcdt[i] & 31];\n    var _e = hTree(lcfreq, 7), lct = _e.t, mlcb = _e.l;\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + 2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18];\n    if (bs >= 0 && flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >> 5) & 127), p += clct[i] >> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        var sym = syms[i];\n        if (sym > 255) {\n            var len = (sym >> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (sym >> 23) & 31), p += fleb[len];\n            var dst = sym & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (sym >> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[sym]), p += ll[sym];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new i32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, st) {\n    var s = st.z || dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var lst = st.l;\n    var pos = (st.r || 0) & 7;\n    if (lvl) {\n        if (pos)\n            w[0] = st.r >> 3;\n        var opt = deo[lvl - 1];\n        var n = opt >> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = st.p || new u16(32768), head = st.h || new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new i32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index          l/lind  waitdx          blkpos\n        var lc_1 = 0, eb = 0, i = st.i || 0, li = 0, wi = st.w || 0, bs = 0;\n        for (; i + 2 < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768    previous index mod\n            var imod = i & 32767, pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && (rem > 423 || !lst)) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = imod - pimod & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = i - dif + j & 32767;\n                                    var pti = prev[ti];\n                                    var cd = ti - pti & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += imod - pimod & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one int32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        for (i = Math.max(i, wi); i < s; ++i) {\n            syms[li++] = dat[i];\n            ++lf[dat[i]];\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        if (!lst) {\n            st.r = (pos & 7) | w[(pos / 8) | 0] << 3;\n            // shft(pos) now 1 less if pos & 7 != 0\n            pos -= 7;\n            st.h = head, st.p = prev, st.i = i, st.w = wi;\n        }\n    }\n    else {\n        for (var i = st.w || 0; i < s + lst; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e >= s) {\n                // write final block\n                w[(pos / 8) | 0] = lst;\n                e = s;\n            }\n            pos = wfblk(w, pos + 1, dat.subarray(i, e));\n        }\n        st.i = s;\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/ (function () {\n    var t = new Int32Array(256);\n    for (var i = 0; i < 256; ++i) {\n        var c = i, k = 9;\n        while (--k)\n            c = ((c & 1) && -306674912) ^ (c >>> 1);\n        t[i] = c;\n    }\n    return t;\n})();\n// CRC32\nvar crc = function () {\n    var c = -1;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var cr = c;\n            for (var i = 0; i < d.length; ++i)\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\n            c = cr;\n        },\n        d: function () { return ~c; }\n    };\n};\n// Adler32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length | 0;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 2655, l);\n                for (; i < e; ++i)\n                    m += n += d[i];\n                n = (n & 65535) + 15 * (n >> 16), m = (m & 65535) + 15 * (m >> 16);\n            }\n            a = n, b = m;\n        },\n        d: function () {\n            a %= 65521, b %= 65521;\n            return (a & 255) << 24 | (a & 0xFF00) << 8 | (b & 255) << 8 | (b >> 8);\n        }\n    };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    if (!st) {\n        st = { l: 1 };\n        if (opt.dictionary) {\n            var dict = opt.dictionary.subarray(-32768);\n            var newDat = new u8(dict.length + dat.length);\n            newDat.set(dict);\n            newDat.set(dat, dict.length);\n            dat = newDat;\n            st.w = dict.length;\n        }\n    }\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? (st.l ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : 20) : (12 + opt.mem), pre, post, st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n    var o = {};\n    for (var k in a)\n        o[k] = a[k];\n    for (var k in b)\n        o[k] = b[k];\n    return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n    var dt = fn();\n    var st = fn.toString();\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/\\s+/g, '').split(',');\n    for (var i = 0; i < dt.length; ++i) {\n        var v = dt[i], k = ks[i];\n        if (typeof v == 'function') {\n            fnStr += ';' + k + '=';\n            var st_1 = v.toString();\n            if (v.prototype) {\n                // for global objects\n                if (st_1.indexOf('[native code]') != -1) {\n                    var spInd = st_1.indexOf(' ', 8) + 1;\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n                }\n                else {\n                    fnStr += st_1;\n                    for (var t in v.prototype)\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n                }\n            }\n            else\n                fnStr += st_1;\n        }\n        else\n            td[k] = v;\n    }\n    return fnStr;\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n    var tl = [];\n    for (var k in v) {\n        if (v[k].buffer) {\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n        }\n    }\n    return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n    if (!ch[id]) {\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\n        for (var i = 0; i < m; ++i)\n            fnStr = wcln(fns[i], fnStr, td_1);\n        ch[id] = { c: wcln(fns[m], fnStr, td_1), e: td_1 };\n    }\n    var td = mrg({}, ch[id].e);\n    return wk(ch[id].c + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () { return [u8, u16, i32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, ec, hMap, max, bits, bits16, shft, slc, err, inflt, inflateSync, pbf, gopt]; };\nvar bDflt = function () { return [u8, u16, i32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\n// gzip extra\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\n// gunzip extra\nvar guze = function () { return [gzs, gzl]; };\n// zlib extra\nvar zle = function () { return [zlh, wbytes, adler]; };\n// unzlib extra\nvar zule = function () { return [zls]; };\n// post buf\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\n// get opts\nvar gopt = function (o) { return o && {\n    out: o.size && new u8(o.size),\n    dictionary: o.dictionary\n}; };\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n    var w = wrkr(fns, init, id, function (err, dat) {\n        w.terminate();\n        cb(err, dat);\n    });\n    w.postMessage([dat, opts], opts.consume ? [dat.buffer] : []);\n    return function () { w.terminate(); };\n};\n// auto stream\nvar astrm = function (strm) {\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\n    return function (ev) {\n        if (ev.data.length) {\n            strm.push(ev.data[0], ev.data[1]);\n            postMessage([ev.data[0].length]);\n        }\n        else\n            strm.flush();\n    };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id, flush, ext) {\n    var t;\n    var w = wrkr(fns, init, id, function (err, dat) {\n        if (err)\n            w.terminate(), strm.ondata.call(strm, err);\n        else if (!Array.isArray(dat))\n            ext(dat);\n        else if (dat.length == 1) {\n            strm.queuedSize -= dat[0];\n            if (strm.ondrain)\n                strm.ondrain(dat[0]);\n        }\n        else {\n            if (dat[1])\n                w.terminate();\n            strm.ondata.call(strm, err, dat[0], dat[1]);\n        }\n    });\n    w.postMessage(opts);\n    strm.queuedSize = 0;\n    strm.push = function (d, f) {\n        if (!strm.ondata)\n            err(5);\n        if (t)\n            strm.ondata(err(4, 0, 1), null, !!f);\n        strm.queuedSize += d.length;\n        w.postMessage([d, t = f], [d.buffer]);\n    };\n    strm.terminate = function () { w.terminate(); };\n    if (flush) {\n        strm.flush = function () { w.postMessage([]); };\n    }\n};\n// read 2 bytes\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\n// read 4 bytes\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16) | (d[b + 3] << 24)) >>> 0; };\nvar b8 = function (d, b) { return b4(d, b) + (b4(d, b + 4) * 4294967296); };\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n    var fn = o.filename;\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n    if (o.mtime != 0)\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n    if (fn) {\n        c[3] = 8;\n        for (var i = 0; i <= fn.length; ++i)\n            c[i + 10] = fn.charCodeAt(i);\n    }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n        err(6, 'invalid gzip data');\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n        st += (d[10] | d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n        ;\n    return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n    var l = d.length;\n    return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16 | d[l - 1] << 24) >>> 0;\n};\n// gzip header length\nvar gzhl = function (o) { return 10 + (o.filename ? o.filename.length + 1 : 0); };\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (o.dictionary && 32);\n    c[1] |= 31 - ((c[0] << 8) | c[1]) % 31;\n    if (o.dictionary) {\n        var h = adler();\n        h.p(o.dictionary);\n        wbytes(c, 2, h.d());\n    }\n};\n// zlib start\nvar zls = function (d, dict) {\n    if ((d[0] & 15) != 8 || (d[0] >> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        err(6, 'invalid zlib data');\n    if ((d[1] >> 5 & 1) == +!dict)\n        err(6, 'invalid zlib data: ' + (d[1] & 32 ? 'need' : 'unexpected') + ' dictionary');\n    return (d[1] >> 3 & 4) + 2;\n};\nfunction StrmOpt(opts, cb) {\n    if (typeof opts == 'function')\n        cb = opts, opts = {};\n    this.ondata = cb;\n    return opts;\n}\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/ (function () {\n    function Deflate(opts, cb) {\n        if (typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        this.o = opts || {};\n        this.s = { l: 0, i: 32768, w: 32768, z: 32768 };\n        // Buffer length must always be 0 mod 32768 for index calculations to be correct when modifying head and prev\n        // 98304 = 32768 (lookback) + 65536 (common chunk size)\n        this.b = new u8(98304);\n        if (this.o.dictionary) {\n            var dict = this.o.dictionary.subarray(-32768);\n            this.b.set(dict, 32768 - dict.length);\n            this.s.i = 32768 - dict.length;\n        }\n    }\n    Deflate.prototype.p = function (c, f) {\n        this.ondata(dopt(c, this.o, 0, 0, this.s), f);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Deflate.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.s.l)\n            err(4);\n        var endLen = chunk.length + this.s.z;\n        if (endLen > this.b.length) {\n            if (endLen > 2 * this.b.length - 32768) {\n                var newBuf = new u8(endLen & -32768);\n                newBuf.set(this.b.subarray(0, this.s.z));\n                this.b = newBuf;\n            }\n            var split = this.b.length - this.s.z;\n            this.b.set(chunk.subarray(0, split), this.s.z);\n            this.s.z = this.b.length;\n            this.p(this.b, false);\n            this.b.set(this.b.subarray(-32768));\n            this.b.set(chunk.subarray(split), 32768);\n            this.s.z = chunk.length - split + 32768;\n            this.s.i = 32766, this.s.w = 32768;\n        }\n        else {\n            this.b.set(chunk, this.s.z);\n            this.s.z += chunk.length;\n        }\n        this.s.l = final & 1;\n        if (this.s.z > this.s.w + 8191 || final) {\n            this.p(this.b, final || false);\n            this.s.w = this.s.i, this.s.i -= 2;\n        }\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * deflated output for small inputs.\n     */\n    Deflate.prototype.flush = function () {\n        if (!this.ondata)\n            err(5);\n        if (this.s.l)\n            err(4);\n        this.p(this.b, false);\n        this.s.w = this.s.i, this.s.i -= 2;\n    };\n    return Deflate;\n}());\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/ (function () {\n    function AsyncDeflate(opts, cb) {\n        astrmify([\n            bDflt,\n            function () { return [astrm, Deflate]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Deflate(ev.data);\n            onmessage = astrm(strm);\n        }, 6, 1);\n    }\n    return AsyncDeflate;\n}());\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nexport function deflateSync(data, opts) {\n    return dopt(data, opts || {}, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/ (function () {\n    function Inflate(opts, cb) {\n        // no StrmOpt here to avoid adding to workerizer\n        if (typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        var dict = opts && opts.dictionary && opts.dictionary.subarray(-32768);\n        this.s = { i: 0, b: dict ? dict.length : 0 };\n        this.o = new u8(32768);\n        this.p = new u8(0);\n        if (dict)\n            this.o.set(dict);\n    }\n    Inflate.prototype.e = function (c) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        if (!this.p.length)\n            this.p = c;\n        else if (c.length) {\n            var n = new u8(this.p.length + c.length);\n            n.set(this.p), n.set(c, this.p.length), this.p = n;\n        }\n    };\n    Inflate.prototype.c = function (final) {\n        this.s.i = +(this.d = final || false);\n        var bts = this.s.b;\n        var dt = inflt(this.p, this.s, this.o);\n        this.ondata(slc(dt, bts, this.s.b), this.d);\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n        this.p = slc(this.p, (this.s.p / 8) | 0), this.s.p &= 7;\n    };\n    /**\n     * Pushes a chunk to be inflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the final chunk\n     */\n    Inflate.prototype.push = function (chunk, final) {\n        this.e(chunk), this.c(final);\n    };\n    return Inflate;\n}());\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/ (function () {\n    function AsyncInflate(opts, cb) {\n        astrmify([\n            bInflt,\n            function () { return [astrm, Inflate]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Inflate(ev.data);\n            onmessage = astrm(strm);\n        }, 7, 0);\n    }\n    return AsyncInflate;\n}());\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gopt(ev.data[1]))); }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function inflateSync(data, opts) {\n    return inflt(data, { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/ (function () {\n    function Gzip(opts, cb) {\n        this.c = crc();\n        this.l = 0;\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gzip.prototype.push = function (chunk, final) {\n        this.c.p(chunk);\n        this.l += chunk.length;\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Gzip.prototype.p = function (c, f) {\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, this.s);\n        if (this.v)\n            gzh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n        this.ondata(raw, f);\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * GZIPped output for small inputs.\n     */\n    Gzip.prototype.flush = function () {\n        Deflate.prototype.flush.call(this);\n    };\n    return Gzip;\n}());\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/ (function () {\n    function AsyncGzip(opts, cb) {\n        astrmify([\n            bDflt,\n            gze,\n            function () { return [astrm, Deflate, Gzip]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Gzip(ev.data);\n            onmessage = astrm(strm);\n        }, 8, 1);\n    }\n    return AsyncGzip;\n}());\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        gze,\n        function () { return [gzipSync]; }\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nexport function gzipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var c = crc(), l = data.length;\n    c.p(data);\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming single or multi-member GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/ (function () {\n    function Gunzip(opts, cb) {\n        this.v = 1;\n        this.r = 0;\n        Inflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GUNZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gunzip.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        this.r += chunk.length;\n        if (this.v) {\n            var p = this.p.subarray(this.v - 1);\n            var s = p.length > 3 ? gzs(p) : 4;\n            if (s > p.length) {\n                if (!final)\n                    return;\n            }\n            else if (this.v > 1 && this.onmember) {\n                this.onmember(this.r - p.length);\n            }\n            this.p = p.subarray(s), this.v = 0;\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n        // process concatenated GZIP\n        if (this.s.f && !this.s.l && !final) {\n            this.v = shft(this.s.p) + 9;\n            this.s = { i: 0 };\n            this.o = new u8(0);\n            this.push(new u8(0), final);\n        }\n    };\n    return Gunzip;\n}());\nexport { Gunzip };\n/**\n * Asynchronous streaming single or multi-member GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/ (function () {\n    function AsyncGunzip(opts, cb) {\n        var _this = this;\n        astrmify([\n            bInflt,\n            guze,\n            function () { return [astrm, Inflate, Gunzip]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Gunzip(ev.data);\n            strm.onmember = function (offset) { return postMessage(offset); };\n            onmessage = astrm(strm);\n        }, 9, 0, function (offset) { return _this.onmember && _this.onmember(offset); });\n    }\n    return AsyncGunzip;\n}());\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        guze,\n        function () { return [gunzipSync]; }\n    ], function (ev) { return pbf(gunzipSync(ev.data[0], ev.data[1])); }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function gunzipSync(data, opts) {\n    var st = gzs(data);\n    if (st + 8 > data.length)\n        err(6, 'invalid gzip data');\n    return inflt(data.subarray(st, -8), { i: 2 }, opts && opts.out || new u8(gzl(data)), opts && opts.dictionary);\n}\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/ (function () {\n    function Zlib(opts, cb) {\n        this.c = adler();\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be zlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Zlib.prototype.push = function (chunk, final) {\n        this.c.p(chunk);\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Zlib.prototype.p = function (c, f) {\n        var raw = dopt(c, this.o, this.v && (this.o.dictionary ? 6 : 2), f && 4, this.s);\n        if (this.v)\n            zlh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 4, this.c.d());\n        this.ondata(raw, f);\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * zlibbed output for small inputs.\n     */\n    Zlib.prototype.flush = function () {\n        Deflate.prototype.flush.call(this);\n    };\n    return Zlib;\n}());\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/ (function () {\n    function AsyncZlib(opts, cb) {\n        astrmify([\n            bDflt,\n            zle,\n            function () { return [astrm, Deflate, Zlib]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Zlib(ev.data);\n            onmessage = astrm(strm);\n        }, 10, 1);\n    }\n    return AsyncZlib;\n}());\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        zle,\n        function () { return [zlibSync]; }\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nexport function zlibSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, opts.dictionary ? 6 : 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/ (function () {\n    function Unzlib(opts, cb) {\n        Inflate.call(this, opts, cb);\n        this.v = opts && opts.dictionary ? 2 : 1;\n    }\n    /**\n     * Pushes a chunk to be unzlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzlib.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            if (this.p.length < 6 && !final)\n                return;\n            this.p = this.p.subarray(zls(this.p, this.v - 1)), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 4)\n                err(6, 'invalid zlib data');\n            this.p = this.p.subarray(0, -4);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Unzlib;\n}());\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\n    function AsyncUnzlib(opts, cb) {\n        astrmify([\n            bInflt,\n            zule,\n            function () { return [astrm, Inflate, Unzlib]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Unzlib(ev.data);\n            onmessage = astrm(strm);\n        }, 11, 0);\n    }\n    return AsyncUnzlib;\n}());\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        zule,\n        function () { return [unzlibSync]; }\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gopt(ev.data[1]))); }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function unzlibSync(data, opts) {\n    return inflt(data.subarray(zls(data, opts && opts.dictionary), -4), { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzip as compress, AsyncGzip as AsyncCompress };\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/ (function () {\n    function Decompress(opts, cb) {\n        this.o = StrmOpt.call(this, opts, cb) || {};\n        this.G = Gunzip;\n        this.I = Inflate;\n        this.Z = Unzlib;\n    }\n    // init substream\n    // overriden by AsyncDecompress\n    Decompress.prototype.i = function () {\n        var _this = this;\n        this.s.ondata = function (dat, final) {\n            _this.ondata(dat, final);\n        };\n    };\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Decompress.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (!this.s) {\n            if (this.p && this.p.length) {\n                var n = new u8(this.p.length + chunk.length);\n                n.set(this.p), n.set(chunk, this.p.length);\n            }\n            else\n                this.p = chunk;\n            if (this.p.length > 2) {\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\n                    ? new this.G(this.o)\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\n                        ? new this.I(this.o)\n                        : new this.Z(this.o);\n                this.i();\n                this.s.push(this.p, final);\n                this.p = null;\n            }\n        }\n        else\n            this.s.push(chunk, final);\n    };\n    return Decompress;\n}());\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/ (function () {\n    function AsyncDecompress(opts, cb) {\n        Decompress.call(this, opts, cb);\n        this.queuedSize = 0;\n        this.G = AsyncGunzip;\n        this.I = AsyncInflate;\n        this.Z = AsyncUnzlib;\n    }\n    AsyncDecompress.prototype.i = function () {\n        var _this = this;\n        this.s.ondata = function (err, dat, final) {\n            _this.ondata(err, dat, final);\n        };\n        this.s.ondrain = function (size) {\n            _this.queuedSize -= size;\n            if (_this.ondrain)\n                _this.ondrain(size);\n        };\n    };\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncDecompress.prototype.push = function (chunk, final) {\n        this.queuedSize += chunk.length;\n        Decompress.prototype.push.call(this, chunk, final);\n    };\n    return AsyncDecompress;\n}());\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzip(data, opts, cb)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflate(data, opts, cb)\n            : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function decompressSync(data, opts) {\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzipSync(data, opts)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflateSync(data, opts)\n            : unzlibSync(data, opts);\n}\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n    for (var k in d) {\n        var val = d[k], n = p + k, op = o;\n        if (Array.isArray(val))\n            op = mrg(o, val[1]), val = val[0];\n        if (val instanceof u8)\n            t[n] = [val, op];\n        else {\n            t[n += '/'] = [new u8(0), op];\n            fltn(val, n, t, o);\n        }\n    }\n};\n// text encoder\nvar te = typeof TextEncoder != 'undefined' && /*#__PURE__*/ new TextEncoder();\n// text decoder\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/ new TextDecoder();\n// text decoder stream\nvar tds = 0;\ntry {\n    td.decode(et, { stream: true });\n    tds = 1;\n}\ncatch (e) { }\n// decode UTF8\nvar dutf8 = function (d) {\n    for (var r = '', i = 0;;) {\n        var c = d[i++];\n        var eb = (c > 127) + (c > 223) + (c > 239);\n        if (i + eb > d.length)\n            return { s: r, r: slc(d, i - 1) };\n        if (!eb)\n            r += String.fromCharCode(c);\n        else if (eb == 3) {\n            c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n        }\n        else if (eb & 1)\n            r += String.fromCharCode((c & 31) << 6 | (d[i++] & 63));\n        else\n            r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63));\n    }\n};\n/**\n * Streaming UTF-8 decoding\n */\nvar DecodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is decoded\n     */\n    function DecodeUTF8(cb) {\n        this.ondata = cb;\n        if (tds)\n            this.t = new TextDecoder();\n        else\n            this.p = et;\n    }\n    /**\n     * Pushes a chunk to be decoded from UTF-8 binary\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    DecodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        final = !!final;\n        if (this.t) {\n            this.ondata(this.t.decode(chunk, { stream: true }), final);\n            if (final) {\n                if (this.t.decode().length)\n                    err(8);\n                this.t = null;\n            }\n            return;\n        }\n        if (!this.p)\n            err(4);\n        var dat = new u8(this.p.length + chunk.length);\n        dat.set(this.p);\n        dat.set(chunk, this.p.length);\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\n        if (final) {\n            if (r.length)\n                err(8);\n            this.p = null;\n        }\n        else\n            this.p = r;\n        this.ondata(s, final);\n    };\n    return DecodeUTF8;\n}());\nexport { DecodeUTF8 };\n/**\n * Streaming UTF-8 encoding\n */\nvar EncodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is encoded\n     */\n    function EncodeUTF8(cb) {\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be encoded to UTF-8\n     * @param chunk The string data to push\n     * @param final Whether this is the last chunk\n     */\n    EncodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        this.ondata(strToU8(chunk), this.d = final || false);\n    };\n    return EncodeUTF8;\n}());\nexport { EncodeUTF8 };\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nexport function strToU8(str, latin1) {\n    if (latin1) {\n        var ar_1 = new u8(str.length);\n        for (var i = 0; i < str.length; ++i)\n            ar_1[i] = str.charCodeAt(i);\n        return ar_1;\n    }\n    if (te)\n        return te.encode(str);\n    var l = str.length;\n    var ar = new u8(str.length + (str.length >> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >> 18)), w(128 | ((c >> 12) & 63)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >> 12)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nexport function strFromU8(dat, latin1) {\n    if (latin1) {\n        var r = '';\n        for (var i = 0; i < dat.length; i += 16384)\n            r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));\n        return r;\n    }\n    else if (td) {\n        return td.decode(dat);\n    }\n    else {\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\n        if (r.length)\n            err(8);\n        return s;\n    }\n}\n;\n// deflate bit flag\nvar dbf = function (l) { return l == 1 ? 3 : l < 6 ? 2 : l == 9 ? 1 : 0; };\n// skip local zip header\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\n// read zip header\nvar zh = function (d, b, z) {\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl, bs = b4(d, b + 20);\n    var _a = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\n        ;\n    return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];\n};\n// extra field length\nvar exfl = function (ex) {\n    var le = 0;\n    if (ex) {\n        for (var k in ex) {\n            var l = ex[k].length;\n            if (l > 65535)\n                err(9);\n            le += l + 4;\n        }\n    }\n    return le;\n};\n// write zip header\nvar wzh = function (d, b, f, fn, u, c, ce, co) {\n    var fl = fn.length, ex = f.extra, col = co && co.length;\n    var exl = exfl(ex);\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n    if (ce != null)\n        d[b++] = 20, d[b++] = f.os;\n    d[b] = 20, b += 2; // spec compliance? what's that?\n    d[b++] = (f.flag << 1) | (c < 0 && 8), d[b++] = u && 8;\n    d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\n    var dt = new Date(f.mtime == null ? Date.now() : f.mtime), y = dt.getFullYear() - 1980;\n    if (y < 0 || y > 119)\n        err(10);\n    wbytes(d, b, (y << 25) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >> 1)), b += 4;\n    if (c != -1) {\n        wbytes(d, b, f.crc);\n        wbytes(d, b + 4, c < 0 ? -c - 2 : c);\n        wbytes(d, b + 8, f.size);\n    }\n    wbytes(d, b + 12, fl);\n    wbytes(d, b + 14, exl), b += 16;\n    if (ce != null) {\n        wbytes(d, b, col);\n        wbytes(d, b + 6, f.attrs);\n        wbytes(d, b + 10, ce), b += 14;\n    }\n    d.set(fn, b);\n    b += fl;\n    if (exl) {\n        for (var k in ex) {\n            var exf = ex[k], l = exf.length;\n            wbytes(d, b, +k);\n            wbytes(d, b + 2, l);\n            d.set(exf, b + 4), b += 4 + l;\n        }\n    }\n    if (col)\n        d.set(co, b), b += col;\n    return b;\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n    wbytes(o, b, 0x6054B50); // skip disk\n    wbytes(o, b + 8, c);\n    wbytes(o, b + 10, c);\n    wbytes(o, b + 12, d);\n    wbytes(o, b + 16, e);\n};\n/**\n * A pass-through stream to keep data uncompressed in a ZIP archive.\n */\nvar ZipPassThrough = /*#__PURE__*/ (function () {\n    /**\n     * Creates a pass-through stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     */\n    function ZipPassThrough(filename) {\n        this.filename = filename;\n        this.c = crc();\n        this.size = 0;\n        this.compression = 0;\n    }\n    /**\n     * Processes a chunk and pushes to the output stream. You can override this\n     * method in a subclass for custom behavior, but by default this passes\n     * the data through. You must call this.ondata(err, chunk, final) at some\n     * point in this method.\n     * @param chunk The chunk to process\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.process = function (chunk, final) {\n        this.ondata(null, chunk, final);\n    };\n    /**\n     * Pushes a chunk to be added. If you are subclassing this with a custom\n     * compression algorithm, note that you must push data from the source\n     * file only, pre-compression.\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        this.c.p(chunk);\n        this.size += chunk.length;\n        if (final)\n            this.crc = this.c.d();\n        this.process(chunk, final || false);\n    };\n    return ZipPassThrough;\n}());\nexport { ZipPassThrough };\n// I don't extend because TypeScript extension adds 1kB of runtime bloat\n/**\n * Streaming DEFLATE compression for ZIP archives. Prefer using AsyncZipDeflate\n * for better performance\n */\nvar ZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function ZipDeflate(filename, opts) {\n        var _this = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new Deflate(opts, function (dat, final) {\n            _this.ondata(null, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n    }\n    ZipDeflate.prototype.process = function (chunk, final) {\n        try {\n            this.d.push(chunk, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return ZipDeflate;\n}());\nexport { ZipDeflate };\n/**\n * Asynchronous streaming DEFLATE compression for ZIP archives\n */\nvar AsyncZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function AsyncZipDeflate(filename, opts) {\n        var _this = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new AsyncDeflate(opts, function (err, dat, final) {\n            _this.ondata(err, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n        this.terminate = this.d.terminate;\n    }\n    AsyncZipDeflate.prototype.process = function (chunk, final) {\n        this.d.push(chunk, final);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return AsyncZipDeflate;\n}());\nexport { AsyncZipDeflate };\n// TODO: Better tree shaking\n/**\n * A zippable archive to which files can incrementally be added\n */\nvar Zip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an empty ZIP archive to which files can be added\n     * @param cb The callback to call whenever data for the generated ZIP archive\n     *           is available\n     */\n    function Zip(cb) {\n        this.ondata = cb;\n        this.u = [];\n        this.d = 1;\n    }\n    /**\n     * Adds a file to the ZIP archive\n     * @param file The file stream to add\n     */\n    Zip.prototype.add = function (file) {\n        var _this = this;\n        if (!this.ondata)\n            err(5);\n        // finishing or finished\n        if (this.d & 2)\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, false);\n        else {\n            var f = strToU8(file.filename), fl_1 = f.length;\n            var com = file.comment, o = com && strToU8(com);\n            var u = fl_1 != file.filename.length || (o && (com.length != o.length));\n            var hl_1 = fl_1 + exfl(file.extra) + 30;\n            if (fl_1 > 65535)\n                this.ondata(err(11, 0, 1), null, false);\n            var header = new u8(hl_1);\n            wzh(header, 0, file, f, u, -1);\n            var chks_1 = [header];\n            var pAll_1 = function () {\n                for (var _i = 0, chks_2 = chks_1; _i < chks_2.length; _i++) {\n                    var chk = chks_2[_i];\n                    _this.ondata(null, chk, false);\n                }\n                chks_1 = [];\n            };\n            var tr_1 = this.d;\n            this.d = 0;\n            var ind_1 = this.u.length;\n            var uf_1 = mrg(file, {\n                f: f,\n                u: u,\n                o: o,\n                t: function () {\n                    if (file.terminate)\n                        file.terminate();\n                },\n                r: function () {\n                    pAll_1();\n                    if (tr_1) {\n                        var nxt = _this.u[ind_1 + 1];\n                        if (nxt)\n                            nxt.r();\n                        else\n                            _this.d = 1;\n                    }\n                    tr_1 = 1;\n                }\n            });\n            var cl_1 = 0;\n            file.ondata = function (err, dat, final) {\n                if (err) {\n                    _this.ondata(err, dat, final);\n                    _this.terminate();\n                }\n                else {\n                    cl_1 += dat.length;\n                    chks_1.push(dat);\n                    if (final) {\n                        var dd = new u8(16);\n                        wbytes(dd, 0, 0x8074B50);\n                        wbytes(dd, 4, file.crc);\n                        wbytes(dd, 8, cl_1);\n                        wbytes(dd, 12, file.size);\n                        chks_1.push(dd);\n                        uf_1.c = cl_1, uf_1.b = hl_1 + cl_1 + 16, uf_1.crc = file.crc, uf_1.size = file.size;\n                        if (tr_1)\n                            uf_1.r();\n                        tr_1 = 1;\n                    }\n                    else if (tr_1)\n                        pAll_1();\n                }\n            };\n            this.u.push(uf_1);\n        }\n    };\n    /**\n     * Ends the process of adding files and prepares to emit the final chunks.\n     * This *must* be called after adding all desired files for the resulting\n     * ZIP file to work properly.\n     */\n    Zip.prototype.end = function () {\n        var _this = this;\n        if (this.d & 2) {\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, true);\n            return;\n        }\n        if (this.d)\n            this.e();\n        else\n            this.u.push({\n                r: function () {\n                    if (!(_this.d & 1))\n                        return;\n                    _this.u.splice(-1, 1);\n                    _this.e();\n                },\n                t: function () { }\n            });\n        this.d = 3;\n    };\n    Zip.prototype.e = function () {\n        var bt = 0, l = 0, tl = 0;\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            tl += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0);\n        }\n        var out = new u8(tl + 22);\n        for (var _b = 0, _c = this.u; _b < _c.length; _b++) {\n            var f = _c[_b];\n            wzh(out, bt, f, f.f, f.u, -f.c - 2, l, f.o);\n            bt += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0), l += f.b;\n        }\n        wzf(out, bt, this.u.length, tl, l);\n        this.ondata(null, out, true);\n        this.d = 2;\n    };\n    /**\n     * A method to terminate any internal workers used by the stream. Subsequent\n     * calls to add() will fail.\n     */\n    Zip.prototype.terminate = function () {\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            f.t();\n        }\n        this.d = 2;\n    };\n    return Zip;\n}());\nexport { Zip };\nexport function zip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var r = {};\n    fltn(data, '', r, opts);\n    var k = Object.keys(r);\n    var lft = k.length, o = 0, tot = 0;\n    var slft = lft, files = new Array(lft);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var cbf = function () {\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\n        tot = 0;\n        for (var i = 0; i < slft; ++i) {\n            var f = files[i];\n            try {\n                var l = f.c.length;\n                wzh(out, tot, f, f.f, f.u, l);\n                var badd = 30 + f.f.length + exfl(f.extra);\n                var loc = tot + badd;\n                out.set(f.c, loc);\n                wzh(out, o, f, f.f, f.u, l, tot, f.m), o += 16 + badd + (f.m ? f.m.length : 0), tot = loc + l;\n            }\n            catch (e) {\n                return cbd(e, null);\n            }\n        }\n        wzf(out, o, files.length, cdl, oe);\n        cbd(null, out);\n    };\n    if (!lft)\n        cbf();\n    var _loop_1 = function (i) {\n        var fn = k[i];\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var c = crc(), size = file.length;\n        c.p(file);\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        var compression = p.level == 0 ? 0 : 8;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cbd(e, null);\n            }\n            else {\n                var l = d.length;\n                files[i] = mrg(p, {\n                    size: size,\n                    crc: c.d(),\n                    c: d,\n                    f: f,\n                    m: m,\n                    u: s != fn.length || (m && (com.length != ms)),\n                    compression: compression\n                });\n                o += 30 + s + exl + l;\n                tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n                if (!--lft)\n                    cbf();\n            }\n        };\n        if (s > 65535)\n            cbl(err(11, 0, 1), null);\n        if (!compression)\n            cbl(null, file);\n        else if (size < 160000) {\n            try {\n                cbl(null, deflateSync(file, p));\n            }\n            catch (e) {\n                cbl(e, null);\n            }\n        }\n        else\n            term.push(deflate(file, p, cbl));\n    };\n    // Cannot use lft because it can decrease\n    for (var i = 0; i < slft; ++i) {\n        _loop_1(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nexport function zipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var r = {};\n    var files = [];\n    fltn(data, '', r, opts);\n    var o = 0;\n    var tot = 0;\n    for (var fn in r) {\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var compression = p.level == 0 ? 0 : 8;\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        if (s > 65535)\n            err(11);\n        var d = compression ? deflateSync(file, p) : file, l = d.length;\n        var c = crc();\n        c.p(file);\n        files.push(mrg(p, {\n            size: file.length,\n            crc: c.d(),\n            c: d,\n            f: f,\n            m: m,\n            u: s != fn.length || (m && (com.length != ms)),\n            o: o,\n            compression: compression\n        }));\n        o += 30 + s + exl + l;\n        tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n    }\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\n    for (var i = 0; i < files.length; ++i) {\n        var f = files[i];\n        wzh(out, f.o, f, f.f, f.u, f.c.length);\n        var badd = 30 + f.f.length + exfl(f.extra);\n        out.set(f.c, f.o + badd);\n        wzh(out, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + badd + (f.m ? f.m.length : 0);\n    }\n    wzf(out, o, files.length, cdl, oe);\n    return out;\n}\n/**\n * Streaming pass-through decompression for ZIP archives\n */\nvar UnzipPassThrough = /*#__PURE__*/ (function () {\n    function UnzipPassThrough() {\n    }\n    UnzipPassThrough.prototype.push = function (data, final) {\n        this.ondata(null, data, final);\n    };\n    UnzipPassThrough.compression = 0;\n    return UnzipPassThrough;\n}());\nexport { UnzipPassThrough };\n/**\n * Streaming DEFLATE decompression for ZIP archives. Prefer AsyncZipInflate for\n * better performance.\n */\nvar UnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function UnzipInflate() {\n        var _this = this;\n        this.i = new Inflate(function (dat, final) {\n            _this.ondata(null, dat, final);\n        });\n    }\n    UnzipInflate.prototype.push = function (data, final) {\n        try {\n            this.i.push(data, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    UnzipInflate.compression = 8;\n    return UnzipInflate;\n}());\nexport { UnzipInflate };\n/**\n * Asynchronous streaming DEFLATE decompression for ZIP archives\n */\nvar AsyncUnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function AsyncUnzipInflate(_, sz) {\n        var _this = this;\n        if (sz < 320000) {\n            this.i = new Inflate(function (dat, final) {\n                _this.ondata(null, dat, final);\n            });\n        }\n        else {\n            this.i = new AsyncInflate(function (err, dat, final) {\n                _this.ondata(err, dat, final);\n            });\n            this.terminate = this.i.terminate;\n        }\n    }\n    AsyncUnzipInflate.prototype.push = function (data, final) {\n        if (this.i.terminate)\n            data = slc(data, 0);\n        this.i.push(data, final);\n    };\n    AsyncUnzipInflate.compression = 8;\n    return AsyncUnzipInflate;\n}());\nexport { AsyncUnzipInflate };\n/**\n * A ZIP archive decompression stream that emits files as they are discovered\n */\nvar Unzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a ZIP decompression stream\n     * @param cb The callback to call whenever a file in the ZIP archive is found\n     */\n    function Unzip(cb) {\n        this.onfile = cb;\n        this.k = [];\n        this.o = {\n            0: UnzipPassThrough\n        };\n        this.p = et;\n    }\n    /**\n     * Pushes a chunk to be unzipped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzip.prototype.push = function (chunk, final) {\n        var _this = this;\n        if (!this.onfile)\n            err(5);\n        if (!this.p)\n            err(4);\n        if (this.c > 0) {\n            var len = Math.min(this.c, chunk.length);\n            var toAdd = chunk.subarray(0, len);\n            this.c -= len;\n            if (this.d)\n                this.d.push(toAdd, !this.c);\n            else\n                this.k[0].push(toAdd);\n            chunk = chunk.subarray(len);\n            if (chunk.length)\n                return this.push(chunk, final);\n        }\n        else {\n            var f = 0, i = 0, is = void 0, buf = void 0;\n            if (!this.p.length)\n                buf = chunk;\n            else if (!chunk.length)\n                buf = this.p;\n            else {\n                buf = new u8(this.p.length + chunk.length);\n                buf.set(this.p), buf.set(chunk, this.p.length);\n            }\n            var l = buf.length, oc = this.c, add = oc && this.d;\n            var _loop_2 = function () {\n                var _a;\n                var sig = b4(buf, i);\n                if (sig == 0x4034B50) {\n                    f = 1, is = i;\n                    this_1.d = null;\n                    this_1.c = 0;\n                    var bf = b2(buf, i + 6), cmp_1 = b2(buf, i + 8), u = bf & 2048, dd = bf & 8, fnl = b2(buf, i + 26), es = b2(buf, i + 28);\n                    if (l > i + 30 + fnl + es) {\n                        var chks_3 = [];\n                        this_1.k.unshift(chks_3);\n                        f = 2;\n                        var sc_1 = b4(buf, i + 18), su_1 = b4(buf, i + 22);\n                        var fn_1 = strFromU8(buf.subarray(i + 30, i += 30 + fnl), !u);\n                        if (sc_1 == 4294967295) {\n                            _a = dd ? [-2] : z64e(buf, i), sc_1 = _a[0], su_1 = _a[1];\n                        }\n                        else if (dd)\n                            sc_1 = -1;\n                        i += es;\n                        this_1.c = sc_1;\n                        var d_1;\n                        var file_1 = {\n                            name: fn_1,\n                            compression: cmp_1,\n                            start: function () {\n                                if (!file_1.ondata)\n                                    err(5);\n                                if (!sc_1)\n                                    file_1.ondata(null, et, true);\n                                else {\n                                    var ctr = _this.o[cmp_1];\n                                    if (!ctr)\n                                        file_1.ondata(err(14, 'unknown compression type ' + cmp_1, 1), null, false);\n                                    d_1 = sc_1 < 0 ? new ctr(fn_1) : new ctr(fn_1, sc_1, su_1);\n                                    d_1.ondata = function (err, dat, final) { file_1.ondata(err, dat, final); };\n                                    for (var _i = 0, chks_4 = chks_3; _i < chks_4.length; _i++) {\n                                        var dat = chks_4[_i];\n                                        d_1.push(dat, false);\n                                    }\n                                    if (_this.k[0] == chks_3 && _this.c)\n                                        _this.d = d_1;\n                                    else\n                                        d_1.push(et, true);\n                                }\n                            },\n                            terminate: function () {\n                                if (d_1 && d_1.terminate)\n                                    d_1.terminate();\n                            }\n                        };\n                        if (sc_1 >= 0)\n                            file_1.size = sc_1, file_1.originalSize = su_1;\n                        this_1.onfile(file_1);\n                    }\n                    return \"break\";\n                }\n                else if (oc) {\n                    if (sig == 0x8074B50) {\n                        is = i += 12 + (oc == -2 && 8), f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                    else if (sig == 0x2014B50) {\n                        is = i -= 4, f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                }\n            };\n            var this_1 = this;\n            for (; i < l - 4; ++i) {\n                var state_1 = _loop_2();\n                if (state_1 === \"break\")\n                    break;\n            }\n            this.p = et;\n            if (oc < 0) {\n                var dat = f ? buf.subarray(0, is - 12 - (oc == -2 && 8) - (b4(buf, is - 16) == 0x8074B50 && 4)) : buf.subarray(0, i);\n                if (add)\n                    add.push(dat, !!f);\n                else\n                    this.k[+(f == 2)].push(dat);\n            }\n            if (f & 2)\n                return this.push(buf.subarray(i), final);\n            this.p = buf.subarray(i);\n        }\n        if (final) {\n            if (this.c)\n                err(13);\n            this.p = null;\n        }\n    };\n    /**\n     * Registers a decoder with the stream, allowing for files compressed with\n     * the compression type provided to be expanded correctly\n     * @param decoder The decoder constructor\n     */\n    Unzip.prototype.register = function (decoder) {\n        this.o[decoder.compression] = decoder;\n    };\n    return Unzip;\n}());\nexport { Unzip };\nvar mt = typeof queueMicrotask == 'function' ? queueMicrotask : typeof setTimeout == 'function' ? setTimeout : function (fn) { fn(); };\nexport function unzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var files = {};\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558) {\n            cbd(err(13, 0, 1), null);\n            return tAll;\n        }\n    }\n    ;\n    var lft = b2(data, e + 8);\n    if (lft) {\n        var c = lft;\n        var o = b4(data, e + 16);\n        var z = o == 4294967295 || c == 65535;\n        if (z) {\n            var ze = b4(data, e - 12);\n            z = b4(data, ze) == 0x6064B50;\n            if (z) {\n                c = lft = b4(data, ze + 32);\n                o = b4(data, ze + 48);\n            }\n        }\n        var fltr = opts && opts.filter;\n        var _loop_3 = function (i) {\n            var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n            o = no;\n            var cbl = function (e, d) {\n                if (e) {\n                    tAll();\n                    cbd(e, null);\n                }\n                else {\n                    if (d)\n                        files[fn] = d;\n                    if (!--lft)\n                        cbd(null, files);\n                }\n            };\n            if (!fltr || fltr({\n                name: fn,\n                size: sc,\n                originalSize: su,\n                compression: c_1\n            })) {\n                if (!c_1)\n                    cbl(null, slc(data, b, b + sc));\n                else if (c_1 == 8) {\n                    var infl = data.subarray(b, b + sc);\n                    // Synchronously decompress under 512KB, or barely-compressed data\n                    if (su < 524288 || sc > 0.8 * su) {\n                        try {\n                            cbl(null, inflateSync(infl, { out: new u8(su) }));\n                        }\n                        catch (e) {\n                            cbl(e, null);\n                        }\n                    }\n                    else\n                        term.push(inflate(infl, { size: su }, cbl));\n                }\n                else\n                    cbl(err(14, 'unknown compression type ' + c_1, 1), null);\n            }\n            else\n                cbl(null, null);\n        };\n        for (var i = 0; i < c; ++i) {\n            _loop_3(i);\n        }\n    }\n    else\n        cbd(null, {});\n    return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @param opts The ZIP extraction options\n * @returns The decompressed files\n */\nexport function unzipSync(data, opts) {\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558)\n            err(13);\n    }\n    ;\n    var c = b2(data, e + 8);\n    if (!c)\n        return {};\n    var o = b4(data, e + 16);\n    var z = o == 4294967295 || c == 65535;\n    if (z) {\n        var ze = b4(data, e - 12);\n        z = b4(data, ze) == 0x6064B50;\n        if (z) {\n            c = b4(data, ze + 32);\n            o = b4(data, ze + 48);\n        }\n    }\n    var fltr = opts && opts.filter;\n    for (var i = 0; i < c; ++i) {\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        if (!fltr || fltr({\n            name: fn,\n            size: sc,\n            originalSize: su,\n            compression: c_2\n        })) {\n            if (!c_2)\n                files[fn] = slc(data, b, b + sc);\n            else if (c_2 == 8)\n                files[fn] = inflateSync(data.subarray(b, b + sc), { out: new u8(su) });\n            else\n                err(14, 'unknown compression type ' + c_2);\n        }\n    }\n    return files;\n}\n", "export class StringDictionary {\n    constructor() {\n        this.idx = 1;\n        this.backDict = {};\n    }\n    getKey(str) {\n        let isNew = false;\n        if (!this.backDict[str]) {\n            isNew = true;\n            this.backDict[str] = this.idx++;\n        }\n        return [this.backDict[str], isNew];\n    }\n}\nexport default class AttributeSender {\n    constructor(app, isDictDisabled) {\n        this.app = app;\n        this.isDictDisabled = isDictDisabled;\n        this.dict = new StringDictionary();\n    }\n    sendSetAttribute(id, name, value) {\n        if (this.isDictDisabled) {\n            const msg = [12 /* Type.SetNodeAttribute */, id, name, value];\n            return this.app.send(msg);\n        }\n        else {\n            const message = [\n                51 /* Type.SetNodeAttributeDict */,\n                id,\n                this.applyDict(name),\n                this.applyDict(value),\n            ];\n            return this.app.send(message);\n        }\n    }\n    applyDict(str) {\n        const [key, isNew] = this.dict.getKey(str);\n        if (isNew) {\n            this.app.send([50 /* Type.StringDict */, key, str]);\n        }\n        return key;\n    }\n    clear() {\n        this.dict = new StringDictionary();\n    }\n}\n", "export default class ConditionsManager {\n    constructor(app, startParams) {\n        this.app = app;\n        this.startParams = startParams;\n        this.conditions = [];\n        this.hasStarted = false;\n        this.createConditionFromFilter = (filter) => {\n            if (filter.value.length) {\n                const resultCondition = mapCondition(filter);\n                if (resultCondition.type) {\n                    return resultCondition;\n                }\n            }\n            return undefined;\n        };\n        this.durationInt = null;\n    }\n    setConditions(conditions) {\n        this.conditions = conditions;\n    }\n    async fetchConditions(projectId, token) {\n        try {\n            const r = await fetch(`${this.app.options.ingestPoint}/v1/web/conditions/${projectId}`, {\n                method: 'GET',\n                headers: {\n                    Authorization: `Bearer ${token}`,\n                },\n            });\n            const { conditions } = (await r.json());\n            const mappedConditions = [];\n            conditions.forEach((c) => {\n                const filters = c.filters;\n                filters.forEach((filter) => {\n                    let cond;\n                    if (filter.type === 'fetch') {\n                        cond = {\n                            type: 'network_request',\n                            subConditions: [],\n                            name: c.name,\n                        };\n                        filter.filters.forEach((f) => {\n                            const subCond = this.createConditionFromFilter(f);\n                            if (subCond) {\n                                ;\n                                cond.subConditions.push(subCond);\n                            }\n                        });\n                    }\n                    else {\n                        cond = this.createConditionFromFilter(filter);\n                    }\n                    if (cond) {\n                        if (cond.type === 'session_duration') {\n                            this.processDuration(cond.value[0], c.name);\n                        }\n                        mappedConditions.push({ ...cond, name: c.name });\n                    }\n                });\n            });\n            this.conditions = mappedConditions;\n        }\n        catch (e) {\n            this.app.debug.error('Critical: cannot fetch start conditions');\n        }\n    }\n    trigger(conditionName) {\n        if (this.hasStarted)\n            return;\n        try {\n            this.hasStarted = true;\n            void this.app.start(this.startParams, undefined, conditionName);\n        }\n        catch (e) {\n            this.app.debug.error(e);\n        }\n    }\n    processMessage(message) {\n        if (this.hasStarted)\n            return;\n        switch (message[0]) {\n            case 78 /* Type.JSException */:\n                this.jsExceptionEvent(message);\n                break;\n            case 27 /* Type.CustomEvent */:\n                this.customEvent(message);\n                break;\n            case 68 /* Type.MouseClick */:\n                this.clickEvent(message);\n                break;\n            case 122 /* Type.SetPageLocation */:\n                this.pageLocationEvent(message);\n                break;\n            case 83 /* Type.NetworkRequest */:\n                this.networkRequest(message);\n                break;\n            default:\n                break;\n        }\n    }\n    processFlags(flag) {\n        const flagConds = this.conditions.filter((c) => c.type === 'feature_flag');\n        if (flagConds.length) {\n            flagConds.forEach((flagCond) => {\n                const operator = operators[flagCond.operator];\n                if (operator && flag.find((f) => operator(f.key, flagCond.value))) {\n                    this.trigger(flagCond.name);\n                }\n            });\n        }\n    }\n    processDuration(durationMs, condName) {\n        this.durationInt = setInterval(() => {\n            const sessionLength = performance.now();\n            if (sessionLength > durationMs) {\n                this.trigger(condName);\n            }\n        }, 1000);\n        this.app.attachStopCallback(() => {\n            if (this.durationInt) {\n                clearInterval(this.durationInt);\n            }\n        });\n    }\n    networkRequest(message) {\n        // method - 2, url - 3, status - 6, duration - 8\n        const reqConds = this.conditions.filter((c) => c.type === 'network_request');\n        if (!reqConds.length)\n            return;\n        reqConds.forEach((reqCond) => {\n            const validSubConditions = reqCond.subConditions.filter((c) => c.operator !== 'isAny');\n            if (validSubConditions.length) {\n                const allPass = validSubConditions.every((subCond) => {\n                    let value;\n                    switch (subCond.key) {\n                        case 'url':\n                            value = message[3];\n                            break;\n                        case 'status':\n                            value = message[6];\n                            break;\n                        case 'method':\n                            value = message[2];\n                            break;\n                        case 'duration':\n                            value = message[8];\n                            break;\n                        default:\n                            break;\n                    }\n                    const operator = operators[subCond.operator];\n                    // @ts-ignore\n                    if (operator && operator(value, subCond.value)) {\n                        return true;\n                    }\n                });\n                if (allPass) {\n                    this.trigger(reqCond.name);\n                }\n            }\n            else if (validSubConditions.length === 0 && reqCond.subConditions.length) {\n                this.trigger(reqCond.name);\n            }\n        });\n    }\n    customEvent(message) {\n        // name - 1, payload - 2\n        const evConds = this.conditions.filter((c) => c.type === 'custom_event');\n        if (evConds.length) {\n            evConds.forEach((evCond) => {\n                const operator = operators[evCond.operator];\n                if (operator &&\n                    (operator(message[1], evCond.value) || operator(message[2], evCond.value))) {\n                    this.trigger(evCond.name);\n                }\n            });\n        }\n    }\n    clickEvent(message) {\n        // label - 3, selector - 4\n        const clickCond = this.conditions.filter((c) => c.type === 'click');\n        if (clickCond.length) {\n            clickCond.forEach((click) => {\n                const operator = operators[click.operator];\n                if (operator && (operator(message[3], click.value) || operator(message[4], click.value))) {\n                    this.trigger(click.name);\n                }\n            });\n        }\n    }\n    pageLocationEvent(message) {\n        // url - 1\n        const urlConds = this.conditions.filter((c) => c.type === 'visited_url');\n        if (urlConds) {\n            urlConds.forEach((urlCond) => {\n                const operator = operators[urlCond.operator];\n                if (operator && operator(message[1], urlCond.value)) {\n                    this.trigger(urlCond.name);\n                }\n            });\n        }\n    }\n    jsExceptionEvent(message) {\n        // name - 1, message - 2, payload - 3\n        const testedValues = [message[1], message[2], message[3]];\n        const exceptionConds = this.conditions.filter((c) => c.type === 'exception');\n        if (exceptionConds) {\n            exceptionConds.forEach((exceptionCond) => {\n                const operator = operators[exceptionCond.operator];\n                if (operator && testedValues.some((val) => operator(val, exceptionCond.value))) {\n                    this.trigger(exceptionCond.name);\n                }\n            });\n        }\n    }\n}\nconst operators = {\n    is: (val, target) => target.some((t) => val.includes(t)),\n    isAny: () => true,\n    isNot: (val, target) => !target.some((t) => val.includes(t)),\n    contains: (val, target) => target.some((t) => val.includes(t)),\n    notContains: (val, target) => !target.some((t) => val.includes(t)),\n    startsWith: (val, target) => target.some((t) => val.startsWith(t)),\n    endsWith: (val, target) => target.some((t) => val.endsWith(t)),\n    greaterThan: (val, target) => val > target,\n    greaterOrEqual: (val, target) => val >= target,\n    lessOrEqual: (val, target) => val <= target,\n    lessThan: (val, target) => val < target,\n};\nconst mapCondition = (condition) => {\n    const opMap = {\n        on: 'is',\n        notOn: 'isNot',\n        '\\u003e': 'greaterThan',\n        '\\u003c': 'lessThan',\n        '\\u003d': 'is',\n        '\\u003c=': 'lessOrEqual',\n        '\\u003e=': 'greaterOrEqual',\n    };\n    const mapOperator = (operator) => {\n        const keys = Object.keys(opMap);\n        // @ts-ignore\n        if (keys.includes(operator))\n            return opMap[operator];\n    };\n    let con = {\n        type: '',\n        operator: '',\n        value: condition.value,\n        key: '',\n    };\n    switch (condition.type) {\n        case 'click':\n            con = {\n                type: 'click',\n                operator: mapOperator(condition.operator),\n                value: condition.value,\n                key: '',\n            };\n            break;\n        case 'location':\n            con = {\n                type: 'visited_url',\n                // @ts-ignore\n                operator: condition.operator,\n                value: condition.value,\n                key: '',\n            };\n            break;\n        case 'custom':\n            con = {\n                type: 'custom_event',\n                // @ts-ignore\n                operator: condition.operator,\n                value: condition.value,\n                key: '',\n            };\n            break;\n        case 'metadata':\n            con = {\n                // @ts-ignore\n                type: condition.source === 'featureFlag' ? 'feature_flag' : condition.type,\n                // @ts-ignore\n                operator: condition.operator,\n                value: condition.value,\n                key: '',\n            };\n            break;\n        case 'error':\n            con = {\n                type: 'exception',\n                // @ts-ignore\n                operator: condition.operator,\n                value: condition.value,\n                key: '',\n            };\n            break;\n        case 'duration':\n            con = {\n                type: 'session_duration',\n                // @ts-ignore\n                value: condition.value[0],\n                key: '',\n            };\n            break;\n        case 'fetchUrl':\n            con = {\n                type: 'network_request',\n                key: 'url',\n                operator: condition.operator,\n                value: condition.value,\n            };\n            break;\n        case 'fetchStatusCode':\n            con = {\n                type: 'network_request',\n                key: 'status',\n                operator: mapOperator(condition.operator),\n                value: condition.value,\n            };\n            break;\n        case 'fetchMethod':\n            con = {\n                type: 'network_request',\n                key: 'method',\n                operator: mapOperator(condition.operator),\n                value: condition.value,\n            };\n            break;\n        case 'fetchDuration':\n            con = {\n                type: 'network_request',\n                key: 'duration',\n                operator: mapOperator(condition.operator),\n                value: condition.value,\n            };\n            break;\n    }\n    // @ts-ignore\n    return con;\n};\n", "export default class FeatureFlags {\n    constructor(app) {\n        this.app = app;\n        this.flags = [];\n        this.storageKey = '__openreplay_flags';\n        const persistFlags = this.app.sessionStorage.getItem(this.storageKey);\n        if (persistFlags) {\n            const persistFlagsStrArr = persistFlags.split(';').filter(Boolean);\n            this.flags = persistFlagsStrArr.map((flag) => JSON.parse(flag));\n        }\n    }\n    getFeatureFlag(flagName) {\n        return this.flags.find((flag) => flag.key === flagName);\n    }\n    isFlagEnabled(flagName) {\n        return this.flags.findIndex((flag) => flag.key === flagName) !== -1;\n    }\n    onFlagsLoad(cb) {\n        this.onFlagsCb = cb;\n    }\n    async reloadFlags(token) {\n        const persistFlagsStr = this.app.sessionStorage.getItem(this.storageKey);\n        const persistFlags = {};\n        if (persistFlagsStr) {\n            const persistArray = persistFlagsStr.split(';').filter(Boolean);\n            persistArray.forEach((flag) => {\n                const flagObj = JSON.parse(flag);\n                persistFlags[flagObj.key] = { key: flagObj.key, value: flagObj.value };\n            });\n        }\n        const sessionInfo = this.app.session.getInfo();\n        const userInfo = this.app.session.userInfo;\n        const requestObject = {\n            projectID: sessionInfo.projectID,\n            userID: sessionInfo.userID,\n            metadata: sessionInfo.metadata,\n            referrer: document.referrer,\n            os: userInfo.userOS,\n            device: userInfo.userDevice,\n            country: userInfo.userCountry,\n            state: userInfo.userState,\n            city: userInfo.userCity,\n            browser: userInfo.userBrowser,\n            persistFlags: persistFlags,\n        };\n        const authToken = token ?? this.app.session.getSessionToken();\n        const resp = await fetch(this.app.options.ingestPoint + '/v1/web/feature-flags', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                Authorization: `Bearer ${authToken}`,\n            },\n            body: JSON.stringify(requestObject),\n        });\n        if (resp.status === 200) {\n            const data = await resp.json();\n            return this.handleFlags(data.flags);\n        }\n    }\n    handleFlags(flags) {\n        const persistFlags = [];\n        flags.forEach((flag) => {\n            if (flag.is_persist)\n                persistFlags.push(flag);\n        });\n        let str = '';\n        const uniquePersistFlags = this.diffPersist(persistFlags);\n        uniquePersistFlags.forEach((flag) => {\n            str += `${JSON.stringify(flag)};`;\n        });\n        this.app.sessionStorage.setItem(this.storageKey, str);\n        this.flags = flags;\n        return this.onFlagsCb?.(flags);\n    }\n    clearPersistFlags() {\n        this.app.sessionStorage.removeItem(this.storageKey);\n    }\n    diffPersist(flags) {\n        const persistFlags = this.app.sessionStorage.getItem(this.storageKey);\n        if (!persistFlags)\n            return flags;\n        const persistFlagsStrArr = persistFlags.split(';').filter(Boolean);\n        const persistFlagsArr = persistFlagsStrArr.map((flag) => JSON.parse(flag));\n        return flags.filter((flag) => persistFlagsArr.findIndex((pf) => pf.key === flag.key) === -1);\n    }\n}\n", "const DEPRECATED_ATTRS = { htmlmasked: 'hidden', masked: 'obscured' };\nexport const IN_BROWSER = !(typeof window === 'undefined');\nexport const IS_FIREFOX = IN_BROWSER && navigator.userAgent.match(/firefox|fxios/i);\nexport const MAX_STR_LEN = 1e5;\n// Buggy to use `performance.timeOrigin || performance.timing.navigationStart`\n// https://github.com/mdn/content/issues/4713\n// Maybe move to timer/ticker\nlet timeOrigin = IN_BROWSER ? Date.now() - performance.now() : 0;\nexport function adjustTimeOrigin() {\n    timeOrigin = Date.now() - performance.now();\n}\nexport function getTimeOrigin() {\n    return timeOrigin;\n}\nexport const now = IN_BROWSER && !!performance.now\n    ? () => Math.round(performance.now() + timeOrigin)\n    : () => Date.now();\nexport const stars = 'repeat' in String.prototype\n    ? (str) => '*'.repeat(str.length)\n    : (str) => str.replace(/./g, '*');\nexport function normSpaces(str) {\n    return str.trim().replace(/\\s+/g, ' ');\n}\n// isAbsoluteUrl regexp:  /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url)\nexport function isURL(s) {\n    return s.startsWith('https://') || s.startsWith('http://');\n}\n// TODO: JOIN IT WITH LOGGER somehow (use logging decorators?); Don't forget about index.js loggin when there is no logger instance.\nexport const DOCS_HOST = 'https://docs.openreplay.com';\nconst warnedFeatures = {};\nexport function deprecationWarn(nameOfFeature, useInstead, docsPath = '/') {\n    if (warnedFeatures[nameOfFeature]) {\n        return;\n    }\n    console.warn(`OpenReplay: ${nameOfFeature} is deprecated. ${useInstead ? `Please, use ${useInstead} instead.` : ''} Visit ${DOCS_HOST}${docsPath} for more information.`);\n    warnedFeatures[nameOfFeature] = true;\n}\nexport function getLabelAttribute(e) {\n    let value = e.getAttribute('data-openreplay-label');\n    if (value !== null) {\n        return value;\n    }\n    value = e.getAttribute('data-asayer-label');\n    if (value !== null) {\n        deprecationWarn('\"data-asayer-label\" attribute', '\"data-openreplay-label\" attribute', '/');\n    }\n    return value;\n}\nexport function hasOpenreplayAttribute(e, attr) {\n    const newName = `data-openreplay-${attr}`;\n    if (e.hasAttribute(newName)) {\n        // @ts-ignore\n        if (DEPRECATED_ATTRS[attr]) {\n            deprecationWarn(`\"${newName}\" attribute`, \n            // @ts-ignore\n            `\"${DEPRECATED_ATTRS[attr]}\" attribute`, '/installation/sanitize-data');\n        }\n        return true;\n    }\n    return false;\n}\n/**\n * checks if iframe is accessible\n **/\nexport function canAccessIframe(iframe) {\n    try {\n        return Boolean(iframe.contentDocument);\n    }\n    catch (e) {\n        return false;\n    }\n}\nfunction dec2hex(dec) {\n    return dec.toString(16).padStart(2, '0');\n}\nexport function generateRandomId(len) {\n    const arr = new Uint8Array((len || 40) / 2);\n    // msCrypto = IE11\n    // @ts-ignore\n    const safeCrypto = window.crypto || window.msCrypto;\n    if (safeCrypto) {\n        safeCrypto.getRandomValues(arr);\n        return Array.from(arr, dec2hex).join('');\n    }\n    else {\n        return Array.from({ length: len || 40 }, () => dec2hex(Math.floor(Math.random() * 16))).join('');\n    }\n}\nexport function inIframe() {\n    try {\n        return window.self && window.top && window.self !== window.top;\n    }\n    catch (e) {\n        return true;\n    }\n}\n/**\n * Because angular devs decided that its a good idea to override a browser apis\n * we need to use this to achieve safe behavior\n * */\nexport function ngSafeBrowserMethod(method) {\n    // @ts-ignore\n    return window.Zone && '__symbol__' in window.Zone\n        ? // @ts-ignore\n            window['Zone']['__symbol__'](method)\n        : method;\n}\nexport function createMutationObserver(cb) {\n    const mObserver = ngSafeBrowserMethod('MutationObserver');\n    return new window[mObserver](cb);\n}\nexport function createEventListener(target, event, cb, capture) {\n    const safeAddEventListener = ngSafeBrowserMethod('addEventListener');\n    try {\n        target[safeAddEventListener](event, cb, capture);\n    }\n    catch (e) {\n        const msg = e.message;\n        console.debug(\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n        `Openreplay: ${msg}; if this error is caused by an IframeObserver, ignore it`);\n    }\n}\nexport function deleteEventListener(target, event, cb, capture) {\n    const safeRemoveEventListener = ngSafeBrowserMethod('removeEventListener');\n    try {\n        target[safeRemoveEventListener](event, cb, capture);\n    }\n    catch (e) {\n        const msg = e.message;\n        console.debug(\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n        `Openreplay: ${msg}; if this error is caused by an IframeObserver, ignore it`);\n    }\n}\nclass FIFOTaskScheduler {\n    constructor() {\n        this.taskQueue = [];\n        this.isRunning = false;\n    }\n    // Adds a task to the queue\n    addTask(task) {\n        this.taskQueue.push(task);\n        this.runTasks();\n    }\n    // Runs tasks from the queue\n    runTasks() {\n        if (this.isRunning || this.taskQueue.length === 0) {\n            return;\n        }\n        this.isRunning = true;\n        const executeNextTask = () => {\n            if (this.taskQueue.length === 0) {\n                this.isRunning = false;\n                return;\n            }\n            // Get the next task and execute it\n            const nextTask = this.taskQueue.shift();\n            Promise.resolve(nextTask()).then(() => {\n                requestAnimationFrame(() => executeNextTask());\n            });\n        };\n        executeNextTask();\n    }\n}\nconst scheduler = new FIFOTaskScheduler();\nexport function requestIdleCb(callback) {\n    // performance improvement experiment;\n    scheduler.addTask(callback);\n    /**\n     * This is a brief polyfill that suits our needs\n     * I took inspiration from Microsoft Clarity polyfill on this one\n     * then adapted it a little bit\n     *\n     * I'm very grateful for their bright idea\n     * */\n    // const taskTimeout = 3000\n    // if (window.requestIdleCallback) {\n    //   return window.requestIdleCallback(callback, { timeout: taskTimeout })\n    // } else {\n    //   const channel = new MessageChannel()\n    //   const incoming = channel.port1\n    //   const outgoing = channel.port2\n    //\n    //   incoming.onmessage = (): void => {\n    //     callback()\n    //   }\n    //   requestAnimationFrame((): void => {\n    //     outgoing.postMessage(1)\n    //   })\n    // }\n}\nexport function simpleMerge(defaultObj, givenObj) {\n    const result = { ...defaultObj };\n    for (const key in givenObj) {\n        // eslint-disable-next-line no-prototype-builtins\n        if (givenObj.hasOwnProperty(key)) {\n            const userOptionValue = givenObj[key];\n            const defaultOptionValue = defaultObj[key];\n            if (typeof userOptionValue === 'object' &&\n                !Array.isArray(userOptionValue) &&\n                userOptionValue !== null) {\n                result[key] = simpleMerge(defaultOptionValue || {}, userOptionValue);\n            }\n            else {\n                result[key] = userOptionValue;\n            }\n        }\n    }\n    return result;\n}\n", "// Auto-generated, do not edit\n/* eslint-disable */\nexport function Timestamp(timestamp) {\n    return [\n        0 /* Messages.Type.Timestamp */,\n        timestamp,\n    ];\n}\nexport function SetPageLocationDeprecated(url, referrer, navigationStart) {\n    return [\n        4 /* Messages.Type.SetPageLocationDeprecated */,\n        url,\n        referrer,\n        navigationStart,\n    ];\n}\nexport function SetViewportSize(width, height) {\n    return [\n        5 /* Messages.Type.SetViewportSize */,\n        width,\n        height,\n    ];\n}\nexport function SetViewportScroll(x, y) {\n    return [\n        6 /* Messages.Type.SetViewportScroll */,\n        x,\n        y,\n    ];\n}\nexport function CreateDocument() {\n    return [\n        7 /* Messages.Type.CreateDocument */,\n    ];\n}\nexport function CreateElementNode(id, parentID, index, tag, svg) {\n    return [\n        8 /* Messages.Type.CreateElementNode */,\n        id,\n        parentID,\n        index,\n        tag,\n        svg,\n    ];\n}\nexport function CreateTextNode(id, parentID, index) {\n    return [\n        9 /* Messages.Type.CreateTextNode */,\n        id,\n        parentID,\n        index,\n    ];\n}\nexport function MoveNode(id, parentID, index) {\n    return [\n        10 /* Messages.Type.MoveNode */,\n        id,\n        parentID,\n        index,\n    ];\n}\nexport function RemoveNode(id) {\n    return [\n        11 /* Messages.Type.RemoveNode */,\n        id,\n    ];\n}\nexport function SetNodeAttribute(id, name, value) {\n    return [\n        12 /* Messages.Type.SetNodeAttribute */,\n        id,\n        name,\n        value,\n    ];\n}\nexport function RemoveNodeAttribute(id, name) {\n    return [\n        13 /* Messages.Type.RemoveNodeAttribute */,\n        id,\n        name,\n    ];\n}\nexport function SetNodeData(id, data) {\n    return [\n        14 /* Messages.Type.SetNodeData */,\n        id,\n        data,\n    ];\n}\nexport function SetNodeScroll(id, x, y) {\n    return [\n        16 /* Messages.Type.SetNodeScroll */,\n        id,\n        x,\n        y,\n    ];\n}\nexport function SetInputTarget(id, label) {\n    return [\n        17 /* Messages.Type.SetInputTarget */,\n        id,\n        label,\n    ];\n}\nexport function SetInputValue(id, value, mask) {\n    return [\n        18 /* Messages.Type.SetInputValue */,\n        id,\n        value,\n        mask,\n    ];\n}\nexport function SetInputChecked(id, checked) {\n    return [\n        19 /* Messages.Type.SetInputChecked */,\n        id,\n        checked,\n    ];\n}\nexport function MouseMove(x, y) {\n    return [\n        20 /* Messages.Type.MouseMove */,\n        x,\n        y,\n    ];\n}\nexport function NetworkRequestDeprecated(type, method, url, request, response, status, timestamp, duration) {\n    return [\n        21 /* Messages.Type.NetworkRequestDeprecated */,\n        type,\n        method,\n        url,\n        request,\n        response,\n        status,\n        timestamp,\n        duration,\n    ];\n}\nexport function ConsoleLog(level, value) {\n    return [\n        22 /* Messages.Type.ConsoleLog */,\n        level,\n        value,\n    ];\n}\nexport function PageLoadTiming(requestStart, responseStart, responseEnd, domContentLoadedEventStart, domContentLoadedEventEnd, loadEventStart, loadEventEnd, firstPaint, firstContentfulPaint) {\n    return [\n        23 /* Messages.Type.PageLoadTiming */,\n        requestStart,\n        responseStart,\n        responseEnd,\n        domContentLoadedEventStart,\n        domContentLoadedEventEnd,\n        loadEventStart,\n        loadEventEnd,\n        firstPaint,\n        firstContentfulPaint,\n    ];\n}\nexport function PageRenderTiming(speedIndex, visuallyComplete, timeToInteractive) {\n    return [\n        24 /* Messages.Type.PageRenderTiming */,\n        speedIndex,\n        visuallyComplete,\n        timeToInteractive,\n    ];\n}\nexport function CustomEvent(name, payload) {\n    return [\n        27 /* Messages.Type.CustomEvent */,\n        name,\n        payload,\n    ];\n}\nexport function UserID(id) {\n    return [\n        28 /* Messages.Type.UserID */,\n        id,\n    ];\n}\nexport function UserAnonymousID(id) {\n    return [\n        29 /* Messages.Type.UserAnonymousID */,\n        id,\n    ];\n}\nexport function Metadata(key, value) {\n    return [\n        30 /* Messages.Type.Metadata */,\n        key,\n        value,\n    ];\n}\nexport function CSSInsertRule(id, rule, index) {\n    return [\n        37 /* Messages.Type.CSSInsertRule */,\n        id,\n        rule,\n        index,\n    ];\n}\nexport function CSSDeleteRule(id, index) {\n    return [\n        38 /* Messages.Type.CSSDeleteRule */,\n        id,\n        index,\n    ];\n}\nexport function Fetch(method, url, request, response, status, timestamp, duration) {\n    return [\n        39 /* Messages.Type.Fetch */,\n        method,\n        url,\n        request,\n        response,\n        status,\n        timestamp,\n        duration,\n    ];\n}\nexport function Profiler(name, duration, args, result) {\n    return [\n        40 /* Messages.Type.Profiler */,\n        name,\n        duration,\n        args,\n        result,\n    ];\n}\nexport function OTable(key, value) {\n    return [\n        41 /* Messages.Type.OTable */,\n        key,\n        value,\n    ];\n}\nexport function StateAction(type) {\n    return [\n        42 /* Messages.Type.StateAction */,\n        type,\n    ];\n}\nexport function ReduxDeprecated(action, state, duration) {\n    return [\n        44 /* Messages.Type.ReduxDeprecated */,\n        action,\n        state,\n        duration,\n    ];\n}\nexport function Vuex(mutation, state) {\n    return [\n        45 /* Messages.Type.Vuex */,\n        mutation,\n        state,\n    ];\n}\nexport function MobX(type, payload) {\n    return [\n        46 /* Messages.Type.MobX */,\n        type,\n        payload,\n    ];\n}\nexport function NgRx(action, state, duration) {\n    return [\n        47 /* Messages.Type.NgRx */,\n        action,\n        state,\n        duration,\n    ];\n}\nexport function GraphQLDeprecated(operationKind, operationName, variables, response, duration) {\n    return [\n        48 /* Messages.Type.GraphQLDeprecated */,\n        operationKind,\n        operationName,\n        variables,\n        response,\n        duration,\n    ];\n}\nexport function PerformanceTrack(frames, ticks, totalJSHeapSize, usedJSHeapSize) {\n    return [\n        49 /* Messages.Type.PerformanceTrack */,\n        frames,\n        ticks,\n        totalJSHeapSize,\n        usedJSHeapSize,\n    ];\n}\nexport function StringDict(key, value) {\n    return [\n        50 /* Messages.Type.StringDict */,\n        key,\n        value,\n    ];\n}\nexport function SetNodeAttributeDict(id, nameKey, valueKey) {\n    return [\n        51 /* Messages.Type.SetNodeAttributeDict */,\n        id,\n        nameKey,\n        valueKey,\n    ];\n}\nexport function ResourceTimingDeprecated(timestamp, duration, ttfb, headerSize, encodedBodySize, decodedBodySize, url, initiator) {\n    return [\n        53 /* Messages.Type.ResourceTimingDeprecated */,\n        timestamp,\n        duration,\n        ttfb,\n        headerSize,\n        encodedBodySize,\n        decodedBodySize,\n        url,\n        initiator,\n    ];\n}\nexport function ConnectionInformation(downlink, type) {\n    return [\n        54 /* Messages.Type.ConnectionInformation */,\n        downlink,\n        type,\n    ];\n}\nexport function SetPageVisibility(hidden) {\n    return [\n        55 /* Messages.Type.SetPageVisibility */,\n        hidden,\n    ];\n}\nexport function LoadFontFace(parentID, family, source, descriptors) {\n    return [\n        57 /* Messages.Type.LoadFontFace */,\n        parentID,\n        family,\n        source,\n        descriptors,\n    ];\n}\nexport function SetNodeFocus(id) {\n    return [\n        58 /* Messages.Type.SetNodeFocus */,\n        id,\n    ];\n}\nexport function LongTask(timestamp, duration, context, containerType, containerSrc, containerId, containerName) {\n    return [\n        59 /* Messages.Type.LongTask */,\n        timestamp,\n        duration,\n        context,\n        containerType,\n        containerSrc,\n        containerId,\n        containerName,\n    ];\n}\nexport function SetNodeAttributeURLBased(id, name, value, baseURL) {\n    return [\n        60 /* Messages.Type.SetNodeAttributeURLBased */,\n        id,\n        name,\n        value,\n        baseURL,\n    ];\n}\nexport function SetCSSDataURLBased(id, data, baseURL) {\n    return [\n        61 /* Messages.Type.SetCSSDataURLBased */,\n        id,\n        data,\n        baseURL,\n    ];\n}\nexport function TechnicalInfo(type, value) {\n    return [\n        63 /* Messages.Type.TechnicalInfo */,\n        type,\n        value,\n    ];\n}\nexport function CustomIssue(name, payload) {\n    return [\n        64 /* Messages.Type.CustomIssue */,\n        name,\n        payload,\n    ];\n}\nexport function CSSInsertRuleURLBased(id, rule, index, baseURL) {\n    return [\n        67 /* Messages.Type.CSSInsertRuleURLBased */,\n        id,\n        rule,\n        index,\n        baseURL,\n    ];\n}\nexport function MouseClick(id, hesitationTime, label, selector, normalizedX, normalizedY) {\n    return [\n        68 /* Messages.Type.MouseClick */,\n        id,\n        hesitationTime,\n        label,\n        selector,\n        normalizedX,\n        normalizedY,\n    ];\n}\nexport function MouseClickDeprecated(id, hesitationTime, label, selector) {\n    return [\n        69 /* Messages.Type.MouseClickDeprecated */,\n        id,\n        hesitationTime,\n        label,\n        selector,\n    ];\n}\nexport function CreateIFrameDocument(frameID, id) {\n    return [\n        70 /* Messages.Type.CreateIFrameDocument */,\n        frameID,\n        id,\n    ];\n}\nexport function AdoptedSSReplaceURLBased(sheetID, text, baseURL) {\n    return [\n        71 /* Messages.Type.AdoptedSSReplaceURLBased */,\n        sheetID,\n        text,\n        baseURL,\n    ];\n}\nexport function AdoptedSSInsertRuleURLBased(sheetID, rule, index, baseURL) {\n    return [\n        73 /* Messages.Type.AdoptedSSInsertRuleURLBased */,\n        sheetID,\n        rule,\n        index,\n        baseURL,\n    ];\n}\nexport function AdoptedSSDeleteRule(sheetID, index) {\n    return [\n        75 /* Messages.Type.AdoptedSSDeleteRule */,\n        sheetID,\n        index,\n    ];\n}\nexport function AdoptedSSAddOwner(sheetID, id) {\n    return [\n        76 /* Messages.Type.AdoptedSSAddOwner */,\n        sheetID,\n        id,\n    ];\n}\nexport function AdoptedSSRemoveOwner(sheetID, id) {\n    return [\n        77 /* Messages.Type.AdoptedSSRemoveOwner */,\n        sheetID,\n        id,\n    ];\n}\nexport function JSException(name, message, payload, metadata) {\n    return [\n        78 /* Messages.Type.JSException */,\n        name,\n        message,\n        payload,\n        metadata,\n    ];\n}\nexport function Zustand(mutation, state) {\n    return [\n        79 /* Messages.Type.Zustand */,\n        mutation,\n        state,\n    ];\n}\nexport function BatchMetadata(version, pageNo, firstIndex, timestamp, location) {\n    return [\n        81 /* Messages.Type.BatchMetadata */,\n        version,\n        pageNo,\n        firstIndex,\n        timestamp,\n        location,\n    ];\n}\nexport function PartitionedMessage(partNo, partTotal) {\n    return [\n        82 /* Messages.Type.PartitionedMessage */,\n        partNo,\n        partTotal,\n    ];\n}\nexport function NetworkRequest(type, method, url, request, response, status, timestamp, duration, transferredBodySize) {\n    return [\n        83 /* Messages.Type.NetworkRequest */,\n        type,\n        method,\n        url,\n        request,\n        response,\n        status,\n        timestamp,\n        duration,\n        transferredBodySize,\n    ];\n}\nexport function WSChannel(chType, channelName, data, timestamp, dir, messageType) {\n    return [\n        84 /* Messages.Type.WSChannel */,\n        chType,\n        channelName,\n        data,\n        timestamp,\n        dir,\n        messageType,\n    ];\n}\nexport function InputChange(id, value, valueMasked, label, hesitationTime, inputDuration) {\n    return [\n        112 /* Messages.Type.InputChange */,\n        id,\n        value,\n        valueMasked,\n        label,\n        hesitationTime,\n        inputDuration,\n    ];\n}\nexport function SelectionChange(selectionStart, selectionEnd, selection) {\n    return [\n        113 /* Messages.Type.SelectionChange */,\n        selectionStart,\n        selectionEnd,\n        selection,\n    ];\n}\nexport function MouseThrashing(timestamp) {\n    return [\n        114 /* Messages.Type.MouseThrashing */,\n        timestamp,\n    ];\n}\nexport function UnbindNodes(totalRemovedPercent) {\n    return [\n        115 /* Messages.Type.UnbindNodes */,\n        totalRemovedPercent,\n    ];\n}\nexport function ResourceTiming(timestamp, duration, ttfb, headerSize, encodedBodySize, decodedBodySize, url, initiator, transferredSize, cached) {\n    return [\n        116 /* Messages.Type.ResourceTiming */,\n        timestamp,\n        duration,\n        ttfb,\n        headerSize,\n        encodedBodySize,\n        decodedBodySize,\n        url,\n        initiator,\n        transferredSize,\n        cached,\n    ];\n}\nexport function TabChange(tabId) {\n    return [\n        117 /* Messages.Type.TabChange */,\n        tabId,\n    ];\n}\nexport function TabData(tabId) {\n    return [\n        118 /* Messages.Type.TabData */,\n        tabId,\n    ];\n}\nexport function CanvasNode(nodeId, timestamp) {\n    return [\n        119 /* Messages.Type.CanvasNode */,\n        nodeId,\n        timestamp,\n    ];\n}\nexport function TagTrigger(tagId) {\n    return [\n        120 /* Messages.Type.TagTrigger */,\n        tagId,\n    ];\n}\nexport function Redux(action, state, duration, actionTime) {\n    return [\n        121 /* Messages.Type.Redux */,\n        action,\n        state,\n        duration,\n        actionTime,\n    ];\n}\nexport function SetPageLocation(url, referrer, navigationStart, documentTitle) {\n    return [\n        122 /* Messages.Type.SetPageLocation */,\n        url,\n        referrer,\n        navigationStart,\n        documentTitle,\n    ];\n}\nexport function GraphQL(operationKind, operationName, variables, response, duration) {\n    return [\n        123 /* Messages.Type.GraphQL */,\n        operationKind,\n        operationName,\n        variables,\n        response,\n        duration,\n    ];\n}\n", "import { IN_BROWSER } from '../utils.js';\nimport { PerformanceTrack } from '../app/messages.gen.js';\nconst perf = IN_BROWSER && 'performance' in window && 'memory' in performance // works in Chrome only\n    ? performance\n    : { memory: {} };\nexport const deviceMemory = IN_BROWSER ? (navigator.deviceMemory || 0) * 1024 : 0;\nexport const jsHeapSizeLimit = perf.memory.jsHeapSizeLimit || 0;\nexport default function (app, opts) {\n    const options = Object.assign({\n        capturePerformance: true,\n    }, opts);\n    if (!options.capturePerformance) {\n        return;\n    }\n    let frames;\n    let ticks;\n    const nextFrame = () => {\n        if (frames === undefined || frames === -1) {\n            return;\n        }\n        frames++;\n        requestAnimationFrame(nextFrame);\n    };\n    app.ticker.attach(() => {\n        if (ticks === undefined || ticks === -1) {\n            return;\n        }\n        ticks++;\n    }, 0, false);\n    const sendPerformanceTrack = () => {\n        if (frames === undefined || ticks === undefined) {\n            return;\n        }\n        app.send(PerformanceTrack(frames, ticks, perf.memory.totalJSHeapSize || 0, perf.memory.usedJSHeapSize || 0));\n        ticks = frames = document.hidden ? -1 : 0;\n    };\n    app.attachStartCallback(() => {\n        ticks = frames = -1;\n        sendPerformanceTrack();\n        nextFrame();\n    });\n    app.attachStopCallback(() => {\n        ticks = frames = undefined;\n    });\n    app.ticker.attach(sendPerformanceTrack, 40, false);\n    if (document.hidden !== undefined) {\n        app.attachEventListener(document, 'visibilitychange', sendPerformanceTrack, false, false);\n    }\n}\n", "export const WATCHED_TAGS_KEY = '__or__watched_tags__';\nclass TagWatcher {\n    constructor(sessionStorage, errLog, onTag) {\n        this.sessionStorage = sessionStorage;\n        this.errLog = errLog;\n        this.onTag = onTag;\n        this.intervals = {};\n        this.tags = [];\n        const tags = JSON.parse(sessionStorage.getItem(WATCHED_TAGS_KEY) ?? '[]');\n        this.setTags(tags);\n        this.observer = new IntersectionObserver((entries) => {\n            entries.forEach((entry) => {\n                if (entry.isIntersecting) {\n                    if (entry.target) {\n                        // @ts-ignore\n                        const tag = entry.target.__or_watcher_tagname;\n                        if (tag) {\n                            this.onTagRendered(tag);\n                        }\n                        this.observer.unobserve(entry.target);\n                    }\n                }\n            });\n        });\n    }\n    async fetchTags(ingest, token) {\n        return fetch(`${ingest}/v1/web/tags`, {\n            method: 'GET',\n            headers: {\n                Authorization: `Bearer ${token}`,\n            },\n        })\n            .then((r) => r.json())\n            .then(({ tags }) => {\n            if (tags && tags.length) {\n                this.setTags(tags);\n                const tagString = JSON.stringify(tags);\n                this.sessionStorage.setItem(WATCHED_TAGS_KEY, tagString || '');\n            }\n        })\n            .catch((e) => this.errLog(e));\n    }\n    setTags(tags) {\n        this.tags = tags;\n        this.intervals = {};\n        tags.forEach((tag) => {\n            this.intervals[tag.id] = setInterval(() => {\n                const possibleEls = document.querySelectorAll(tag.selector);\n                if (possibleEls.length > 0) {\n                    const el = possibleEls[0];\n                    // @ts-ignore\n                    el.__or_watcher_tagname = tag.id;\n                    this.observer.observe(el);\n                }\n            }, 500);\n        });\n    }\n    onTagRendered(tagId) {\n        if (this.intervals[tagId]) {\n            clearInterval(this.intervals[tagId]);\n        }\n        this.onTag(tagId);\n    }\n    clear() {\n        this.tags.forEach((tag) => {\n            clearInterval(this.intervals[tag.id]);\n        });\n        this.tags = [];\n        this.intervals = {};\n        this.observer.disconnect();\n    }\n}\nexport default TagWatcher;\n", "export const bgStyle = {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    width: '100vw',\n    height: '100vh',\n    background: 'rgba(0, 0, 0, 0.40)',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 999999,\n    fontFamily: `-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"`,\n};\nexport const containerStyle = {\n    display: 'flex',\n    flexDirection: 'column',\n    gap: '2rem',\n    alignItems: 'center',\n    padding: '1.5rem',\n    borderRadius: '2px',\n    border: '1px solid #D9D9D9',\n    background: '#FFF',\n    width: '22rem',\n};\nexport const containerWidgetStyle = {\n    display: 'flex',\n    'flex-direction': 'column',\n    gap: 'unset',\n    'align-items': 'center',\n    padding: 'unset',\n    fontFamily: `-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"`,\n    'border-radius': '2px',\n    border: '1px solid #D9D9D9',\n    background: 'rgba(255, 255, 255, 0.75)',\n    width: '22rem',\n};\nexport const titleStyle = {\n    fontFamily: 'Verdana, sans-serif',\n    fontSize: '1.25rem',\n    fontStyle: 'normal',\n    fontWeight: '500',\n    lineHeight: '1.75rem',\n    color: 'rgba(0, 0, 0, 0.85)',\n};\nexport const descriptionStyle = {\n    borderTop: '1px solid rgba(0, 0, 0, 0.06)',\n    borderBottom: '1px solid rgba(0, 0, 0, 0.06)',\n    padding: '1.25rem 0rem',\n    color: 'rgba(0, 0, 0, 0.85)',\n    fontFamily: 'Verdana, sans-serif',\n    fontSize: '13px',\n    fontStyle: 'normal',\n    fontWeight: '400',\n    lineHeight: 'auto',\n    whiteSpace: 'pre-wrap',\n};\nexport const noticeStyle = {\n    color: 'rgba(0, 0, 0, 0.85)',\n    fontFamily: 'Verdana, sans-serif',\n    fontSize: '0.875rem',\n    fontStyle: 'normal',\n    fontWeight: '400',\n    lineHeight: '1.375rem',\n};\nexport const buttonStyle = {\n    display: 'flex',\n    padding: '0.4rem 0.9375rem',\n    justifyContent: 'center',\n    alignItems: 'center',\n    gap: '0.625rem',\n    borderRadius: '0.25rem',\n    border: '1px solid #394EFF',\n    background: '#394EFF',\n    boxShadow: '0px 2px 0px 0px rgba(0, 0, 0, 0.04)',\n    color: '#FFF',\n    textAlign: 'center',\n    fontFamily: 'Verdana, sans-serif',\n    fontSize: '1rem',\n    fontStyle: 'normal',\n    fontWeight: '500',\n    lineHeight: '1.5rem',\n    cursor: 'pointer',\n};\nexport const sectionTitleStyle = {\n    fontFamily: 'Verdana, sans-serif',\n    fontSize: '13px',\n    fontWeight: '500',\n    lineHeight: 'auto',\n    display: 'flex',\n    justifyContent: 'space-between',\n    width: '100%',\n    cursor: 'pointer',\n};\nexport const contentStyle = {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'flex-start',\n    gap: '0.625rem',\n    fontSize: '13px',\n    lineHeight: 'auto',\n};\n// New widget styles\nexport const titleWidgetStyle = {\n    padding: '0.5rem',\n    gap: '0.5rem',\n    fontFamily: 'Verdana, sans-serif',\n    fontSize: '16px',\n    fontStyle: 'normal',\n    fontWeight: '500',\n    lineHeight: 'auto',\n    color: 'white',\n    display: 'flex',\n    alignItems: 'center',\n    width: '100%',\n    borderRadius: '2px',\n    background: 'rgba(0, 0, 0, 0.75)',\n    boxSizing: 'border-box',\n};\nexport const descriptionWidgetStyle = {\n    boxSizing: 'border-box',\n    display: 'block',\n    width: '100%',\n    borderBottom: '1px solid #D9D9D9',\n    background: '#FFF',\n    padding: '0.65rem',\n    alignSelf: 'stretch',\n    color: '#000',\n    fontFamily: 'Verdana, sans-serif',\n    // fontSize: '0.875rem',\n    fontStyle: 'normal',\n    fontWeight: '400',\n    // lineHeight: '1.375rem',\n};\nexport const endSectionStyle = {\n    ...descriptionWidgetStyle,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    gap: '0.625rem',\n};\nexport const symbolIcon = {\n    fontSize: '1.25rem',\n    fontWeight: '500',\n    cursor: 'pointer',\n    color: '#394EFF',\n};\nexport const buttonWidgetStyle = {\n    display: 'flex',\n    padding: '0.4rem 0.9375rem',\n    justifyContent: 'center',\n    alignItems: 'center',\n    gap: '0.625rem',\n    borderRadius: '0.25rem',\n    border: '1px solid #394EFF',\n    background: '#394EFF',\n    boxShadow: '0px 2px 0px 0px rgba(0, 0, 0, 0.04)',\n    color: '#FFF',\n    textAlign: 'center',\n    fontFamily: 'Verdana, sans-serif',\n    fontSize: '1rem',\n    fontStyle: 'normal',\n    fontWeight: '500',\n    lineHeight: '1.5rem',\n    width: '100%',\n    boxSizing: 'border-box',\n    cursor: 'pointer',\n};\nexport const stopWidgetStyle = {\n    marginTop: '1rem',\n    marginBottom: '1rem',\n    cursor: 'pointer',\n    display: 'block',\n    fontWeight: '500',\n    fontSize: '13px!important',\n    lineHeight: 'auto',\n};\nexport const paginationStyle = {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    gap: '1rem',\n    padding: '0.5rem',\n    width: '100%',\n    boxSizing: 'border-box',\n};\nexport const taskNumberActive = {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: '6.25em',\n    outline: '1px solid #394EFF',\n    fontSize: '13px',\n    height: '24px',\n    width: '24px',\n};\nexport const taskNumberDone = {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: '6.25em',\n    outline: '1px solid #D2DFFF',\n    boxShadow: '0px 2px 0px 0px rgba(0, 0, 0, 0.04)',\n    background: '#D2DFFF',\n    fontSize: '13px',\n    height: '24px',\n    width: '24px',\n};\nexport const taskDescriptionCard = {\n    borderRadius: '0.375rem',\n    border: '1px solid rgba(0, 0, 0, 0.06)',\n    background: '#F5F7FF',\n    boxShadow: '0px 2px 0px 0px rgba(0, 0, 0, 0.04)',\n    display: 'flex',\n    flexDirection: 'column',\n    padding: '0.625rem 0.9375rem',\n    gap: '0.5rem',\n    alignSelf: 'stretch',\n};\nexport const taskTextStyle = {\n    fontWeight: 'bold',\n};\nexport const taskDescriptionStyle = {\n    fontSize: '13px',\n    lineHeight: 'auto',\n};\nexport const taskButtonStyle = {\n    marginRight: '0.5rem',\n    cursor: 'pointer',\n    color: '#394EFF',\n    textAlign: 'center',\n    fontFamily: 'Verdana, sans-serif',\n    fontSize: '13px',\n    fontStyle: 'normal',\n    fontWeight: '500',\n    lineHeight: 'auto',\n};\nexport const taskButtonBorderedStyle = {\n    ...taskButtonStyle,\n    display: 'flex',\n    padding: '0.25rem 0.9375rem',\n    justifyContent: 'center',\n    alignItems: 'center',\n    gap: '0.5rem',\n    borderRadius: '0.25rem',\n    border: '1px solid #394EFF',\n};\nexport const taskButtonsRow = {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    width: '100%',\n    boxSizing: 'border-box',\n};\nexport const spinnerStyles = {\n    border: '4px solid rgba(255, 255, 255, 0.4)',\n    width: '16px',\n    height: '16px',\n    borderRadius: '50%',\n    borderLeftColor: '#fff',\n    animation: 'spin 0.5s linear infinite',\n};\n", "export const Quality = {\n    Standard: { width: 1280, height: 720 },\n    High: { width: 1920, height: 1080 },\n};\nexport default class Recorder {\n    constructor(app) {\n        this.app = app;\n        this.mediaRecorder = null;\n        this.recordedChunks = [];\n        this.stream = null;\n        this.recStartTs = null;\n    }\n    async startRecording(fps, quality, micReq, camReq) {\n        this.recStartTs = this.app.timestamp();\n        const videoConstraints = quality;\n        try {\n            this.stream = await navigator.mediaDevices.getUserMedia({\n                video: camReq ? { ...videoConstraints, frameRate: { ideal: fps } } : false,\n                audio: micReq,\n            });\n            this.mediaRecorder = new MediaRecorder(this.stream, {\n                mimeType: 'video/webm;codecs=vp9',\n            });\n            this.recordedChunks = [];\n            this.mediaRecorder.ondataavailable = (event) => {\n                if (event.data.size > 0) {\n                    this.recordedChunks.push(event.data);\n                }\n            };\n            this.mediaRecorder.start();\n        }\n        catch (error) {\n            console.error(error);\n        }\n    }\n    async stopRecording() {\n        return new Promise((resolve) => {\n            if (!this.mediaRecorder)\n                return;\n            this.mediaRecorder.onstop = () => {\n                const blob = new Blob(this.recordedChunks, {\n                    type: 'video/webm',\n                });\n                resolve(blob);\n            };\n            this.mediaRecorder.stop();\n        });\n    }\n    async sendToAPI() {\n        const blob = await this.stopRecording();\n        // const formData = new FormData()\n        // formData.append('file', blob, 'record.webm')\n        // formData.append('start', this.recStartTs?.toString() ?? '')\n        return fetch(`${this.app.options.ingestPoint}/v1/web/uxt/upload-url`, {\n            headers: {\n                Authorization: `Bearer ${this.app.session.getSessionToken()}`,\n            },\n        })\n            .then((r) => {\n            if (r.ok) {\n                return r.json();\n            }\n            else {\n                throw new Error('Failed to get upload url');\n            }\n        })\n            .then(({ url }) => {\n            return fetch(url, {\n                method: 'PUT',\n                headers: {\n                    'Content-Type': 'video/webm',\n                },\n                body: blob,\n            });\n        })\n            .catch(console.error)\n            .finally(() => {\n            this.discard();\n        });\n    }\n    async saveToFile(fileName = 'recorded-video.webm') {\n        const blob = await this.stopRecording();\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.style.display = 'none';\n        a.href = url;\n        a.download = fileName;\n        document.body.appendChild(a);\n        a.click();\n        window.URL.revokeObjectURL(url);\n        document.body.removeChild(a);\n    }\n    discard() {\n        this.mediaRecorder?.stop();\n        this.stream?.getTracks().forEach((track) => track.stop());\n    }\n}\n", "// @ts-nocheck\nexport default function attachDND(element, dragTarget) {\n    dragTarget.onmousedown = function (event) {\n        const clientRect = element.getBoundingClientRect();\n        const shiftX = event.clientX - clientRect.left;\n        const shiftY = event.clientY - clientRect.top;\n        element.style.position = 'fixed';\n        element.style.zIndex = 99999999999999;\n        moveAt(event.pageX, event.pageY);\n        function moveAt(pageX, pageY) {\n            let leftC = pageX - shiftX;\n            let topC = pageY - shiftY;\n            if (leftC <= 5)\n                leftC = 5;\n            if (topC <= 5)\n                topC = 5;\n            if (leftC >= window.innerWidth - clientRect.width)\n                leftC = window.innerWidth - clientRect.width;\n            if (topC >= window.innerHeight - clientRect.height)\n                topC = window.innerHeight - clientRect.height;\n            element.style.left = `${leftC}px`;\n            element.style.top = `${topC}px`;\n        }\n        function onMouseMove(event) {\n            moveAt(event.pageX, event.pageY);\n        }\n        document.addEventListener('mousemove', onMouseMove);\n        const clearAll = () => {\n            document.removeEventListener('mousemove', onMouseMove);\n            document.removeEventListener('mouseup', clearAll);\n        };\n        document.addEventListener('mouseup', clearAll);\n    };\n    dragTarget.ondragstart = function () {\n        return false;\n    };\n}\n", "import { spinnerStyles } from './styles.js';\nexport function generateGrid() {\n    const grid = document.createElement('div');\n    grid.className = 'grid';\n    for (let i = 0; i < 16; i++) {\n        const cell = document.createElement('div');\n        Object.assign(cell.style, {\n            width: '2px',\n            height: '2px',\n            borderRadius: '10px',\n            background: 'white',\n        });\n        cell.className = 'cell';\n        grid.appendChild(cell);\n    }\n    Object.assign(grid.style, {\n        display: 'grid',\n        gridTemplateColumns: 'repeat(4, 1fr)',\n        gridTemplateRows: 'repeat(4, 1fr)',\n        gap: '2px',\n        cursor: 'grab',\n    });\n    return grid;\n}\nexport function generateChevron() {\n    const triangle = document.createElement('div');\n    Object.assign(triangle.style, {\n        width: '0',\n        height: '0',\n        borderLeft: '7px solid transparent',\n        borderRight: '7px solid transparent',\n        borderBottom: '7px solid white',\n    });\n    const container = document.createElement('div');\n    container.appendChild(triangle);\n    Object.assign(container.style, {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        width: '16px',\n        height: '16px',\n        cursor: 'pointer',\n        marginLeft: 'auto',\n        transform: 'rotate(180deg)',\n    });\n    return container;\n}\nexport function addKeyframes() {\n    const styleSheet = document.createElement('style');\n    styleSheet.type = 'text/css';\n    styleSheet.innerText = `@keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n    }`;\n    document.head.appendChild(styleSheet);\n}\nexport function createSpinner() {\n    addKeyframes();\n    const spinner = document.createElement('div');\n    spinner.classList.add('spinner');\n    Object.assign(spinner.style, spinnerStyles);\n    return spinner;\n}\nexport function createElement(tag, className, styles, textContent, id) {\n    const element = document.createElement(tag);\n    element.className = className;\n    Object.assign(element.style, styles);\n    if (textContent) {\n        element.textContent = textContent;\n    }\n    if (id) {\n        element.id = id;\n    }\n    return element;\n}\nexport const TEST_START = 'or_uxt_test_start';\nexport const TASK_IND = 'or_uxt_task_index';\nexport const SESSION_ID = 'or_uxt_session_id';\nexport const TEST_ID = 'or_uxt_test_id';\n", "import { TEST_START, TASK_IND, SESSION_ID } from './utils.js';\nexport default class SignalManager {\n    constructor(ingestPoint, getTimestamp, token, testId, storageKey, setStorageKey, removeStorageKey, getStorageKey, getSessionId) {\n        this.ingestPoint = ingestPoint;\n        this.getTimestamp = getTimestamp;\n        this.token = token;\n        this.testId = testId;\n        this.storageKey = storageKey;\n        this.setStorageKey = setStorageKey;\n        this.removeStorageKey = removeStorageKey;\n        this.getStorageKey = getStorageKey;\n        this.getSessionId = getSessionId;\n        this.durations = {\n            testStart: 0,\n            tasks: [],\n        };\n        this.getDurations = () => {\n            return this.durations;\n        };\n        this.setDurations = (durations) => {\n            this.durations.testStart = durations.testStart;\n            this.durations.tasks = durations.tasks;\n        };\n        this.signalTask = (taskId, status, taskAnswer) => {\n            if (!taskId)\n                return console.error('User Testing: No Task ID Given');\n            const taskStart = this.durations.tasks.find((t) => t.taskId === taskId);\n            const timestamp = this.getTimestamp();\n            const duration = taskStart ? timestamp - taskStart.started : 0;\n            return fetch(`${this.ingestPoint}/v1/web/uxt/signals/task`, {\n                method: 'POST',\n                headers: {\n                    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n                    Authorization: `Bearer ${this.token}`,\n                },\n                body: JSON.stringify({\n                    testId: this.testId,\n                    taskId,\n                    status,\n                    duration,\n                    timestamp,\n                    taskAnswer,\n                }),\n            });\n        };\n        this.signalTest = (status) => {\n            const timestamp = this.getTimestamp();\n            if (status === 'begin' && this.testId) {\n                const sessionId = this.getSessionId();\n                this.setStorageKey(SESSION_ID, sessionId);\n                this.setStorageKey(this.storageKey, this.testId.toString());\n                this.setStorageKey(TEST_START, timestamp.toString());\n            }\n            else {\n                this.removeStorageKey(this.storageKey);\n                this.removeStorageKey(TASK_IND);\n                this.removeStorageKey(TEST_START);\n            }\n            const start = this.durations.testStart || timestamp;\n            const duration = timestamp - start;\n            return fetch(`${this.ingestPoint}/v1/web/uxt/signals/test`, {\n                method: 'POST',\n                headers: {\n                    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n                    Authorization: `Bearer ${this.token}`,\n                },\n                body: JSON.stringify({\n                    testId: this.testId,\n                    status,\n                    duration,\n                    timestamp,\n                }),\n            });\n        };\n        const possibleStart = this.getStorageKey(TEST_START);\n        if (possibleStart) {\n            this.durations.testStart = parseInt(possibleStart, 10);\n        }\n    }\n}\n", "import * as styles from './styles.js';\nimport Recorder, { Quality } from './recorder.js';\nimport attachDND from './dnd.js';\nimport { generateGrid, generateChevron, createSpinner, createElement, TEST_START, TASK_IND, SESSION_ID, TEST_ID, } from './utils.js';\nimport SignalManager from './SignalManager.js';\nexport default class UserTestManager {\n    constructor(app, storageKey) {\n        this.app = app;\n        this.storageKey = storageKey;\n        this.bg = createElement('div', 'bg', styles.bgStyle, undefined, '__or_ut_bg');\n        this.container = createElement('div', 'container', styles.containerStyle, undefined, '__or_ut_ct');\n        this.widgetGuidelinesVisible = true;\n        this.widgetTasksVisible = false;\n        this.widgetVisible = true;\n        this.isActive = false;\n        this.descriptionSection = null;\n        this.taskSection = null;\n        this.endSection = null;\n        this.stopButton = null;\n        this.stopButtonContainer = null;\n        this.test = null;\n        this.testId = null;\n        this.signalManager = null;\n        this.getTest = (id, token, inProgress) => {\n            this.testId = id;\n            const ingest = this.app.options.ingestPoint;\n            return fetch(`${ingest}/v1/web/uxt/test/${id}`, {\n                headers: {\n                    Authorization: `Bearer ${token}`,\n                },\n            })\n                .then((res) => res.json())\n                .then(({ test }) => {\n                this.isActive = true;\n                this.test = test;\n                this.signalManager = new SignalManager(this.app.options.ingestPoint, () => this.app.timestamp(), token, id, this.storageKey, (k, v) => this.app.localStorage.setItem(k, v), (k) => this.app.localStorage.removeItem(k), (k) => this.app.localStorage.getItem(k), () => this.app.getSessionID());\n                this.createGreeting(test.title, test.reqMic, test.reqCamera);\n                if (inProgress) {\n                    if (test.reqMic || test.reqCamera) {\n                        void this.userRecorder.startRecording(30, Quality.Standard, test.reqMic, test.reqCamera);\n                    }\n                    this.showWidget(test.description, test.tasks, true);\n                    this.showTaskSection();\n                }\n            })\n                .then(() => id)\n                .catch((err) => {\n                console.log('OR: Error fetching test', err);\n            });\n        };\n        this.hideTaskSection = () => false;\n        this.showTaskSection = () => true;\n        this.collapseWidget = () => false;\n        this.removeGreeting = () => false;\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        this.toggleDescriptionVisibility = () => { };\n        this.currentTaskIndex = 0;\n        this.userRecorder = new Recorder(app);\n        const sessionId = this.app.getSessionID();\n        const savedSessionId = this.app.localStorage.getItem(SESSION_ID);\n        if (sessionId !== savedSessionId) {\n            this.app.localStorage.removeItem(this.storageKey);\n            this.app.localStorage.removeItem(SESSION_ID);\n            this.app.localStorage.removeItem(TEST_ID);\n            this.app.localStorage.removeItem(TASK_IND);\n            this.app.localStorage.removeItem(TEST_START);\n        }\n        const taskIndex = this.app.localStorage.getItem(TASK_IND);\n        if (taskIndex) {\n            this.currentTaskIndex = parseInt(taskIndex, 10);\n        }\n    }\n    getTestId() {\n        return this.testId;\n    }\n    createGreeting(title, micRequired, cameraRequired) {\n        const titleElement = createElement('div', 'title', styles.titleStyle, title);\n        const descriptionElement = createElement('div', 'description', styles.descriptionStyle, `Welcome, you're here to help us improve, not to be judged. Your insights matter!\\n\n📹 We're recording this browser tab to learn from your experience.\n🎤 Please enable mic and camera if asked, to give us a complete picture.`);\n        const buttonElement = createElement('div', 'button', styles.buttonStyle, 'Read guidelines to begin');\n        this.removeGreeting = () => {\n            // this.container.innerHTML = ''\n            if (micRequired || cameraRequired) {\n                void this.userRecorder.startRecording(30, Quality.Standard, micRequired, cameraRequired);\n            }\n            this.container.removeChild(buttonElement);\n            this.container.removeChild(descriptionElement);\n            this.container.removeChild(titleElement);\n            return false;\n        };\n        buttonElement.onclick = () => {\n            this.removeGreeting();\n            const durations = this.signalManager?.getDurations();\n            if (durations && this.signalManager) {\n                durations.testStart = this.app.timestamp();\n                this.signalManager.setDurations(durations);\n            }\n            void this.signalManager?.signalTest('begin');\n            this.container.style.fontFamily = `-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"`;\n            Object.assign(this.container.style, styles.containerWidgetStyle);\n            this.showWidget(this.test?.guidelines || '', this.test?.tasks || []);\n        };\n        this.container.append(titleElement, descriptionElement, buttonElement);\n        this.bg.appendChild(this.container);\n        document.body.appendChild(this.bg);\n    }\n    showWidget(guidelines, tasks, inProgress) {\n        this.container.innerHTML = '';\n        Object.assign(this.bg.style, {\n            position: 'fixed',\n            zIndex: 99999999999999,\n            right: '8px',\n            left: 'unset',\n            width: 'fit-content',\n            top: '8px',\n            height: 'fit-content',\n            background: 'unset',\n            display: 'unset',\n            alignItems: 'unset',\n            justifyContent: 'unset',\n        });\n        // Create title section\n        const titleSection = this.createTitleSection();\n        this.container.style.fontFamily = `-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"`;\n        Object.assign(this.container.style, styles.containerWidgetStyle);\n        const descriptionSection = this.createDescriptionSection(guidelines);\n        const tasksSection = this.createTasksSection(tasks);\n        const stopButton = createElement('div', 'stop_bn_or', styles.stopWidgetStyle, 'Abort Session');\n        const stopContainer = createElement('div', 'stop_ct_or', { fontSize: '13px!important' });\n        stopContainer.style.fontSize = '13px';\n        stopContainer.append(stopButton);\n        this.container.append(titleSection, descriptionSection, tasksSection, stopContainer);\n        this.taskSection = tasksSection;\n        this.descriptionSection = descriptionSection;\n        this.stopButton = stopButton;\n        this.stopButtonContainer = stopContainer;\n        stopButton.onclick = () => {\n            this.userRecorder.discard();\n            void this.signalManager?.signalTest('skipped');\n            document.body.removeChild(this.bg);\n            window.close();\n        };\n        if (!inProgress) {\n            this.hideTaskSection();\n        }\n        else {\n            this.toggleDescriptionVisibility();\n        }\n    }\n    createTitleSection() {\n        const title = createElement('div', 'title', styles.titleWidgetStyle);\n        const leftIcon = generateGrid();\n        const titleText = createElement('div', 'title_text', {\n            maxWidth: '19rem',\n            overflow: 'hidden',\n            textOverflow: 'ellipsis',\n            width: '100%',\n            fontSize: 16,\n            lineHeight: 'auto',\n            cursor: 'pointer',\n        }, this.test?.title);\n        const rightIcon = generateChevron();\n        title.append(leftIcon, titleText, rightIcon);\n        const toggleWidget = (isVisible) => {\n            this.widgetVisible = isVisible;\n            this.container.style.fontFamily = `-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"`;\n            Object.assign(this.container.style, this.widgetVisible\n                ? styles.containerWidgetStyle\n                : { border: 'none', background: 'none', padding: 0 });\n            if (this.taskSection) {\n                Object.assign(this.taskSection.style, this.widgetVisible ? styles.descriptionWidgetStyle : { display: 'none' });\n            }\n            if (this.descriptionSection) {\n                Object.assign(this.descriptionSection.style, this.widgetVisible ? styles.descriptionWidgetStyle : { display: 'none' });\n            }\n            if (this.endSection) {\n                Object.assign(this.endSection.style, this.widgetVisible ? styles.descriptionWidgetStyle : { display: 'none' });\n            }\n            if (this.stopButton) {\n                Object.assign(this.stopButton.style, this.widgetVisible ? styles.stopWidgetStyle : { display: 'none' });\n            }\n            return isVisible;\n        };\n        const collapseWidget = () => {\n            Object.assign(rightIcon.style, {\n                transform: this.widgetVisible ? 'rotate(0deg)' : 'rotate(180deg)',\n            });\n            toggleWidget(!this.widgetVisible);\n        };\n        titleText.onclick = collapseWidget;\n        rightIcon.onclick = collapseWidget;\n        attachDND(this.bg, leftIcon);\n        this.collapseWidget = () => toggleWidget(false);\n        return title;\n    }\n    createDescriptionSection(guidelines) {\n        const section = createElement('div', 'description_section_or', styles.descriptionWidgetStyle);\n        const titleContainer = createElement('div', 'description_s_title_or', styles.sectionTitleStyle);\n        const title = createElement('div', 'title', {\n            fontSize: 13,\n            fontWeight: 500,\n            lineHeight: 'auto',\n        }, 'Introduction & Guidelines');\n        const icon = createElement('div', 'icon', styles.symbolIcon, '-');\n        const content = createElement('div', 'content', styles.contentStyle);\n        const descriptionC = createElement('div', 'text_description', {\n            maxHeight: '250px',\n            overflowY: 'auto',\n            whiteSpace: 'pre-wrap',\n            fontSize: 13,\n            color: '#454545',\n            lineHeight: 'auto',\n        });\n        descriptionC.innerHTML = guidelines;\n        const button = createElement('div', 'button_begin_or', styles.buttonWidgetStyle, 'Begin Test');\n        titleContainer.append(title, icon);\n        content.append(descriptionC, button);\n        section.append(titleContainer, content);\n        const toggleDescriptionVisibility = () => {\n            this.widgetGuidelinesVisible = !this.widgetGuidelinesVisible;\n            icon.textContent = this.widgetGuidelinesVisible ? '-' : '+';\n            Object.assign(content.style, this.widgetGuidelinesVisible ? styles.contentStyle : { display: 'none' });\n        };\n        titleContainer.onclick = toggleDescriptionVisibility;\n        this.toggleDescriptionVisibility = () => {\n            this.widgetGuidelinesVisible = false;\n            icon.textContent = this.widgetGuidelinesVisible ? '-' : '+';\n            Object.assign(content.style, this.widgetGuidelinesVisible ? styles.contentStyle : { display: 'none' });\n            content.removeChild(button);\n        };\n        button.onclick = () => {\n            toggleDescriptionVisibility();\n            if (this.test) {\n                const durations = this.signalManager?.getDurations();\n                const taskDurationInd = durations\n                    ? durations.tasks.findIndex((t) => this.test && t.taskId === this.test.tasks[0].task_id)\n                    : null;\n                if (durations && taskDurationInd === -1) {\n                    durations.tasks.push({\n                        taskId: this.test.tasks[0].task_id,\n                        started: this.app.timestamp(),\n                    });\n                    this.signalManager?.setDurations(durations);\n                }\n                void this.signalManager?.signalTask(this.test.tasks[0].task_id, 'begin');\n            }\n            this.showTaskSection();\n            content.removeChild(button);\n        };\n        return section;\n    }\n    createTasksSection(tasks) {\n        this.container.style.fontFamily = `-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"`;\n        Object.assign(this.container.style, styles.containerWidgetStyle);\n        const section = createElement('div', 'task_section_or', styles.descriptionWidgetStyle);\n        const titleContainer = createElement('div', 'description_t_title_or', styles.sectionTitleStyle);\n        const title = createElement('div', 'title', {\n            fontSize: '13px',\n            fontWeight: '500',\n            lineHeight: 'auto',\n        }, 'Tasks');\n        const icon = createElement('div', 'icon', styles.symbolIcon, '-');\n        const content = createElement('div', 'content', styles.contentStyle);\n        const pagination = createElement('div', 'pagination', styles.paginationStyle);\n        // const leftArrow = createElement('span', 'leftArrow', {}, '<')\n        // const rightArrow = createElement('span', 'rightArrow', {}, '>')\n        const taskCard = createElement('div', 'taskCard', styles.taskDescriptionCard);\n        const taskText = createElement('div', 'taskText', styles.taskTextStyle);\n        const taskDescription = createElement('div', 'taskDescription', styles.taskDescriptionStyle);\n        const taskButtons = createElement('div', 'taskButtons', styles.taskButtonsRow);\n        const inputTitle = createElement('div', 'taskText', styles.taskTextStyle);\n        inputTitle.textContent = 'Your answer';\n        const inputArea = createElement('textarea', 'taskDescription', {\n            resize: 'vertical',\n        });\n        const inputContainer = createElement('div', 'inputArea', styles.taskDescriptionCard);\n        inputContainer.append(inputTitle, inputArea);\n        const closePanelButton = createElement('div', 'closePanelButton', styles.taskButtonStyle, 'Collapse Panel');\n        const nextButton = createElement('div', 'nextButton', styles.taskButtonBorderedStyle, 'Done, Next');\n        titleContainer.append(title, icon);\n        taskCard.append(taskText, taskDescription);\n        taskButtons.append(closePanelButton, nextButton);\n        content.append(pagination, taskCard, inputContainer, taskButtons);\n        section.append(titleContainer, content);\n        const updateTaskContent = () => {\n            const task = tasks[this.currentTaskIndex];\n            taskText.textContent = task.title;\n            taskDescription.textContent = task.description;\n            if (task.allow_typing) {\n                inputContainer.style.display = 'flex';\n            }\n            else {\n                inputContainer.style.display = 'none';\n            }\n        };\n        // pagination.appendChild(leftArrow)\n        tasks.forEach((_, index) => {\n            const pageNumber = createElement('span', `or_task_${index}`, {\n                outline: '1px solid #efefef',\n                fontSize: '13px',\n                height: '24px',\n                width: '24px',\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                justifyContent: 'center',\n                borderRadius: '6.25em',\n            }, (index + 1).toString());\n            pageNumber.id = `or_task_${index}`;\n            pagination.append(pageNumber);\n        });\n        // pagination.appendChild(rightArrow)\n        const toggleTasksVisibility = () => {\n            this.widgetTasksVisible = !this.widgetTasksVisible;\n            icon.textContent = this.widgetTasksVisible ? '-' : '+';\n            Object.assign(content.style, this.widgetTasksVisible ? styles.contentStyle : { display: 'none' });\n        };\n        this.hideTaskSection = () => {\n            icon.textContent = '+';\n            Object.assign(content.style, {\n                display: 'none',\n            });\n            this.widgetTasksVisible = false;\n            return false;\n        };\n        this.showTaskSection = () => {\n            icon.textContent = '-';\n            Object.assign(content.style, styles.contentStyle);\n            this.widgetTasksVisible = true;\n            return true;\n        };\n        const highlightActive = () => {\n            const activeTaskEl = document.getElementById(`or_task_${this.currentTaskIndex}`);\n            if (activeTaskEl) {\n                Object.assign(activeTaskEl.style, styles.taskNumberActive);\n            }\n            for (let i = 0; i < this.currentTaskIndex; i++) {\n                const taskEl = document.getElementById(`or_task_${i}`);\n                if (taskEl) {\n                    Object.assign(taskEl.style, styles.taskNumberDone);\n                }\n            }\n        };\n        titleContainer.onclick = toggleTasksVisibility;\n        closePanelButton.onclick = this.collapseWidget;\n        nextButton.onclick = () => {\n            const textAnswer = tasks[this.currentTaskIndex].allow_typing ? inputArea.value : undefined;\n            inputArea.value = '';\n            void this.signalManager?.signalTask(tasks[this.currentTaskIndex].task_id, 'done', textAnswer);\n            if (this.currentTaskIndex < tasks.length - 1) {\n                this.currentTaskIndex++;\n                updateTaskContent();\n                const durations = this.signalManager?.getDurations();\n                if (durations &&\n                    durations.tasks.findIndex((t) => t.taskId === tasks[this.currentTaskIndex].task_id) === -1) {\n                    durations.tasks.push({\n                        taskId: tasks[this.currentTaskIndex].task_id,\n                        started: this.app.timestamp(),\n                    });\n                    this.signalManager?.setDurations(durations);\n                }\n                void this.signalManager?.signalTask(tasks[this.currentTaskIndex].task_id, 'begin');\n                highlightActive();\n            }\n            else {\n                this.showEndSection();\n            }\n            this.app.localStorage.setItem('or_uxt_task_index', this.currentTaskIndex.toString());\n        };\n        setTimeout(() => {\n            const firstTaskEl = document.getElementById('or_task_0');\n            if (firstTaskEl) {\n                Object.assign(firstTaskEl.style, styles.taskNumberActive);\n            }\n            updateTaskContent();\n            highlightActive();\n        }, 1);\n        return section;\n    }\n    showEndSection() {\n        let isLoading = true;\n        void this.signalManager?.signalTest('done');\n        const section = createElement('div', 'end_section_or', styles.endSectionStyle);\n        const title = createElement('div', 'end_title_or', {\n            fontSize: '1.25rem',\n            fontWeight: '500',\n        }, 'Thank you! 👍');\n        const description = createElement('div', 'end_description_or', {}, this.test?.conclusion ??\n            'Thank you for participating in our usability test. Your feedback has been captured and will be used to enhance our website. \\n' +\n                '\\n' +\n                'We appreciate your time and valuable input.');\n        const button = createElement('div', 'end_button_or', styles.buttonWidgetStyle, 'Submitting Feedback');\n        const spinner = createSpinner();\n        button.appendChild(spinner);\n        if (this.test?.reqMic || this.test?.reqCamera) {\n            void this.userRecorder\n                .sendToAPI()\n                .then(() => {\n                button.removeChild(spinner);\n                button.textContent = 'End Session';\n                isLoading = false;\n            })\n                .catch((err) => {\n                console.error(err);\n                button.removeChild(spinner);\n                button.textContent = 'End Session';\n                isLoading = false;\n            });\n        }\n        else {\n            button.removeChild(spinner);\n            button.textContent = 'End Session';\n            isLoading = false;\n        }\n        if (this.taskSection) {\n            this.container.removeChild(this.taskSection);\n        }\n        if (this.descriptionSection) {\n            this.container.removeChild(this.descriptionSection);\n        }\n        if (this.stopButton && this.stopButtonContainer) {\n            this.container.removeChild(this.stopButtonContainer);\n        }\n        button.onclick = () => {\n            if (isLoading)\n                return;\n            window.close();\n            document.body.removeChild(this.bg);\n        };\n        section.append(title, description, button);\n        this.endSection = section;\n        this.container.append(section);\n    }\n}\n", "//@ts-ignore\nexport function isNode(sth) {\n    return !!sth && sth.nodeType != null;\n}\nexport function isSVGElement(node) {\n    return node.namespaceURI === 'http://www.w3.org/2000/svg';\n}\nexport function isElementNode(node) {\n    return node.nodeType === Node.ELEMENT_NODE;\n}\nexport function isCommentNode(node) {\n    return node.nodeType === Node.COMMENT_NODE;\n}\nexport function isTextNode(node) {\n    return node.nodeType === Node.TEXT_NODE;\n}\nexport function isDocument(node) {\n    return node.nodeType === Node.DOCUMENT_NODE;\n}\nexport function isRootNode(node) {\n    return node.nodeType === Node.DOCUMENT_NODE || node.nodeType === Node.DOCUMENT_FRAGMENT_NODE;\n}\nexport function hasTag(el, tagName) {\n    // @ts-ignore\n    return el.localName === tagName;\n}\n", "import { hasTag } from './guards.js';\nimport { CanvasNode } from './messages.gen.js';\nclass CanvasRecorder {\n    constructor(app, options) {\n        this.app = app;\n        this.options = options;\n        this.snapshots = {};\n        this.intervals = [];\n        this.restartTracking = () => {\n            this.clear();\n            this.app.nodes.scanTree(this.captureCanvas);\n        };\n        this.captureCanvas = (node) => {\n            const id = this.app.nodes.getID(node);\n            if (!id || !hasTag(node, 'canvas')) {\n                return;\n            }\n            const isIgnored = this.app.sanitizer.isObscured(id) || this.app.sanitizer.isHidden(id);\n            if (isIgnored || !hasTag(node, 'canvas') || this.snapshots[id]) {\n                return;\n            }\n            const observer = new IntersectionObserver((entries) => {\n                entries.forEach((entry) => {\n                    if (entry.isIntersecting) {\n                        if (entry.target) {\n                            if (this.snapshots[id] && this.snapshots[id].createdAt) {\n                                this.snapshots[id].paused = false;\n                            }\n                            else {\n                                this.recordCanvas(entry.target, id);\n                            }\n                            /**\n                             * We can switch this to start observing when element is in the view\n                             * but otherwise right now we're just pausing when it's not\n                             * just to save some bandwidth and space on backend\n                             * */\n                            // observer.unobserve(entry.target)\n                        }\n                        else {\n                            if (this.snapshots[id]) {\n                                this.snapshots[id].paused = true;\n                            }\n                        }\n                    }\n                });\n            });\n            observer.observe(node);\n        };\n        this.recordCanvas = (node, id) => {\n            const ts = this.app.timestamp();\n            this.snapshots[id] = {\n                images: [],\n                createdAt: ts,\n                paused: false,\n                dummy: document.createElement('canvas'),\n            };\n            const canvasMsg = CanvasNode(id.toString(), ts);\n            this.app.send(canvasMsg);\n            const captureFn = (canvas) => {\n                captureSnapshot(canvas, this.options.quality, this.snapshots[id].dummy, this.options.fixedScaling, this.fileExt, (blob) => {\n                    if (!blob)\n                        return;\n                    this.snapshots[id].images.push({ id: this.app.timestamp(), data: blob });\n                    if (this.snapshots[id].images.length > 9) {\n                        this.sendSnaps(this.snapshots[id].images, id, this.snapshots[id].createdAt);\n                        this.snapshots[id].images = [];\n                    }\n                });\n            };\n            const int = setInterval(() => {\n                const cid = this.app.nodes.getID(node);\n                const canvas = cid ? this.app.nodes.getNode(cid) : undefined;\n                if (!canvas || !hasTag(canvas, 'canvas') || canvas !== node) {\n                    this.app.debug.log('Canvas element not in sync');\n                    clearInterval(int);\n                }\n                else {\n                    if (!this.snapshots[id].paused) {\n                        if (this.options.useAnimationFrame) {\n                            requestAnimationFrame(() => {\n                                captureFn(canvas);\n                            });\n                        }\n                        else {\n                            captureFn(canvas);\n                        }\n                    }\n                }\n            }, this.interval);\n            this.intervals.push(int);\n        };\n        this.fileExt = options.fileExt ?? 'webp';\n        this.interval = 1000 / options.fps;\n    }\n    startTracking() {\n        setTimeout(() => {\n            this.app.nodes.scanTree(this.captureCanvas);\n            this.app.nodes.attachNodeCallback((node) => {\n                this.captureCanvas(node);\n            });\n        }, 500);\n    }\n    sendSnaps(images, canvasId, createdAt) {\n        if (Object.keys(this.snapshots).length === 0) {\n            return;\n        }\n        const formData = new FormData();\n        images.forEach((snapshot) => {\n            const blob = snapshot.data;\n            if (!blob)\n                return;\n            formData.append('snapshot', blob, `${createdAt}_${canvasId}_${snapshot.id}.${this.fileExt}`);\n            if (this.options.isDebug) {\n                saveImageData(blob, `${createdAt}_${canvasId}_${snapshot.id}.${this.fileExt}`);\n            }\n        });\n        fetch(this.app.options.ingestPoint + '/v1/web/images', {\n            method: 'POST',\n            headers: {\n                Authorization: `Bearer ${this.app.session.getSessionToken() ?? ''}`,\n            },\n            body: formData,\n        })\n            .then(() => {\n            return true;\n        })\n            .catch((e) => {\n            this.app.debug.error('error saving canvas', e);\n        });\n    }\n    clear() {\n        this.intervals.forEach((int) => clearInterval(int));\n        this.snapshots = {};\n    }\n}\nconst qualityInt = {\n    low: 0.35,\n    medium: 0.55,\n    high: 0.8,\n};\nfunction captureSnapshot(canvas, quality = 'medium', dummy, fixedScaling = false, fileExt, onBlob) {\n    const imageFormat = `image/${fileExt}`;\n    if (fixedScaling) {\n        const canvasScaleRatio = window.devicePixelRatio || 1;\n        dummy.width = canvas.width / canvasScaleRatio;\n        dummy.height = canvas.height / canvasScaleRatio;\n        const ctx = dummy.getContext('2d');\n        if (!ctx) {\n            return '';\n        }\n        ctx.clearRect(0, 0, dummy.width, dummy.height);\n        ctx.drawImage(canvas, 0, 0, dummy.width, dummy.height);\n        dummy.toBlob(onBlob, imageFormat, qualityInt[quality]);\n    }\n    else {\n        canvas.toBlob(onBlob, imageFormat, qualityInt[quality]);\n    }\n}\nfunction saveImageData(imageDataBlob, name) {\n    const imageDataUrl = URL.createObjectURL(imageDataBlob);\n    const link = document.createElement('a');\n    link.href = imageDataUrl;\n    link.download = name;\n    link.style.display = 'none';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n}\nfunction dataUrlToBlob(dataUrl) {\n    const [header, base64] = dataUrl.split(',');\n    if (!header || !base64)\n        return null;\n    const encParts = header.match(/:(.*?);/);\n    if (!encParts)\n        return null;\n    const mime = encParts[1];\n    const blobStr = atob(base64);\n    let n = blobStr.length;\n    const u8arr = new Uint8Array(n);\n    while (n--) {\n        u8arr[n] = blobStr.charCodeAt(n);\n    }\n    return [new Blob([u8arr], { type: mime }), u8arr];\n}\nexport default CanvasRecorder;\n", "export const LogLevel = {\n    Verbose: 5,\n    Log: 4,\n    Warnings: 3,\n    Errors: 2,\n    Silent: 0,\n};\nexport default class Logger {\n    constructor(debugLevel = LogLevel.Silent) {\n        this.shouldLog = (level) => {\n            return this.level >= level;\n        };\n        this.log = (...args) => {\n            if (this.shouldLog(LogLevel.Log)) {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                console.log(...args);\n            }\n        };\n        this.warn = (...args) => {\n            if (this.shouldLog(LogLevel.Warnings)) {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                console.warn(...args);\n            }\n        };\n        this.error = (...args) => {\n            if (this.shouldLog(LogLevel.Errors)) {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                console.error(...args);\n            }\n        };\n        this.level = debugLevel;\n    }\n}\n", "import { createEventListener, deleteEventListener } from '../utils.js';\nexport default class Nodes {\n    constructor(node_id) {\n        this.node_id = node_id;\n        this.nodes = [];\n        this.totalNodeAmount = 0;\n        this.nodeCallbacks = [];\n        this.elementListeners = new Map();\n        this.nextNodeId = 0;\n        this.scanTree = (cb) => {\n            this.nodes.forEach((node) => cb(node));\n        };\n    }\n    syntheticMode(frameOrder) {\n        const maxSafeNumber = 9007199254740900;\n        const placeholderSize = 99999999;\n        const nextFrameId = placeholderSize * frameOrder;\n        // I highly doubt that this will ever happen,\n        // but it will be easier to debug if it does\n        if (nextFrameId > maxSafeNumber) {\n            throw new Error('Placeholder id overflow');\n        }\n        this.nextNodeId = nextFrameId;\n    }\n    // Attached once per Tracker instance\n    attachNodeCallback(nodeCallback) {\n        this.nodeCallbacks.push(nodeCallback);\n    }\n    attachNodeListener(node, type, listener, useCapture = true) {\n        const id = this.getID(node);\n        if (id === undefined) {\n            return;\n        }\n        createEventListener(node, type, listener, useCapture);\n        let listeners = this.elementListeners.get(id);\n        if (listeners === undefined) {\n            listeners = [];\n            this.elementListeners.set(id, listeners);\n        }\n        listeners.push([type, listener, useCapture]);\n    }\n    registerNode(node) {\n        let id = node[this.node_id];\n        const isNew = id === undefined;\n        if (isNew) {\n            id = this.nextNodeId;\n            this.totalNodeAmount++;\n            this.nextNodeId++;\n            this.nodes[id] = node;\n            node[this.node_id] = id;\n        }\n        return [id, isNew];\n    }\n    unregisterNode(node) {\n        const id = node[this.node_id];\n        if (id !== undefined) {\n            ;\n            node[this.node_id] = undefined;\n            delete node[this.node_id];\n            delete this.nodes[id];\n            const listeners = this.elementListeners.get(id);\n            if (listeners !== undefined) {\n                this.elementListeners.delete(id);\n                listeners.forEach((listener) => deleteEventListener(node, listener[0], listener[1], listener[2]));\n            }\n            this.totalNodeAmount--;\n        }\n        return id;\n    }\n    cleanTree() {\n        // sadly we keep empty items in array here resulting in some memory still being used\n        // but its still better than keeping dead nodes or undef elements\n        // plus we keep our index positions for new/alive nodes\n        // performance test: 3ms for 30k nodes with 17k dead ones\n        for (let i = 0; i < this.nodes.length; i++) {\n            const node = this.nodes[i];\n            if (node && !document.contains(node)) {\n                this.unregisterNode(node);\n            }\n        }\n    }\n    callNodeCallbacks(node, isStart) {\n        this.nodeCallbacks.forEach((cb) => cb(node, isStart));\n    }\n    getID(node) {\n        if (!node)\n            return undefined;\n        return node[this.node_id];\n    }\n    getNode(id) {\n        return this.nodes[id];\n    }\n    getNodeCount() {\n        return this.totalNodeAmount;\n    }\n    clear() {\n        for (let id = 0; id < this.nodes.length; id++) {\n            const node = this.nodes[id];\n            if (!node) {\n                continue;\n            }\n            this.unregisterNode(node);\n        }\n        this.nextNodeId = 0;\n        this.nodes.length = 0;\n    }\n}\n", "import { createMutationObserver } from '../../utils.js';\nimport { RemoveNodeAttribute, SetNodeAttributeURLBased, SetCSSDataURLBased, SetNodeData, CreateTextNode, CreateElementNode, MoveNode, RemoveNode, UnbindNodes, } from '../messages.gen.js';\nimport { isRootNode, isTextNode, isElementNode, isSVGElement, hasTag, isCommentNode, } from '../guards.js';\nfunction isIgnored(node) {\n    if (isCommentNode(node)) {\n        return true;\n    }\n    if (isTextNode(node)) {\n        return false;\n    }\n    if (!isElementNode(node)) {\n        return true;\n    }\n    const tag = node.tagName.toUpperCase();\n    if (tag === 'LINK') {\n        const rel = node.getAttribute('rel');\n        const as = node.getAttribute('as');\n        return !(rel?.includes('stylesheet') || as === 'style' || as === 'font');\n    }\n    return (tag === 'SCRIPT' || tag === 'NOSCRIPT' || tag === 'META' || tag === 'TITLE' || tag === 'BASE');\n}\nfunction isObservable(node) {\n    if (isRootNode(node)) {\n        return true;\n    }\n    return !isIgnored(node);\n}\n/*\n  TODO:\n    - fix unbinding logic + send all removals first (ensure sequence is correct)\n    - use document as a 0-node in the upper context (should be updated in player at first)\n*/\nvar RecentsType;\n(function (RecentsType) {\n    RecentsType[RecentsType[\"New\"] = 0] = \"New\";\n    RecentsType[RecentsType[\"Removed\"] = 1] = \"Removed\";\n    RecentsType[RecentsType[\"Changed\"] = 2] = \"Changed\";\n})(RecentsType || (RecentsType = {}));\nexport default class Observer {\n    constructor(app, isTopContext = false) {\n        this.app = app;\n        this.isTopContext = isTopContext;\n        this.commited = [];\n        this.recents = new Map();\n        this.indexes = [];\n        this.attributesMap = new Map();\n        this.textSet = new Set();\n        this.observer = createMutationObserver(this.app.safe((mutations) => {\n            for (const mutation of mutations) {\n                // mutations order is sequential\n                const target = mutation.target;\n                const type = mutation.type;\n                if (!isObservable(target)) {\n                    continue;\n                }\n                if (type === 'childList') {\n                    for (let i = 0; i < mutation.removedNodes.length; i++) {\n                        // Should be the same as bindTree(mutation.removedNodes[i]), but logic needs to be be untied\n                        if (isObservable(mutation.removedNodes[i])) {\n                            this.bindNode(mutation.removedNodes[i]);\n                        }\n                    }\n                    for (let i = 0; i < mutation.addedNodes.length; i++) {\n                        this.bindTree(mutation.addedNodes[i]);\n                    }\n                    continue;\n                }\n                const id = this.app.nodes.getID(target);\n                if (id === undefined) {\n                    continue;\n                }\n                if (!this.recents.has(id)) {\n                    this.recents.set(id, RecentsType.Changed); // TODO only when altered\n                }\n                if (type === 'attributes') {\n                    const name = mutation.attributeName;\n                    if (name === null) {\n                        continue;\n                    }\n                    let attr = this.attributesMap.get(id);\n                    if (attr === undefined) {\n                        this.attributesMap.set(id, (attr = new Set()));\n                    }\n                    attr.add(name);\n                    continue;\n                }\n                if (type === 'characterData') {\n                    this.textSet.add(id);\n                    continue;\n                }\n            }\n            this.commitNodes();\n        }));\n    }\n    clear() {\n        this.commited.length = 0;\n        this.recents.clear();\n        this.indexes.length = 1;\n        this.attributesMap.clear();\n        this.textSet.clear();\n    }\n    sendNodeAttribute(id, node, name, value) {\n        if (isSVGElement(node)) {\n            if (name.substr(0, 6) === 'xlink:') {\n                name = name.substr(6);\n            }\n            if (value === null) {\n                this.app.send(RemoveNodeAttribute(id, name));\n            }\n            else if (name === 'href') {\n                if (value.length > 1e5) {\n                    value = '';\n                }\n                this.app.send(SetNodeAttributeURLBased(id, name, value, this.app.getBaseHref()));\n            }\n            else {\n                this.app.attributeSender.sendSetAttribute(id, name, value);\n            }\n            return;\n        }\n        if (name === 'src' ||\n            name === 'srcset' ||\n            name === 'integrity' ||\n            name === 'crossorigin' ||\n            name === 'autocomplete' ||\n            name.substr(0, 2) === 'on') {\n            return;\n        }\n        if (name === 'value' &&\n            hasTag(node, 'input') &&\n            node.type !== 'button' &&\n            node.type !== 'reset' &&\n            node.type !== 'submit') {\n            return;\n        }\n        if (value === null) {\n            this.app.send(RemoveNodeAttribute(id, name));\n            return;\n        }\n        if (name === 'style' || (name === 'href' && hasTag(node, 'link'))) {\n            this.app.send(SetNodeAttributeURLBased(id, name, value, this.app.getBaseHref()));\n            return;\n        }\n        if (name === 'href' || value.length > 1e5) {\n            value = '';\n        }\n        this.app.attributeSender.sendSetAttribute(id, name, value);\n    }\n    sendNodeData(id, parentElement, data) {\n        if (hasTag(parentElement, 'style')) {\n            this.app.send(SetCSSDataURLBased(id, data, this.app.getBaseHref()));\n            return;\n        }\n        data = this.app.sanitizer.sanitize(id, data);\n        this.app.send(SetNodeData(id, data));\n    }\n    bindNode(node) {\n        const [id, isNew] = this.app.nodes.registerNode(node);\n        if (isNew) {\n            this.recents.set(id, RecentsType.New);\n        }\n        else if (this.recents.get(id) !== RecentsType.New) {\n            this.recents.set(id, RecentsType.Removed);\n        }\n    }\n    bindTree(node) {\n        if (!isObservable(node)) {\n            return;\n        }\n        this.bindNode(node);\n        const walker = document.createTreeWalker(node, NodeFilter.SHOW_ELEMENT + NodeFilter.SHOW_TEXT, {\n            acceptNode: (node) => {\n                if (this.app.nodes.getID(node) !== undefined) {\n                    this.app.debug.error('! Node is already bound', node);\n                }\n                return isIgnored(node) || this.app.nodes.getID(node) !== undefined\n                    ? NodeFilter.FILTER_REJECT\n                    : NodeFilter.FILTER_ACCEPT;\n            },\n        }, \n        // @ts-ignore\n        false);\n        while (walker.nextNode()) {\n            this.bindNode(walker.currentNode);\n        }\n    }\n    unbindTree(node) {\n        const id = this.app.nodes.unregisterNode(node);\n        if (id !== undefined && this.recents.get(id) === RecentsType.Removed) {\n            // Sending RemoveNode only for parent to maintain\n            this.app.send(RemoveNode(id));\n            // Unregistering all the children in order to clear the memory\n            const walker = document.createTreeWalker(node, NodeFilter.SHOW_ELEMENT + NodeFilter.SHOW_TEXT, {\n                acceptNode: (node) => isIgnored(node) || this.app.nodes.getID(node) === undefined\n                    ? NodeFilter.FILTER_REJECT\n                    : NodeFilter.FILTER_ACCEPT,\n            }, \n            // @ts-ignore\n            false);\n            let removed = 0;\n            const totalBeforeRemove = this.app.nodes.getNodeCount();\n            while (walker.nextNode()) {\n                removed += 1;\n                this.app.nodes.unregisterNode(walker.currentNode);\n            }\n            const removedPercent = Math.floor((removed / totalBeforeRemove) * 100);\n            if (removedPercent > 30) {\n                this.app.send(UnbindNodes(removedPercent));\n            }\n        }\n    }\n    // A top-consumption function on the infinite lists test. (~1% of performance resources)\n    _commitNode(id, node) {\n        if (isRootNode(node)) {\n            return true;\n        }\n        const parent = node.parentNode;\n        let parentID;\n        // Disable parent check for the upper context HTMLHtmlElement, because it is root there... (before)\n        // TODO: get rid of \"special\" cases (there is an issue with CreateDocument altered behaviour though)\n        // TODO: Clean the logic (though now it workd fine)\n        if (!hasTag(node, 'html') || !this.isTopContext) {\n            if (parent === null) {\n                // Sometimes one observation contains attribute mutations for the removimg node, which gets ignored here.\n                // That shouldn't affect the visual rendering ( should it? maybe when transition applied? )\n                this.unbindTree(node);\n                return false;\n            }\n            parentID = this.app.nodes.getID(parent);\n            if (parentID === undefined) {\n                this.unbindTree(node);\n                return false;\n            }\n            if (!this.commitNode(parentID)) {\n                this.unbindTree(node);\n                return false;\n            }\n            this.app.sanitizer.handleNode(id, parentID, node);\n            if (this.app.sanitizer.isHidden(parentID)) {\n                return false;\n            }\n        }\n        // From here parentID === undefined if node is top context HTML node\n        let sibling = node.previousSibling;\n        while (sibling !== null) {\n            const siblingID = this.app.nodes.getID(sibling);\n            if (siblingID !== undefined) {\n                this.commitNode(siblingID);\n                this.indexes[id] = this.indexes[siblingID] + 1;\n                break;\n            }\n            sibling = sibling.previousSibling;\n        }\n        if (sibling === null) {\n            this.indexes[id] = 0;\n        }\n        const recentsType = this.recents.get(id);\n        const isNew = recentsType === RecentsType.New;\n        const index = this.indexes[id];\n        if (index === undefined) {\n            throw 'commitNode: missing node index';\n        }\n        if (isNew) {\n            if (isElementNode(node)) {\n                let el = node;\n                if (parentID !== undefined) {\n                    if (this.app.sanitizer.isHidden(id)) {\n                        const width = el.clientWidth;\n                        const height = el.clientHeight;\n                        el = node.cloneNode();\n                        el.style.width = `${width}px`;\n                        el.style.height = `${height}px`;\n                    }\n                    this.app.send(CreateElementNode(id, parentID, index, el.tagName, isSVGElement(node)));\n                }\n                for (let i = 0; i < el.attributes.length; i++) {\n                    const attr = el.attributes[i];\n                    this.sendNodeAttribute(id, el, attr.nodeName, attr.value);\n                }\n            }\n            else if (isTextNode(node)) {\n                // for text node id != 0, hence parentID !== undefined and parent is Element\n                this.app.send(CreateTextNode(id, parentID, index));\n                this.sendNodeData(id, parent, node.data);\n            }\n            return true;\n        }\n        if (recentsType === RecentsType.Removed && parentID !== undefined) {\n            this.app.send(MoveNode(id, parentID, index));\n        }\n        const attr = this.attributesMap.get(id);\n        if (attr !== undefined) {\n            if (!isElementNode(node)) {\n                throw 'commitNode: node is not an element';\n            }\n            for (const name of attr) {\n                this.sendNodeAttribute(id, node, name, node.getAttribute(name));\n            }\n        }\n        if (this.textSet.has(id)) {\n            if (!isTextNode(node)) {\n                throw 'commitNode: node is not a text';\n            }\n            // for text node id != 0, hence parent is Element\n            this.sendNodeData(id, parent, node.data);\n        }\n        return true;\n    }\n    commitNode(id) {\n        const node = this.app.nodes.getNode(id);\n        if (node === undefined) {\n            return false;\n        }\n        const cmt = this.commited[id];\n        if (cmt !== undefined) {\n            return cmt;\n        }\n        return (this.commited[id] = this._commitNode(id, node));\n    }\n    commitNodes(isStart = false) {\n        let node;\n        this.recents.forEach((type, id) => {\n            this.commitNode(id);\n            if (type === RecentsType.New && (node = this.app.nodes.getNode(id))) {\n                this.app.nodes.callNodeCallbacks(node, isStart);\n            }\n        });\n        this.clear();\n    }\n    // ISSSUE (nodeToBinde should be the same as node in all cases. Look at the comment about 0-node at the beginning of the file.)\n    // TODO: use one observer instance for all iframes/shadowRoots (composition instiad of inheritance)\n    observeRoot(node, beforeCommit, nodeToBind = node) {\n        this.observer.observe(node, {\n            childList: true,\n            attributes: true,\n            characterData: true,\n            subtree: true,\n            attributeOldValue: false,\n            characterDataOldValue: false,\n        });\n        this.bindTree(nodeToBind);\n        beforeCommit(this.app.nodes.getID(node));\n        this.commitNodes(true);\n    }\n    disconnect() {\n        this.observer.disconnect();\n        this.clear();\n    }\n}\n", "import Observer from './observer.js';\nimport { CreateIFrameDocument } from '../messages.gen.js';\nexport default class IFrameObserver extends Observer {\n    observe(iframe) {\n        const doc = iframe.contentDocument;\n        const hostID = this.app.nodes.getID(iframe);\n        if (!doc || hostID === undefined) {\n            return;\n        } //log TODO common app.logger\n        // Have to observe document, because the inner <html> might be changed\n        this.observeRoot(doc, (docID) => {\n            //MBTODO: do not send if empty (send on load? it might be in-place iframe, like our replayer, which does not get loaded)\n            if (docID === undefined) {\n                this.app.debug.log('OpenReplay: Iframe document not bound');\n                return;\n            }\n            this.app.send(CreateIFrameDocument(hostID, docID));\n        });\n    }\n    syntheticObserve(selfId, doc) {\n        this.observeRoot(doc, (docID) => {\n            if (docID === undefined) {\n                this.app.debug.log('OpenReplay: Iframe document not bound');\n                return;\n            }\n            this.app.send(CreateIFrameDocument(selfId, docID));\n        });\n    }\n}\n", "import Observer from './observer.js';\nimport { CreateIFrameDocument } from '../messages.gen.js';\nexport default class ShadowRootObserver extends Observer {\n    observe(el) {\n        const shRoot = el.shadowRoot;\n        const hostID = this.app.nodes.getID(el);\n        if (!shRoot || hostID === undefined) {\n            return;\n        } // log\n        this.observeRoot(shRoot, (rootID) => {\n            if (rootID === undefined) {\n                this.app.debug.error('OpenReplay: Shadow Root was not bound');\n                return;\n            }\n            this.app.send(CreateIFrameDocument(hostID, rootID));\n        });\n    }\n}\n", "export default class IFrameOffsets {\n    constructor() {\n        this.states = new Map();\n    }\n    calcOffset(state) {\n        let parLeft = 0, parTop = 0;\n        if (state.parent) {\n            ;\n            [parLeft, parTop] = this.calcOffset(state.parent);\n        }\n        if (!state.offset) {\n            const { left, top } = state.iFrame.getBoundingClientRect();\n            state.offset = [left, top];\n        }\n        const [left, top] = state.offset;\n        return [parLeft + left, parTop + top]; // TODO: store absolute sum, invalidate whole subtree. Otherwise it is summated on each mousemove\n    }\n    getDocumentOffset(doc) {\n        const state = this.states.get(doc);\n        if (!state) {\n            return [0, 0];\n        } // topmost doc\n        return this.calcOffset(state);\n    }\n    observe(iFrame) {\n        const doc = iFrame.contentDocument;\n        if (!doc) {\n            return;\n        }\n        const parentDoc = iFrame.ownerDocument;\n        const parentState = this.states.get(parentDoc);\n        const state = {\n            offset: null,\n            iFrame,\n            parent: parentState || null,\n            clear: () => {\n                parentDoc.removeEventListener('scroll', invalidateOffset);\n                parentDoc.defaultView?.removeEventListener('resize', invalidateOffset);\n            },\n        };\n        const invalidateOffset = () => {\n            state.offset = null;\n        };\n        // anything more reliable? This does not cover all cases (layout changes are ignored, for ex.)\n        parentDoc.addEventListener('scroll', invalidateOffset);\n        parentDoc.defaultView?.addEventListener('resize', invalidateOffset);\n        this.states.set(doc, state);\n    }\n    clear() {\n        this.states.forEach((s) => s.clear());\n        this.states.clear();\n    }\n}\n", "import Observer from './observer.js';\nimport { isElementNode, hasTag } from '../guards.js';\nimport IFrameObserver from './iframe_observer.js';\nimport ShadowRootObserver from './shadow_root_observer.js';\nimport IFrameOffsets from './iframe_offsets.js';\nimport { CreateDocument } from '../messages.gen.js';\nimport { IN_BROWSER, hasOpenreplayAttribute, canAccessIframe } from '../../utils.js';\nconst attachShadowNativeFn = IN_BROWSER ? Element.prototype.attachShadow : () => new ShadowRoot();\nexport default class TopObserver extends Observer {\n    constructor(app, options) {\n        super(app, true);\n        this.iframeOffsets = new IFrameOffsets();\n        this.contextCallbacks = [];\n        // Attached once per Tracker instance\n        this.contextsSet = new Set();\n        this.iframeObservers = [];\n        this.shadowRootObservers = [];\n        this.options = Object.assign({\n            captureIFrames: true,\n        }, options);\n        // IFrames\n        this.app.nodes.attachNodeCallback((node) => {\n            if (hasTag(node, 'iframe') &&\n                ((this.options.captureIFrames && !hasOpenreplayAttribute(node, 'obscured')) ||\n                    hasOpenreplayAttribute(node, 'capture'))) {\n                this.handleIframe(node);\n            }\n        });\n        // ShadowDOM\n        this.app.nodes.attachNodeCallback((node) => {\n            if (isElementNode(node) && node.shadowRoot !== null) {\n                this.handleShadowRoot(node.shadowRoot);\n            }\n        });\n    }\n    attachContextCallback(cb) {\n        this.contextCallbacks.push(cb);\n    }\n    getDocumentOffset(doc) {\n        return this.iframeOffsets.getDocumentOffset(doc);\n    }\n    handleIframe(iframe) {\n        let doc = null;\n        // setTimeout is required. Otherwise some event listeners (scroll, mousemove) applied in modules\n        //     do not work on the iframe document when it 've been loaded dynamically ((why?))\n        const handle = this.app.safe(() => setTimeout(() => {\n            const id = this.app.nodes.getID(iframe);\n            if (id === undefined) {\n                //log\n                return;\n            }\n            if (!canAccessIframe(iframe))\n                return;\n            const currentWin = iframe.contentWindow;\n            const currentDoc = iframe.contentDocument;\n            if (currentDoc && currentDoc !== doc) {\n                const observer = new IFrameObserver(this.app);\n                this.iframeObservers.push(observer);\n                observer.observe(iframe); // TODO: call unregisterNode for the previous doc if present (incapsulate: one iframe - one observer)\n                doc = currentDoc;\n                this.iframeOffsets.observe(iframe);\n            }\n            if (currentWin &&\n                // Sometimes currentWin.window is null (not in specification). Such window object is not functional\n                currentWin === currentWin.window &&\n                !this.contextsSet.has(currentWin) // for each context callbacks called once per Tracker (TopObserver) instance\n            //TODO: more explicit logic\n            ) {\n                this.contextsSet.add(currentWin);\n                //@ts-ignore https://github.com/microsoft/TypeScript/issues/41684\n                this.contextCallbacks.forEach((cb) => cb(currentWin));\n            }\n            // we need this delay because few iframes stacked one in another with rapid updates will break the player (or browser engine rather?)\n        }, 100));\n        iframe.addEventListener('load', handle); // why app.attachEventListener not working?\n        handle();\n    }\n    handleShadowRoot(shRoot) {\n        const observer = new ShadowRootObserver(this.app);\n        this.shadowRootObservers.push(observer);\n        observer.observe(shRoot.host);\n    }\n    observe() {\n        // Protection from several subsequent calls?\n        const observer = this;\n        Element.prototype.attachShadow = function () {\n            // eslint-disable-next-line\n            const shadow = attachShadowNativeFn.apply(this, arguments);\n            observer.handleShadowRoot(shadow);\n            return shadow;\n        };\n        this.app.nodes.clear();\n        // Can observe documentElement (<html>) here, because it is not supposed to be changing.\n        // However, it is possible in some exotic cases and may cause an ignorance of the newly created <html>\n        // In this case context.document have to be observed, but this will cause\n        // the change in the re-player behaviour caused by CreateDocument message:\n        //   the 0-node (\"fRoot\") will become #document rather than documentElement as it is now.\n        // Alternatively - observe(#document) then bindNode(documentElement)\n        this.observeRoot(window.document, () => {\n            this.app.send(CreateDocument());\n            // it has no node_id here\n            this.app.nodes.callNodeCallbacks(document, true);\n        }, window.document.documentElement);\n    }\n    crossdomainObserve(selfId, frameOder) {\n        const observer = this;\n        Element.prototype.attachShadow = function () {\n            // eslint-disable-next-line\n            const shadow = attachShadowNativeFn.apply(this, arguments);\n            observer.handleShadowRoot(shadow);\n            return shadow;\n        };\n        this.app.nodes.clear();\n        this.app.nodes.syntheticMode(frameOder);\n        const iframeObserver = new IFrameObserver(this.app);\n        this.iframeObservers.push(iframeObserver);\n        iframeObserver.syntheticObserve(selfId, window.document);\n    }\n    disconnect() {\n        this.iframeOffsets.clear();\n        Element.prototype.attachShadow = attachShadowNativeFn;\n        this.iframeObservers.forEach((o) => o.disconnect());\n        this.iframeObservers = [];\n        this.shadowRootObservers.forEach((o) => o.disconnect());\n        this.shadowRootObservers = [];\n        super.disconnect();\n    }\n}\n", "import { stars, hasOpenreplayAttribute } from '../utils.js';\nimport { isElementNode } from './guards.js';\nexport var SanitizeLevel;\n(function (SanitizeLevel) {\n    SanitizeLevel[SanitizeLevel[\"Plain\"] = 0] = \"Plain\";\n    SanitizeLevel[SanitizeLevel[\"Obscured\"] = 1] = \"Obscured\";\n    SanitizeLevel[SanitizeLevel[\"Hidden\"] = 2] = \"Hidden\";\n})(SanitizeLevel || (SanitizeLevel = {}));\nexport const stringWiper = (input) => input\n    .trim()\n    .replace(/[^\\f\\n\\r\\t\\v\\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]/g, '█');\nexport default class Sanitizer {\n    constructor(app, options) {\n        this.app = app;\n        this.obscured = new Set();\n        this.hidden = new Set();\n        this.options = Object.assign({\n            obscureTextEmails: true,\n            obscureTextNumbers: false,\n        }, options);\n    }\n    handleNode(id, parentID, node) {\n        if (this.obscured.has(parentID) ||\n            (isElementNode(node) &&\n                (hasOpenreplayAttribute(node, 'masked') || hasOpenreplayAttribute(node, 'obscured')))) {\n            this.obscured.add(id);\n        }\n        if (this.hidden.has(parentID) ||\n            (isElementNode(node) &&\n                (hasOpenreplayAttribute(node, 'htmlmasked') || hasOpenreplayAttribute(node, 'hidden')))) {\n            this.hidden.add(id);\n        }\n        if (this.options.domSanitizer !== undefined && isElementNode(node)) {\n            const sanitizeLevel = this.options.domSanitizer(node);\n            if (sanitizeLevel === SanitizeLevel.Obscured) {\n                this.obscured.add(id);\n            }\n            if (sanitizeLevel === SanitizeLevel.Hidden) {\n                this.hidden.add(id);\n            }\n        }\n    }\n    sanitize(id, data) {\n        if (this.obscured.has(id)) {\n            // TODO: is it the best place to put trim() ? Might trimmed spaces be considered in layout in certain cases?\n            return stringWiper(data);\n        }\n        if (this.options.obscureTextNumbers) {\n            data = data.replace(/\\d/g, '0');\n        }\n        if (this.options.obscureTextEmails) {\n            data = data.replace(/^\\w+([+.-]\\w+)*@\\w+([.-]\\w+)*\\.\\w{2,3}$/g, (email) => {\n                const [name, domain] = email.split('@');\n                const [domainName, host] = domain.split('.');\n                return `${stars(name)}@${stars(domainName)}.${stars(host)}`;\n            });\n        }\n        return data;\n    }\n    isObscured(id) {\n        return this.obscured.has(id);\n    }\n    isHidden(id) {\n        return this.hidden.has(id);\n    }\n    getInnerTextSecure(el) {\n        const id = this.app.nodes.getID(el);\n        if (!id) {\n            return '';\n        }\n        return this.sanitize(id, el.innerText);\n    }\n    clear() {\n        this.obscured.clear();\n        this.hidden.clear();\n    }\n}\n", "import { generateRandomId } from '../utils.js';\nexport default class Session {\n    constructor(app, options) {\n        this.app = app;\n        this.options = options;\n        this.metadata = {};\n        this.userID = null;\n        this.callbacks = [];\n        this.timestamp = 0;\n        this.createTabId();\n    }\n    attachUpdateCallback(cb) {\n        this.callbacks.push(cb);\n    }\n    handleUpdate(newInfo) {\n        if (newInfo.userID == null) {\n            delete newInfo.userID;\n        }\n        if (newInfo.sessionID == null) {\n            delete newInfo.sessionID;\n        }\n        this.callbacks.forEach((cb) => cb(newInfo));\n    }\n    assign(newInfo) {\n        if (newInfo.userID !== undefined) {\n            // TODO clear nullable/undefinable types\n            this.userID = newInfo.userID;\n        }\n        if (newInfo.metadata !== undefined) {\n            Object.entries(newInfo.metadata).forEach(([k, v]) => (this.metadata[k] = v));\n        }\n        if (newInfo.sessionID !== undefined) {\n            this.sessionID = newInfo.sessionID;\n        }\n        if (newInfo.timestamp !== undefined) {\n            this.timestamp = newInfo.timestamp;\n        }\n        if (newInfo.projectID !== undefined) {\n            this.projectID = newInfo.projectID;\n        }\n        this.handleUpdate(newInfo);\n    }\n    setMetadata(key, value) {\n        this.metadata[key] = value;\n        this.handleUpdate({ metadata: { [key]: value } });\n    }\n    setUserID(userID) {\n        this.userID = userID;\n        this.handleUpdate({ userID });\n    }\n    setUserInfo(userInfo) {\n        this.userInfo = userInfo;\n    }\n    getPageNumber() {\n        const pageNoStr = this.app.sessionStorage.getItem(this.options.session_pageno_key);\n        if (pageNoStr == null) {\n            return undefined;\n        }\n        return parseInt(pageNoStr);\n    }\n    incPageNo() {\n        let pageNo = this.getPageNumber();\n        if (pageNo === undefined) {\n            pageNo = 0;\n        }\n        else {\n            pageNo++;\n        }\n        this.app.sessionStorage.setItem(this.options.session_pageno_key, pageNo.toString());\n        return pageNo;\n    }\n    getSessionToken() {\n        return this.app.sessionStorage.getItem(this.options.session_token_key) || undefined;\n    }\n    setSessionToken(token) {\n        this.app.sessionStorage.setItem(this.options.session_token_key, token);\n    }\n    applySessionHash(hash) {\n        const hashParts = decodeURI(hash).split('&');\n        let token = hash;\n        let pageNoStr = '100500'; // back-compat for sessionToken\n        if (hashParts.length == 2) {\n            ;\n            [pageNoStr, token] = hashParts;\n        }\n        if (!pageNoStr || !token) {\n            return;\n        }\n        this.app.sessionStorage.setItem(this.options.session_token_key, token);\n        this.app.sessionStorage.setItem(this.options.session_pageno_key, pageNoStr);\n    }\n    getSessionHash() {\n        const pageNo = this.getPageNumber();\n        const token = this.getSessionToken();\n        if (pageNo === undefined || token === undefined) {\n            return;\n        }\n        return encodeURI(String(pageNo) + '&' + token);\n    }\n    getTabId() {\n        if (!this.tabId)\n            this.createTabId();\n        return this.tabId;\n    }\n    regenerateTabId() {\n        const randomId = generateRandomId(12);\n        this.app.sessionStorage.setItem(this.options.session_tabid_key, randomId);\n        this.tabId = randomId;\n    }\n    createTabId() {\n        const localId = this.app.sessionStorage.getItem(this.options.session_tabid_key);\n        if (localId) {\n            this.tabId = localId;\n        }\n        else {\n            this.regenerateTabId();\n        }\n    }\n    getInfo() {\n        return {\n            sessionID: this.sessionID,\n            metadata: this.metadata,\n            userID: this.userID,\n            timestamp: this.timestamp,\n            projectID: this.projectID,\n        };\n    }\n    reset() {\n        this.app.sessionStorage.removeItem(this.options.session_token_key);\n        this.metadata = {};\n        this.userID = null;\n        this.sessionID = undefined;\n        this.timestamp = 0;\n    }\n}\n", "function wrap(callback, n) {\n    let t = 0;\n    return () => {\n        if (t++ >= n) {\n            t = 0;\n            callback();\n        }\n    };\n}\nexport default class Ticker {\n    constructor(app) {\n        this.app = app;\n        this.timer = null;\n        this.callbacks = [];\n    }\n    /**\n     * @param {Callback} callback - repeated cb\n     * @param {number} n - number of turn skips; ticker have a 30 ms cycle\n     * @param {boolean} useSafe - using safe wrapper to check if app is active\n     * @param {object} thisArg - link to <this>\n     * */\n    attach(callback, n = 0, useSafe = true, thisArg) {\n        if (thisArg) {\n            callback = callback.bind(thisArg);\n        }\n        if (useSafe) {\n            callback = this.app.safe(callback);\n        }\n        this.callbacks.unshift(n ? wrap(callback, n) : callback) - 1;\n    }\n    start() {\n        if (this.timer === null) {\n            this.timer = setInterval(() => this.callbacks.forEach((cb) => {\n                if (cb)\n                    cb();\n            }), 30);\n        }\n    }\n    stop() {\n        if (this.timer !== null) {\n            clearInterval(this.timer);\n            this.timer = null;\n        }\n    }\n}\n", "import { gzip } from 'fflate';\nimport AttributeSender from '../modules/attributeSender.js';\nimport ConditionsManager from '../modules/conditionsManager.js';\nimport FeatureFlags from '../modules/featureFlags.js';\nimport { deviceMemory, jsHeapSizeLimit } from '../modules/performance.js';\nimport TagWatcher from '../modules/tagWatcher.js';\nimport UserTestManager from '../modules/userTesting/index.js';\nimport { adjustTimeOrigin, createEventListener, deleteEventListener, now, requestIdleCb, simpleMerge, } from '../utils.js';\nimport CanvasRecorder from './canvas.js';\nimport Logger, { LogLevel } from './logger.js';\nimport { Metadata, TabChange, TabData, TagTrigger, Timestamp, UserID, WSChannel, } from './messages.gen.js';\nimport Nodes from './nodes.js';\nimport Observer from './observer/top_observer.js';\nimport Sanitizer from './sanitizer.js';\nimport Session from './session.js';\nimport Ticker from './ticker.js';\nconst CANCELED = 'canceled';\nconst uxtStorageKey = 'or_uxt_active';\nconst bufferStorageKey = 'or_buffer_1';\nconst UnsuccessfulStart = (reason) => ({ reason, success: false });\nconst SuccessfulStart = (body) => ({ ...body, success: true });\nvar ActivityState;\n(function (ActivityState) {\n    ActivityState[ActivityState[\"NotActive\"] = 0] = \"NotActive\";\n    ActivityState[ActivityState[\"Starting\"] = 1] = \"Starting\";\n    ActivityState[ActivityState[\"Active\"] = 2] = \"Active\";\n    ActivityState[ActivityState[\"ColdStart\"] = 3] = \"ColdStart\";\n})(ActivityState || (ActivityState = {}));\n// TODO: use backendHost only\nexport const DEFAULT_INGEST_POINT = 'https://api.openreplay.com/ingest';\nfunction getTimezone() {\n    const offset = new Date().getTimezoneOffset() * -1;\n    const sign = offset >= 0 ? '+' : '-';\n    const hours = Math.floor(Math.abs(offset) / 60);\n    const minutes = Math.abs(offset) % 60;\n    return `UTC${sign}${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}`;\n}\nconst delay = (ms) => new Promise((res) => setTimeout(res, ms));\nconst proto = {\n    // ask if there are any tabs alive\n    ask: 'never-gonna-give-you-up',\n    // response from another tab\n    resp: 'never-gonna-let-you-down',\n    // regenerating id (copied other tab)\n    reg: 'never-gonna-run-around-and-desert-you',\n    // tracker inside a child iframe\n    iframeSignal: 'never-gonna-make-you-cry',\n    // getting node id for child iframe\n    iframeId: 'never-gonna-say-goodbye',\n    // batch of messages from an iframe window\n    iframeBatch: 'never-gonna-tell-a-lie-and-hurt-you',\n};\nexport default class App {\n    constructor(projectKey, sessionToken, options, signalError, insideIframe) {\n        this.signalError = signalError;\n        this.insideIframe = insideIframe;\n        this.messages = [];\n        /**\n         * we need 2 buffers, so we don't lose anything\n         * @read coldStart implementation\n         * */\n        this.bufferedMessages1 = [];\n        this.bufferedMessages2 = [];\n        this.startCallbacks = [];\n        this.stopCallbacks = [];\n        this.commitCallbacks = [];\n        this.activityState = ActivityState.NotActive;\n        this.version = '14.0.3'; // TODO: version compatability check inside each plugin.\n        this.socketMode = false;\n        this.compressionThreshold = 24 * 1000;\n        this.bc = null;\n        this.canvasRecorder = null;\n        this.conditionsManager = null;\n        this.canStart = false;\n        this.rootId = null;\n        this.pageFrames = [];\n        this.frameOderNumber = 0;\n        this.initialHostName = location.hostname;\n        this.startTimeout = null;\n        this.coldStartCommitN = 0;\n        this.delay = 0;\n        this.coldInterval = null;\n        this.orderNumber = 0;\n        this.coldStartTs = 0;\n        this.singleBuffer = false;\n        this.onSessionSent = () => {\n            return;\n        };\n        this.restartCanvasTracking = () => {\n            this.canvasRecorder?.restartTracking();\n        };\n        this.flushBuffer = async (buffer) => {\n            return new Promise((res) => {\n                let ended = false;\n                const messagesBatch = [buffer.shift()];\n                while (!ended) {\n                    const nextMsg = buffer[0];\n                    if (!nextMsg || nextMsg[0] === 0 /* MType.Timestamp */) {\n                        ended = true;\n                    }\n                    else {\n                        messagesBatch.push(buffer.shift());\n                    }\n                }\n                this.postToWorker(messagesBatch);\n                res(null);\n            });\n        };\n        this.onUxtCb = [];\n        this.contextId = Math.random().toString(36).slice(2);\n        this.projectKey = projectKey;\n        if (Object.keys(options).findIndex((k) => ['fixedCanvasScaling', 'disableCanvas'].includes(k)) !==\n            -1) {\n            console.warn('Openreplay: canvas options are moving to separate key \"canvas\" in next update. Please update your configuration.');\n            options = {\n                ...options,\n                canvas: {\n                    __save_canvas_locally: options.__save_canvas_locally,\n                    fixedCanvasScaling: options.fixedCanvasScaling,\n                    disableCanvas: options.disableCanvas,\n                },\n            };\n        }\n        this.networkOptions = options.network;\n        const defaultOptions = {\n            revID: '',\n            node_id: '__openreplay_id',\n            session_token_key: '__openreplay_token',\n            session_pageno_key: '__openreplay_pageno',\n            session_reset_key: '__openreplay_reset',\n            session_tabid_key: '__openreplay_tabid',\n            local_uuid_key: '__openreplay_uuid',\n            ingestPoint: DEFAULT_INGEST_POINT,\n            resourceBaseHref: null,\n            __is_snippet: false,\n            __debug_report_edp: null,\n            __debug__: LogLevel.Silent,\n            __save_canvas_locally: false,\n            localStorage: null,\n            sessionStorage: null,\n            disableStringDict: false,\n            forceSingleTab: false,\n            assistSocketHost: '',\n            fixedCanvasScaling: false,\n            disableCanvas: false,\n            captureIFrames: true,\n            obscureTextEmails: true,\n            obscureTextNumbers: false,\n            crossdomain: {\n                parentDomain: '*',\n            },\n            canvas: {\n                disableCanvas: false,\n                fixedCanvasScaling: false,\n                __save_canvas_locally: false,\n                useAnimationFrame: false,\n            },\n        };\n        this.options = simpleMerge(defaultOptions, options);\n        if (!this.insideIframe &&\n            !this.options.forceSingleTab &&\n            globalThis &&\n            'BroadcastChannel' in globalThis) {\n            const host = location.hostname.split('.').slice(-2).join('_');\n            this.bc = new BroadcastChannel(`rick_${host}`);\n        }\n        this.revID = this.options.revID;\n        this.localStorage = this.options.localStorage ?? window.localStorage;\n        this.sessionStorage = this.options.sessionStorage ?? window.sessionStorage;\n        this.sanitizer = new Sanitizer(this, options);\n        this.nodes = new Nodes(this.options.node_id);\n        this.observer = new Observer(this, options);\n        this.ticker = new Ticker(this);\n        this.ticker.attach(() => this.commit());\n        this.debug = new Logger(this.options.__debug__);\n        this.session = new Session(this, this.options);\n        this.attributeSender = new AttributeSender(this, Boolean(this.options.disableStringDict));\n        this.featureFlags = new FeatureFlags(this);\n        this.tagWatcher = new TagWatcher(this.sessionStorage, this.debug.error, (tag) => {\n            this.send(TagTrigger(tag));\n        });\n        this.session.attachUpdateCallback(({ userID, metadata }) => {\n            if (userID != null) {\n                // TODO: nullable userID\n                this.send(UserID(userID));\n            }\n            if (metadata != null) {\n                Object.entries(metadata).forEach(([key, value]) => this.send(Metadata(key, value)));\n            }\n        });\n        // @deprecated (use sessionHash on start instead)\n        if (sessionToken != null) {\n            this.session.applySessionHash(sessionToken);\n        }\n        this.initWorker();\n        const thisTab = this.session.getTabId();\n        if (!this.insideIframe) {\n            /**\n             * if we get a signal from child iframes, we check for their node_id and send it back,\n             * so they can act as if it was just a same-domain iframe\n             * */\n            let crossdomainFrameCount = 0;\n            const catchIframeMessage = (event) => {\n                const { data } = event;\n                if (data.line === proto.iframeSignal) {\n                    const childIframeDomain = data.domain;\n                    const pageIframes = Array.from(document.querySelectorAll('iframe'));\n                    this.pageFrames = pageIframes;\n                    const signalId = async () => {\n                        let tries = 0;\n                        while (tries < 10) {\n                            const id = this.checkNodeId(pageIframes, childIframeDomain);\n                            if (id) {\n                                this.waitStarted()\n                                    .then(() => {\n                                    crossdomainFrameCount++;\n                                    const token = this.session.getSessionToken();\n                                    const iframeData = {\n                                        line: proto.iframeId,\n                                        context: this.contextId,\n                                        domain: childIframeDomain,\n                                        id,\n                                        token,\n                                        frameOrderNumber: crossdomainFrameCount,\n                                    };\n                                    this.debug.log('iframe_data', iframeData);\n                                    // @ts-ignore\n                                    event.source?.postMessage(iframeData, '*');\n                                })\n                                    .catch(console.error);\n                                tries = 10;\n                                break;\n                            }\n                            tries++;\n                            await delay(100);\n                        }\n                    };\n                    void signalId();\n                }\n                /**\n                 * proxying messages from iframe to main body, so they can be in one batch (same indexes, etc)\n                 * plus we rewrite some of the messages to be relative to the main context/window\n                 * */\n                if (data.line === proto.iframeBatch) {\n                    const msgBatch = data.messages;\n                    const mappedMessages = msgBatch.map((msg) => {\n                        if (msg[0] === 20 /* MType.MouseMove */) {\n                            let fixedMessage = msg;\n                            this.pageFrames.forEach((frame) => {\n                                if (frame.dataset.domain === event.data.domain) {\n                                    const [type, x, y] = msg;\n                                    const { left, top } = frame.getBoundingClientRect();\n                                    fixedMessage = [type, x + left, y + top];\n                                }\n                            });\n                            return fixedMessage;\n                        }\n                        if (msg[0] === 68 /* MType.MouseClick */) {\n                            let fixedMessage = msg;\n                            this.pageFrames.forEach((frame) => {\n                                if (frame.dataset.domain === event.data.domain) {\n                                    const [type, id, hesitationTime, label, selector, normX, normY] = msg;\n                                    const { left, top, width, height } = frame.getBoundingClientRect();\n                                    const contentWidth = document.documentElement.scrollWidth;\n                                    const contentHeight = document.documentElement.scrollHeight;\n                                    // (normalizedX * frameWidth + frameLeftOffset)/docSize\n                                    const fullX = (normX / 100) * width + left;\n                                    const fullY = (normY / 100) * height + top;\n                                    const fixedX = fullX / contentWidth;\n                                    const fixedY = fullY / contentHeight;\n                                    fixedMessage = [\n                                        type,\n                                        id,\n                                        hesitationTime,\n                                        label,\n                                        selector,\n                                        Math.round(fixedX * 1e3) / 1e1,\n                                        Math.round(fixedY * 1e3) / 1e1,\n                                    ];\n                                }\n                            });\n                            return fixedMessage;\n                        }\n                        return msg;\n                    });\n                    this.messages.push(...mappedMessages);\n                }\n            };\n            window.addEventListener('message', catchIframeMessage);\n            this.attachStopCallback(() => {\n                window.removeEventListener('message', catchIframeMessage);\n            });\n        }\n        else {\n            const catchParentMessage = (event) => {\n                const { data } = event;\n                if (data.line !== proto.iframeId) {\n                    return;\n                }\n                this.rootId = data.id;\n                this.session.setSessionToken(data.token);\n                this.frameOderNumber = data.frameOrderNumber;\n                this.debug.log('starting iframe tracking', data);\n                this.allowAppStart();\n            };\n            window.addEventListener('message', catchParentMessage);\n            this.attachStopCallback(() => {\n                window.removeEventListener('message', catchParentMessage);\n            });\n            // communicating with parent window,\n            // even if its crossdomain is possible via postMessage api\n            const domain = this.initialHostName;\n            window.parent.postMessage({\n                line: proto.iframeSignal,\n                source: thisTab,\n                context: this.contextId,\n                domain,\n            }, '*');\n        }\n        if (this.bc !== null) {\n            this.bc.postMessage({\n                line: proto.ask,\n                source: thisTab,\n                context: this.contextId,\n            });\n            this.startTimeout = setTimeout(() => {\n                this.allowAppStart();\n            }, 500);\n            this.bc.onmessage = (ev) => {\n                if (ev.data.context === this.contextId) {\n                    return;\n                }\n                if (ev.data.line === proto.resp) {\n                    const sessionToken = ev.data.token;\n                    this.session.setSessionToken(sessionToken);\n                    this.allowAppStart();\n                }\n                if (ev.data.line === proto.reg) {\n                    const sessionToken = ev.data.token;\n                    this.session.regenerateTabId();\n                    this.session.setSessionToken(sessionToken);\n                    this.allowAppStart();\n                }\n                if (ev.data.line === proto.ask) {\n                    const token = this.session.getSessionToken();\n                    if (token && this.bc) {\n                        this.bc.postMessage({\n                            line: ev.data.source === thisTab ? proto.reg : proto.resp,\n                            token,\n                            source: thisTab,\n                            context: this.contextId,\n                        });\n                    }\n                }\n            };\n        }\n    }\n    allowAppStart() {\n        this.canStart = true;\n        if (this.startTimeout) {\n            clearTimeout(this.startTimeout);\n            this.startTimeout = null;\n        }\n    }\n    checkNodeId(iframes, domain) {\n        for (const iframe of iframes) {\n            if (iframe.dataset.domain === domain) {\n                // @ts-ignore\n                return iframe[this.options.node_id];\n            }\n        }\n        return null;\n    }\n    initWorker() {\n        try {\n            this.worker = new Worker(URL.createObjectURL(new Blob(['\"use strict\";class t{constructor(t,s,i,e=10,n=250,h,r){this.onUnauthorised=s,this.onFailure=i,this.MAX_ATTEMPTS_COUNT=e,this.ATTEMPT_TIMEOUT=n,this.onCompress=h,this.pageNo=r,this.attemptsCount=0,this.busy=!1,this.queue=[],this.token=null,this.lastBatchNum=0,this.ingestURL=t+\"/v1/web/i\",this.isCompressing=void 0!==h}getQueueStatus(){return 0===this.queue.length&&!this.busy}authorise(t){this.token=t,this.busy||this.sendNext()}push(t){if(this.busy||!this.token)this.queue.push(t);else if(this.busy=!0,this.isCompressing&&this.onCompress)this.onCompress(t);else{const s=++this.lastBatchNum;this.sendBatch(t,!1,s)}}sendNext(){const t=this.queue.shift();if(t)if(this.busy=!0,this.isCompressing&&this.onCompress)this.onCompress(t);else{const s=++this.lastBatchNum;this.sendBatch(t,!1,s)}else this.busy=!1}retry(t,s,i){this.attemptsCount>=this.MAX_ATTEMPTS_COUNT?this.onFailure(`Failed to send batch after ${this.attemptsCount} attempts.`):(this.attemptsCount++,setTimeout((()=>this.sendBatch(t,s,i)),this.ATTEMPT_TIMEOUT*this.attemptsCount))}sendBatch(t,s,i){const e=i?.toString().replace(/^([^_]+)_([^_]+).*/,\"$1_$2_$3\");this.busy=!0;const n={Authorization:`Bearer ${this.token}`};s&&(n[\"Content-Encoding\"]=\"gzip\"),null!==this.token?fetch(`${this.ingestURL}?batch=${this.pageNo??\"noPageNum\"}_${e??\"noBatchNum\"}`,{body:t,method:\"POST\",headers:n,keepalive:t.length<65536}).then((e=>{if(401===e.status)return this.busy=!1,void this.onUnauthorised();e.status>=400?this.retry(t,s,`${i??\"noBatchNum\"}_network:${e.status}`):(this.attemptsCount=0,this.sendNext())})).catch((e=>{console.warn(\"OpenReplay:\",e),this.retry(t,s,`${i??\"noBatchNum\"}_reject:${e.message}`)})):setTimeout((()=>{this.sendBatch(t,s,`${i??\"noBatchNum\"}_newToken`)}),500)}sendCompressed(t){const s=++this.lastBatchNum;this.sendBatch(t,!0,s)}sendUncompressed(t){const s=++this.lastBatchNum;this.sendBatch(t,!1,s)}clean(){this.sendNext(),setTimeout((()=>{this.token=null,this.queue.length=0}),10)}}const s=\"function\"==typeof TextEncoder?new TextEncoder:{encode(t){const s=t.length,i=new Uint8Array(3*s);let e=-1;for(let n=0,h=0,r=0;r!==s;){if(n=t.charCodeAt(r),r+=1,n>=55296&&n<=56319){if(r===s){i[e+=1]=239,i[e+=1]=191,i[e+=1]=189;break}if(h=t.charCodeAt(r),!(h>=56320&&h<=57343)){i[e+=1]=239,i[e+=1]=191,i[e+=1]=189;continue}if(n=1024*(n-55296)+h-56320+65536,r+=1,n>65535){i[e+=1]=240|n>>>18,i[e+=1]=128|n>>>12&63,i[e+=1]=128|n>>>6&63,i[e+=1]=128|63&n;continue}}n<=127?i[e+=1]=0|n:n<=2047?(i[e+=1]=192|n>>>6,i[e+=1]=128|63&n):(i[e+=1]=224|n>>>12,i[e+=1]=128|n>>>6&63,i[e+=1]=128|63&n)}return i.subarray(0,e+1)}};class i{constructor(t){this.size=t,this.offset=0,this.checkpointOffset=0,this.data=new Uint8Array(t)}getCurrentOffset(){return this.offset}checkpoint(){this.checkpointOffset=this.offset}get isEmpty(){return 0===this.offset}skip(t){return this.offset+=t,this.offset<=this.size}set(t,s){this.data.set(t,s)}boolean(t){return this.data[this.offset++]=+t,this.offset<=this.size}uint(t){for((t<0||t>Number.MAX_SAFE_INTEGER)&&(t=0);t>=128;)this.data[this.offset++]=t%256|128,t=Math.floor(t/128);return this.data[this.offset++]=t,this.offset<=this.size}int(t){return t=Math.round(t),this.uint(t>=0?2*t:-2*t-1)}string(t){const i=s.encode(t),e=i.byteLength;return!(!this.uint(e)||this.offset+e>this.size)&&(this.data.set(i,this.offset),this.offset+=e,!0)}reset(){this.offset=0,this.checkpointOffset=0}flush(){const t=this.data.slice(0,this.checkpointOffset);return this.reset(),t}}class e extends i{encode(t){switch(t[0]){case 0:case 11:case 114:case 115:return this.uint(t[1]);case 4:case 44:case 47:return this.string(t[1])&&this.string(t[2])&&this.uint(t[3]);case 5:case 20:case 38:case 70:case 75:case 76:case 77:case 82:return this.uint(t[1])&&this.uint(t[2]);case 6:return this.int(t[1])&&this.int(t[2]);case 7:return!0;case 8:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3])&&this.string(t[4])&&this.boolean(t[5]);case 9:case 10:case 24:case 51:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3]);case 12:case 61:case 71:return this.uint(t[1])&&this.string(t[2])&&this.string(t[3]);case 13:case 14:case 17:case 50:case 54:return this.uint(t[1])&&this.string(t[2]);case 16:return this.uint(t[1])&&this.int(t[2])&&this.int(t[3]);case 18:return this.uint(t[1])&&this.string(t[2])&&this.int(t[3]);case 19:return this.uint(t[1])&&this.boolean(t[2]);case 21:return this.string(t[1])&&this.string(t[2])&&this.string(t[3])&&this.string(t[4])&&this.string(t[5])&&this.uint(t[6])&&this.uint(t[7])&&this.uint(t[8]);case 22:case 27:case 30:case 41:case 45:case 46:case 63:case 64:case 79:return this.string(t[1])&&this.string(t[2]);case 23:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3])&&this.uint(t[4])&&this.uint(t[5])&&this.uint(t[6])&&this.uint(t[7])&&this.uint(t[8])&&this.uint(t[9]);case 28:case 29:case 42:case 117:case 118:return this.string(t[1]);case 37:return this.uint(t[1])&&this.string(t[2])&&this.uint(t[3]);case 39:return this.string(t[1])&&this.string(t[2])&&this.string(t[3])&&this.string(t[4])&&this.uint(t[5])&&this.uint(t[6])&&this.uint(t[7]);case 40:return this.string(t[1])&&this.uint(t[2])&&this.string(t[3])&&this.string(t[4]);case 48:return this.string(t[1])&&this.string(t[2])&&this.string(t[3])&&this.string(t[4])&&this.int(t[5]);case 49:return this.int(t[1])&&this.int(t[2])&&this.uint(t[3])&&this.uint(t[4]);case 53:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3])&&this.uint(t[4])&&this.uint(t[5])&&this.uint(t[6])&&this.string(t[7])&&this.string(t[8]);case 55:return this.boolean(t[1]);case 57:case 60:return this.uint(t[1])&&this.string(t[2])&&this.string(t[3])&&this.string(t[4]);case 58:case 120:return this.int(t[1]);case 59:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3])&&this.uint(t[4])&&this.string(t[5])&&this.string(t[6])&&this.string(t[7]);case 67:case 73:return this.uint(t[1])&&this.string(t[2])&&this.uint(t[3])&&this.string(t[4]);case 68:return this.uint(t[1])&&this.uint(t[2])&&this.string(t[3])&&this.string(t[4])&&this.uint(t[5])&&this.uint(t[6]);case 69:return this.uint(t[1])&&this.uint(t[2])&&this.string(t[3])&&this.string(t[4]);case 78:return this.string(t[1])&&this.string(t[2])&&this.string(t[3])&&this.string(t[4]);case 81:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3])&&this.int(t[4])&&this.string(t[5]);case 83:return this.string(t[1])&&this.string(t[2])&&this.string(t[3])&&this.string(t[4])&&this.string(t[5])&&this.uint(t[6])&&this.uint(t[7])&&this.uint(t[8])&&this.uint(t[9]);case 84:return this.string(t[1])&&this.string(t[2])&&this.string(t[3])&&this.uint(t[4])&&this.string(t[5])&&this.string(t[6]);case 112:return this.uint(t[1])&&this.string(t[2])&&this.boolean(t[3])&&this.string(t[4])&&this.int(t[5])&&this.int(t[6]);case 113:return this.uint(t[1])&&this.uint(t[2])&&this.string(t[3]);case 116:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3])&&this.uint(t[4])&&this.uint(t[5])&&this.uint(t[6])&&this.string(t[7])&&this.string(t[8])&&this.uint(t[9])&&this.boolean(t[10]);case 119:return this.string(t[1])&&this.uint(t[2]);case 121:return this.string(t[1])&&this.string(t[2])&&this.uint(t[3])&&this.uint(t[4]);case 122:return this.string(t[1])&&this.string(t[2])&&this.uint(t[3])&&this.string(t[4]);case 123:return this.string(t[1])&&this.string(t[2])&&this.string(t[3])&&this.string(t[4])&&this.uint(t[5])}}}class n{constructor(t,s,i,n,h,r){this.pageNo=t,this.timestamp=s,this.url=i,this.onBatch=n,this.tabId=h,this.onOfflineEnd=r,this.nextIndex=0,this.beaconSize=2e5,this.encoder=new e(this.beaconSize),this.sizeBuffer=new Uint8Array(3),this.isEmpty=!0,this.beaconSizeLimit=1e6,this.prepare()}writeType(t){return this.encoder.uint(t[0])}writeFields(t){return this.encoder.encode(t)}writeSizeAt(t,s){for(let s=0;s<3;s++)this.sizeBuffer[s]=t>>8*s;this.encoder.set(this.sizeBuffer,s)}prepare(){if(!this.encoder.isEmpty)return;const t=[81,1,this.pageNo,this.nextIndex,this.timestamp,this.url],s=[118,this.tabId];this.writeType(t),this.writeFields(t),this.writeWithSize(s),this.isEmpty=!0}writeWithSize(t){const s=this.encoder;if(!this.writeType(t)||!s.skip(3))return!1;const i=s.getCurrentOffset(),e=this.writeFields(t);if(e){const e=s.getCurrentOffset()-i;if(e>16777215)return console.warn(\"OpenReplay: max message size overflow.\"),!1;this.writeSizeAt(e,i-3),s.checkpoint(),this.isEmpty=this.isEmpty&&0===t[0],this.nextIndex++}return e}setBeaconSizeLimit(t){this.beaconSizeLimit=t}writeMessage(t){if(\"q_end\"===t[0])return this.finaliseBatch(),this.onOfflineEnd();0===t[0]&&(this.timestamp=t[1]),122===t[0]&&(this.url=t[1]),this.writeWithSize(t)||(this.finaliseBatch(),this.writeWithSize(t)||(this.encoder=new e(this.beaconSizeLimit),this.prepare(),this.writeWithSize(t)?this.finaliseBatch():console.warn(\"OpenReplay: beacon size overflow. Skipping large message.\",t,this),this.encoder=new e(this.beaconSize),this.prepare()))}finaliseBatch(){if(this.isEmpty)return;const t=this.encoder.flush();this.onBatch(t),this.prepare()}clean(){this.encoder.reset()}}var h;!function(t){t[t.NotActive=0]=\"NotActive\",t[t.Starting=1]=\"Starting\",t[t.Stopping=2]=\"Stopping\",t[t.Active=3]=\"Active\",t[t.Stopped=4]=\"Stopped\"}(h||(h={}));let r=null,a=null,u=h.NotActive;function o(){a&&a.finaliseBatch()}function c(){return new Promise((t=>{u=h.Stopping,null!==l&&(clearInterval(l),l=null),a&&(a.clean(),a=null),r&&(r.clean(),setTimeout((()=>{r=null}),20)),setTimeout((()=>{u=h.NotActive,t(null)}),100)}))}function g(){u!==h.Stopped&&(postMessage(\"a_stop\"),c().then((()=>{postMessage(\"a_start\")})))}let p,l=null;self.onmessage=({data:s})=>{if(null!=s){if(\"stop\"===s)return o(),void c().then((()=>{u=h.Stopped}));if(\"forceFlushBatch\"!==s){if(!Array.isArray(s)){if(\"compressed\"===s.type){if(!r)return console.debug(\"OR WebWorker: sender not initialised. Compressed batch.\"),void g();s.batch&&r.sendCompressed(s.batch)}if(\"uncompressed\"===s.type){if(!r)return console.debug(\"OR WebWorker: sender not initialised. Uncompressed batch.\"),void g();s.batch&&r.sendUncompressed(s.batch)}return\"start\"===s.type?(u=h.Starting,r=new t(s.ingestPoint,(()=>{g()}),(t=>{!function(t){postMessage({type:\"failure\",reason:t}),c()}(t)}),s.connAttemptCount,s.connAttemptGap,(t=>{postMessage({type:\"compress\",batch:t},[t.buffer])}),s.pageNo),a=new n(s.pageNo,s.timestamp,s.url,(t=>{r&&r.push(t)}),s.tabId,(()=>postMessage({type:\"queue_empty\"}))),null===l&&(l=setInterval(o,1e4)),u=h.Active):\"auth\"===s.type?r?a?(r.authorise(s.token),void(s.beaconSizeLimit&&a.setBeaconSizeLimit(s.beaconSizeLimit))):(console.debug(\"OR WebWorker: writer not initialised. Received auth.\"),void g()):(console.debug(\"OR WebWorker: sender not initialised. Received auth.\"),void g()):void 0}if(a){const t=a;s.forEach((s=>{55===s[0]&&(s[1]?p=setTimeout((()=>g()),18e5):clearTimeout(p)),t.writeMessage(s)}))}else postMessage(\"not_init\"),g()}else o()}else o()};'], { type: 'text/javascript' })));\n            this.worker.onerror = (e) => {\n                this._debug('webworker_error', e);\n            };\n            this.worker.onmessage = ({ data }) => {\n                this.handleWorkerMsg(data);\n            };\n            const alertWorker = () => {\n                if (this.worker) {\n                    this.worker.postMessage(null);\n                }\n            };\n            // keep better tactics, discard others?\n            this.attachEventListener(window, 'beforeunload', alertWorker, false);\n            this.attachEventListener(document.body, 'mouseleave', alertWorker, false, false);\n            // TODO: stop session after inactivity timeout (make configurable)\n            this.attachEventListener(document, 'visibilitychange', alertWorker, false);\n        }\n        catch (e) {\n            this._debug('worker_start', e);\n        }\n    }\n    handleWorkerMsg(data) {\n        // handling 401 auth restart (new token assignment)\n        if (data === 'a_stop') {\n            this.stop(false);\n        }\n        else if (data === 'a_start') {\n            void this.start({}, true);\n        }\n        else if (data === 'not_init') {\n            this.debug.warn('OR WebWorker: writer not initialised. Restarting tracker');\n        }\n        else if (data.type === 'failure') {\n            this.stop(false);\n            this.debug.error('worker_failed', data.reason);\n            this._debug('worker_failed', data.reason);\n        }\n        else if (data.type === 'compress') {\n            const batch = data.batch;\n            const batchSize = batch.byteLength;\n            if (batchSize > this.compressionThreshold) {\n                gzip(data.batch, { mtime: 0 }, (err, result) => {\n                    if (err) {\n                        this.debug.error('Openreplay compression error:', err);\n                        this.worker?.postMessage({ type: 'uncompressed', batch: batch });\n                    }\n                    else {\n                        this.worker?.postMessage({ type: 'compressed', batch: result });\n                    }\n                });\n            }\n            else {\n                this.worker?.postMessage({ type: 'uncompressed', batch: batch });\n            }\n        }\n        else if (data.type === 'queue_empty') {\n            this.onSessionSent();\n        }\n    }\n    _debug(context, e) {\n        if (this.options.__debug_report_edp !== null) {\n            void fetch(this.options.__debug_report_edp, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    context,\n                    // @ts-ignore\n                    error: `${e}`,\n                }),\n            });\n        }\n        this.debug.error('OpenReplay error: ', context, e);\n    }\n    send(message, urgent = false) {\n        if (this.activityState === ActivityState.NotActive) {\n            return;\n        }\n        // ====================================================\n        if (this.activityState === ActivityState.ColdStart) {\n            this.bufferedMessages1.push(message);\n            if (!this.singleBuffer) {\n                this.bufferedMessages2.push(message);\n            }\n            this.conditionsManager?.processMessage(message);\n        }\n        else {\n            this.messages.push(message);\n        }\n        // TODO: commit on start if there were `urgent` sends;\n        // Clarify where urgent can be used for;\n        // Clarify workflow for each type of message in case it was sent before start\n        //      (like Fetch before start; maybe add an option \"preCapture: boolean\" or sth alike)\n        // Careful: `this.delay` is equal to zero before start so all Timestamp-s will have to be updated on start\n        if (this.activityState === ActivityState.Active && urgent) {\n            this.commit();\n        }\n    }\n    /**\n     * Normal workflow: add timestamp and tab data to batch, then commit it\n     * every ~30ms\n     * */\n    _nCommit() {\n        if (this.socketMode) {\n            this.messages.unshift(TabData(this.session.getTabId()));\n            this.messages.unshift(Timestamp(this.timestamp()));\n            this.commitCallbacks.forEach((cb) => cb(this.messages));\n            this.messages.length = 0;\n            return;\n        }\n        if (this.worker === undefined || !this.messages.length) {\n            return;\n        }\n        if (this.insideIframe) {\n            window.parent.postMessage({\n                line: proto.iframeBatch,\n                messages: this.messages,\n                domain: this.initialHostName,\n            }, '*');\n            this.commitCallbacks.forEach((cb) => cb(this.messages));\n            this.messages.length = 0;\n            return;\n        }\n        try {\n            requestIdleCb(() => {\n                this.messages.unshift(TabData(this.session.getTabId()));\n                this.messages.unshift(Timestamp(this.timestamp()));\n                // why I need to add opt chaining?\n                this.worker?.postMessage(this.messages);\n                this.commitCallbacks.forEach((cb) => cb(this.messages));\n                this.messages.length = 0;\n            });\n        }\n        catch (e) {\n            this._debug('worker_commit', e);\n            this.stop(true);\n            setTimeout(() => {\n                void this.start();\n            }, 500);\n        }\n    }\n    /**\n     * Cold start: add timestamp and tab data to both batches\n     * every 2nd tick, ~60ms\n     * this will make batches a bit larger and replay will work with bigger jumps every frame\n     * but in turn we don't overload batch writer on session start with 1000 batches\n     * */\n    _cStartCommit() {\n        this.coldStartCommitN += 1;\n        if (this.coldStartCommitN === 2) {\n            this.bufferedMessages1.push(Timestamp(this.timestamp()));\n            this.bufferedMessages1.push(TabData(this.session.getTabId()));\n            this.bufferedMessages2.push(Timestamp(this.timestamp()));\n            this.bufferedMessages2.push(TabData(this.session.getTabId()));\n            this.coldStartCommitN = 0;\n        }\n    }\n    commit() {\n        if (this.activityState === ActivityState.ColdStart) {\n            this._cStartCommit();\n        }\n        else {\n            this._nCommit();\n        }\n    }\n    postToWorker(messages) {\n        this.worker?.postMessage(messages);\n        this.commitCallbacks.forEach((cb) => cb(messages));\n        messages.length = 0;\n    }\n    timestamp() {\n        return now() + this.delay;\n    }\n    safe(fn) {\n        const app = this;\n        return function (...args) {\n            try {\n                fn.apply(this, args);\n            }\n            catch (e) {\n                app._debug('safe_fn_call', e);\n                // time: this.timestamp(),\n                // name: e.name,\n                // message: e.message,\n                // stack: e.stack\n            }\n        }; // TODO: correct typing\n    }\n    attachCommitCallback(cb) {\n        this.commitCallbacks.push(cb);\n    }\n    attachStartCallback(cb, useSafe = false) {\n        if (useSafe) {\n            cb = this.safe(cb);\n        }\n        this.startCallbacks.push(cb);\n    }\n    attachStopCallback(cb, useSafe = false) {\n        if (useSafe) {\n            cb = this.safe(cb);\n        }\n        this.stopCallbacks.push(cb);\n    }\n    // Use  app.nodes.attachNodeListener for registered nodes instead\n    attachEventListener(target, type, listener, useSafe = true, useCapture = true) {\n        if (useSafe) {\n            listener = this.safe(listener);\n        }\n        const createListener = () => target ? createEventListener(target, type, listener, useCapture) : null;\n        const deleteListener = () => target ? deleteEventListener(target, type, listener, useCapture) : null;\n        this.attachStartCallback(createListener, useSafe);\n        this.attachStopCallback(deleteListener, useSafe);\n    }\n    // TODO: full correct semantic\n    checkRequiredVersion(version) {\n        const reqVer = version.split(/[.-]/);\n        const ver = this.version.split(/[.-]/);\n        for (let i = 0; i < 3; i++) {\n            if (isNaN(Number(ver[i])) || isNaN(Number(reqVer[i]))) {\n                return false;\n            }\n            if (Number(ver[i]) > Number(reqVer[i])) {\n                return true;\n            }\n            if (Number(ver[i]) < Number(reqVer[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    getTrackerInfo() {\n        return {\n            userUUID: this.localStorage.getItem(this.options.local_uuid_key),\n            projectKey: this.projectKey,\n            revID: this.revID,\n            trackerVersion: this.version,\n            isSnippet: this.options.__is_snippet,\n        };\n    }\n    getSessionInfo() {\n        return {\n            ...this.session.getInfo(),\n            ...this.getTrackerInfo(),\n        };\n    }\n    getSessionToken() {\n        return this.session.getSessionToken();\n    }\n    getSessionID() {\n        return this.session.getInfo().sessionID || undefined;\n    }\n    getSessionURL(options) {\n        const { projectID, sessionID, timestamp } = this.session.getInfo();\n        if (!projectID || !sessionID) {\n            this.debug.error('OpenReplay error: Unable to build session URL');\n            return undefined;\n        }\n        const ingest = this.options.ingestPoint;\n        const isSaas = /api\\.openreplay\\.com/.test(ingest);\n        const projectPath = isSaas ? 'https://app.openreplay.com/ingest' : ingest;\n        const url = projectPath.replace(/ingest$/, `${projectID}/session/${sessionID}`);\n        if (options?.withCurrentTime) {\n            const jumpTo = now() - timestamp;\n            return `${url}?jumpto=${jumpTo}`;\n        }\n        return url;\n    }\n    getHost() {\n        return new URL(this.options.ingestPoint).host;\n    }\n    getProjectKey() {\n        return this.projectKey;\n    }\n    getBaseHref() {\n        if (typeof this.options.resourceBaseHref === 'string') {\n            return this.options.resourceBaseHref;\n        }\n        else if (typeof this.options.resourceBaseHref === 'object') {\n            //TODO: switch between types\n        }\n        if (document.baseURI) {\n            return document.baseURI;\n        }\n        // IE only\n        return (document.head?.getElementsByTagName('base')[0]?.getAttribute('href') ||\n            location.origin + location.pathname);\n    }\n    resolveResourceURL(resourceURL) {\n        const base = new URL(this.getBaseHref());\n        base.pathname += '/' + new URL(resourceURL).pathname;\n        base.pathname.replace(/\\/+/g, '/');\n        return base.toString();\n    }\n    isServiceURL(url) {\n        return url.startsWith(this.options.ingestPoint);\n    }\n    active() {\n        return this.activityState === ActivityState.Active;\n    }\n    resetNextPageSession(flag) {\n        if (flag) {\n            this.sessionStorage.setItem(this.options.session_reset_key, 't');\n        }\n        else {\n            this.sessionStorage.removeItem(this.options.session_reset_key);\n        }\n    }\n    checkSessionToken(forceNew) {\n        const lsReset = this.sessionStorage.getItem(this.options.session_reset_key) !== null;\n        const needNewSessionID = forceNew || lsReset;\n        const sessionToken = this.session.getSessionToken();\n        return needNewSessionID || !sessionToken;\n    }\n    /**\n     * start buffering messages without starting the actual session, which gives\n     * user 30 seconds to \"activate\" and record session by calling `start()` on conditional trigger,\n     * and we will then send buffered batch, so it won't get lost\n     * */\n    async coldStart(startOpts = {}, conditional) {\n        this.singleBuffer = false;\n        const second = 1000;\n        const isNewSession = this.checkSessionToken(startOpts.forceNew);\n        if (conditional) {\n            await this.setupConditionalStart(startOpts);\n        }\n        const cycle = () => {\n            this.orderNumber += 1;\n            adjustTimeOrigin();\n            this.coldStartTs = now();\n            if (this.orderNumber % 2 === 0) {\n                this.bufferedMessages1.length = 0;\n                this.bufferedMessages1.push(Timestamp(this.timestamp()));\n                this.bufferedMessages1.push(TabData(this.session.getTabId()));\n            }\n            else {\n                this.bufferedMessages2.length = 0;\n                this.bufferedMessages2.push(Timestamp(this.timestamp()));\n                this.bufferedMessages2.push(TabData(this.session.getTabId()));\n            }\n            this.stop(false);\n            this.activityState = ActivityState.ColdStart;\n            if (startOpts.sessionHash) {\n                this.session.applySessionHash(startOpts.sessionHash);\n            }\n            if (startOpts.forceNew) {\n                this.session.reset();\n            }\n            this.session.assign({\n                userID: startOpts.userID,\n                metadata: startOpts.metadata,\n            });\n            if (!isNewSession) {\n                this.debug.log('continuing session on new tab', this.session.getTabId());\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                this.send(TabChange(this.session.getTabId()));\n            }\n            this.observer.observe();\n            this.ticker.start();\n        };\n        this.coldInterval = setInterval(() => {\n            cycle();\n        }, 30 * second);\n        cycle();\n    }\n    async setupConditionalStart(startOpts) {\n        this.conditionsManager = new ConditionsManager(this, startOpts);\n        const r = await fetch(this.options.ingestPoint + '/v1/web/start', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                ...this.getTrackerInfo(),\n                timestamp: now(),\n                doNotRecord: true,\n                bufferDiff: 0,\n                userID: this.session.getInfo().userID,\n                token: undefined,\n                deviceMemory,\n                jsHeapSizeLimit,\n                timezone: getTimezone(),\n                width: window.innerWidth,\n                height: window.innerHeight,\n            }),\n        });\n        const { \n        // this token is needed to fetch conditions and flags,\n        // but it can't be used to record a session\n        token, userBrowser, userCity, userCountry, userDevice, userOS, userState, projectID, } = await r.json();\n        this.session.assign({ projectID });\n        this.session.setUserInfo({\n            userBrowser,\n            userCity,\n            userCountry,\n            userDevice,\n            userOS,\n            userState,\n        });\n        const onStartInfo = { sessionToken: token, userUUID: '', sessionID: '' };\n        this.startCallbacks.forEach((cb) => cb(onStartInfo));\n        await this.conditionsManager?.fetchConditions(projectID, token);\n        await this.featureFlags.reloadFlags(token);\n        await this.tagWatcher.fetchTags(this.options.ingestPoint, token);\n        this.conditionsManager?.processFlags(this.featureFlags.flags);\n    }\n    /**\n     * Starts offline session recording\n     * @param {Object} startOpts - options for session start, same as .start()\n     * @param {Function} onSessionSent - callback that will be called once session is fully sent\n     * */\n    offlineRecording(startOpts = {}, onSessionSent) {\n        this.onSessionSent = onSessionSent;\n        this.singleBuffer = true;\n        const isNewSession = this.checkSessionToken(startOpts.forceNew);\n        adjustTimeOrigin();\n        this.coldStartTs = now();\n        const saverBuffer = this.localStorage.getItem(bufferStorageKey);\n        if (saverBuffer) {\n            const data = JSON.parse(saverBuffer);\n            this.bufferedMessages1 = Array.isArray(data) ? data : this.bufferedMessages1;\n            this.localStorage.removeItem(bufferStorageKey);\n        }\n        this.bufferedMessages1.push(Timestamp(this.timestamp()));\n        this.bufferedMessages1.push(TabData(this.session.getTabId()));\n        this.activityState = ActivityState.ColdStart;\n        if (startOpts.sessionHash) {\n            this.session.applySessionHash(startOpts.sessionHash);\n        }\n        if (startOpts.forceNew) {\n            this.session.reset();\n        }\n        this.session.assign({\n            userID: startOpts.userID,\n            metadata: startOpts.metadata,\n        });\n        const onStartInfo = { sessionToken: '', userUUID: '', sessionID: '' };\n        this.startCallbacks.forEach((cb) => cb(onStartInfo));\n        if (!isNewSession) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            this.send(TabChange(this.session.getTabId()));\n        }\n        this.observer.observe();\n        this.ticker.start();\n        return {\n            saveBuffer: this.saveBuffer,\n            getBuffer: this.getBuffer,\n            setBuffer: this.setBuffer,\n        };\n    }\n    /**\n     * Saves the captured messages in localStorage (or whatever is used in its place)\n     *\n     * Then, when this.offlineRecording is called, it will preload this messages and clear the storage item\n     *\n     * Keeping the size of local storage reasonable is up to the end users of this library\n     * */\n    saveBuffer() {\n        this.localStorage.setItem(bufferStorageKey, JSON.stringify(this.bufferedMessages1));\n    }\n    /**\n     * @returns buffer with stored messages for offline recording\n     * */\n    getBuffer() {\n        return this.bufferedMessages1;\n    }\n    /**\n     * Used to set a buffer with messages array\n     * */\n    setBuffer(buffer) {\n        this.bufferedMessages1 = buffer;\n    }\n    /**\n     * Uploads the stored session buffer to backend\n     * @returns promise that resolves once messages are loaded, it has to be awaited\n     * so the session can be uploaded properly\n     * @resolve - if messages were loaded in service worker successfully\n     * @reject {string} - error message\n     * */\n    async uploadOfflineRecording() {\n        this.stop(false);\n        const timestamp = now();\n        this.worker?.postMessage({\n            type: 'start',\n            pageNo: this.session.incPageNo(),\n            ingestPoint: this.options.ingestPoint,\n            timestamp: this.coldStartTs,\n            url: document.URL,\n            connAttemptCount: this.options.connAttemptCount,\n            connAttemptGap: this.options.connAttemptGap,\n            tabId: this.session.getTabId(),\n        });\n        const r = await fetch(this.options.ingestPoint + '/v1/web/start', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                ...this.getTrackerInfo(),\n                timestamp: timestamp,\n                doNotRecord: false,\n                bufferDiff: timestamp - this.coldStartTs,\n                userID: this.session.getInfo().userID,\n                token: undefined,\n                deviceMemory,\n                jsHeapSizeLimit,\n                timezone: getTimezone(),\n            }),\n        });\n        const { token, userBrowser, userCity, userCountry, userDevice, userOS, userState, beaconSizeLimit, projectID, } = await r.json();\n        this.worker?.postMessage({\n            type: 'auth',\n            token,\n            beaconSizeLimit,\n        });\n        this.session.assign({ projectID });\n        this.session.setUserInfo({\n            userBrowser,\n            userCity,\n            userCountry,\n            userDevice,\n            userOS,\n            userState,\n        });\n        while (this.bufferedMessages1.length > 0) {\n            await this.flushBuffer(this.bufferedMessages1);\n        }\n        this.postToWorker([['q_end']]);\n        this.clearBuffers();\n    }\n    async _start(startOpts = {}, resetByWorker = false, conditionName) {\n        const isColdStart = this.activityState === ActivityState.ColdStart;\n        if (isColdStart && this.coldInterval) {\n            clearInterval(this.coldInterval);\n        }\n        if (!this.worker) {\n            const reason = 'No worker found: perhaps, CSP is not set.';\n            this.signalError(reason, []);\n            return Promise.resolve(UnsuccessfulStart(reason));\n        }\n        if (this.activityState === ActivityState.Active ||\n            this.activityState === ActivityState.Starting) {\n            const reason = 'OpenReplay: trying to call `start()` on the instance that has been started already.';\n            return Promise.resolve(UnsuccessfulStart(reason));\n        }\n        this.activityState = ActivityState.Starting;\n        if (!isColdStart) {\n            adjustTimeOrigin();\n        }\n        if (startOpts.sessionHash) {\n            this.session.applySessionHash(startOpts.sessionHash);\n        }\n        if (startOpts.forceNew) {\n            // Reset session metadata only if requested directly\n            this.session.reset();\n        }\n        this.session.assign({\n            // MBTODO: maybe it would make sense to `forceNew` if the `userID` was changed\n            userID: startOpts.userID,\n            metadata: startOpts.metadata,\n        });\n        const timestamp = now();\n        this.worker.postMessage({\n            type: 'start',\n            pageNo: this.session.incPageNo(),\n            ingestPoint: this.options.ingestPoint,\n            timestamp: isColdStart ? this.coldStartTs : timestamp,\n            url: document.URL,\n            connAttemptCount: this.options.connAttemptCount,\n            connAttemptGap: this.options.connAttemptGap,\n            tabId: this.session.getTabId(),\n        });\n        const sessionToken = this.session.getSessionToken();\n        const isNewSession = this.checkSessionToken(startOpts.forceNew);\n        this.sessionStorage.removeItem(this.options.session_reset_key);\n        this.debug.log('OpenReplay: starting session; need new session id?', isNewSession, 'session token: ', sessionToken);\n        try {\n            const r = await window.fetch(this.options.ingestPoint + '/v1/web/start', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    ...this.getTrackerInfo(),\n                    timestamp,\n                    doNotRecord: false,\n                    bufferDiff: timestamp - this.coldStartTs,\n                    userID: this.session.getInfo().userID,\n                    token: isNewSession ? undefined : sessionToken,\n                    deviceMemory,\n                    jsHeapSizeLimit,\n                    timezone: getTimezone(),\n                    condition: conditionName,\n                    assistOnly: startOpts.assistOnly ?? this.socketMode,\n                }),\n            });\n            if (r.status !== 200) {\n                const error = await r.text();\n                const reason = error === CANCELED ? CANCELED : `Server error: ${r.status}. ${error}`;\n                return Promise.reject(reason);\n            }\n            if (!this.worker) {\n                const reason = 'no worker found after start request (this might not happen)';\n                this.signalError(reason, []);\n                return Promise.reject(reason);\n            }\n            const { token, userUUID, projectID, beaconSizeLimit, compressionThreshold, // how big the batch should be before we decide to compress it\n            delay, //  derived from token\n            sessionID, //  derived from token\n            startTimestamp, // real startTS (server time), derived from sessionID\n            userBrowser, userCity, userCountry, userDevice, userOS, userState, canvasEnabled, canvasQuality, canvasFPS, assistOnly: socketOnly, } = await r.json();\n            if (typeof token !== 'string' ||\n                typeof userUUID !== 'string' ||\n                (typeof startTimestamp !== 'number' && typeof startTimestamp !== 'undefined') ||\n                typeof sessionID !== 'string' ||\n                typeof delay !== 'number' ||\n                (typeof beaconSizeLimit !== 'number' && typeof beaconSizeLimit !== 'undefined')) {\n                const reason = `Incorrect server response: ${JSON.stringify(r)}`;\n                this.signalError(reason, []);\n                return Promise.reject(reason);\n            }\n            this.delay = delay;\n            this.session.setSessionToken(token);\n            this.session.setUserInfo({\n                userBrowser,\n                userCity,\n                userCountry,\n                userDevice,\n                userOS,\n                userState,\n            });\n            this.session.assign({\n                sessionID,\n                timestamp: startTimestamp || timestamp,\n                projectID,\n            });\n            if (socketOnly) {\n                this.socketMode = true;\n                this.worker.postMessage('stop');\n            }\n            else {\n                this.worker.postMessage({\n                    type: 'auth',\n                    token,\n                    beaconSizeLimit,\n                });\n            }\n            if (!isNewSession && token === sessionToken) {\n                this.debug.log('continuing session on new tab', this.session.getTabId());\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                this.send(TabChange(this.session.getTabId()));\n            }\n            // (Re)send Metadata for the case of a new session\n            Object.entries(this.session.getInfo().metadata).forEach(([key, value]) => this.send(Metadata(key, value)));\n            this.localStorage.setItem(this.options.local_uuid_key, userUUID);\n            this.compressionThreshold = compressionThreshold;\n            const onStartInfo = { sessionToken: token, userUUID, sessionID };\n            // TODO: start as early as possible (before receiving the token)\n            /** after start */\n            this.startCallbacks.forEach((cb) => cb(onStartInfo)); // MBTODO: callbacks after DOM \"mounted\" (observed)\n            void this.featureFlags.reloadFlags();\n            await this.tagWatcher.fetchTags(this.options.ingestPoint, token);\n            this.activityState = ActivityState.Active;\n            if (canvasEnabled && !this.options.canvas.disableCanvas) {\n                this.canvasRecorder =\n                    this.canvasRecorder ??\n                        new CanvasRecorder(this, {\n                            fps: canvasFPS,\n                            quality: canvasQuality,\n                            isDebug: this.options.canvas.__save_canvas_locally,\n                            fixedScaling: this.options.canvas.fixedCanvasScaling,\n                            useAnimationFrame: this.options.canvas.useAnimationFrame,\n                        });\n                this.canvasRecorder.startTracking();\n            }\n            /** --------------- COLD START BUFFER ------------------*/\n            if (isColdStart) {\n                const biggestBuffer = this.bufferedMessages1.length > this.bufferedMessages2.length\n                    ? this.bufferedMessages1\n                    : this.bufferedMessages2;\n                while (biggestBuffer.length > 0) {\n                    await this.flushBuffer(biggestBuffer);\n                }\n                this.clearBuffers();\n                this.commit();\n                /** --------------- COLD START BUFFER ------------------*/\n            }\n            else {\n                if (this.insideIframe && this.rootId) {\n                    this.observer.crossdomainObserve(this.rootId, this.frameOderNumber);\n                }\n                else {\n                    this.observer.observe();\n                }\n                this.ticker.start();\n            }\n            this.uxtManager = this.uxtManager ? this.uxtManager : new UserTestManager(this, uxtStorageKey);\n            let uxtId;\n            const savedUxtTag = this.localStorage.getItem(uxtStorageKey);\n            if (savedUxtTag) {\n                uxtId = parseInt(savedUxtTag, 10);\n            }\n            if (location?.search) {\n                const query = new URLSearchParams(location.search);\n                if (query.has('oruxt')) {\n                    const qId = query.get('oruxt');\n                    uxtId = qId ? parseInt(qId, 10) : undefined;\n                }\n            }\n            if (uxtId) {\n                if (!this.uxtManager.isActive) {\n                    // eslint-disable-next-line\n                    this.uxtManager.getTest(uxtId, token, Boolean(savedUxtTag)).then((id) => {\n                        if (id) {\n                            this.onUxtCb.forEach((cb) => cb(id));\n                        }\n                    });\n                }\n                else {\n                    // @ts-ignore\n                    this.onUxtCb.forEach((cb) => cb(uxtId));\n                }\n            }\n            return SuccessfulStart(onStartInfo);\n        }\n        catch (reason) {\n            this.stop();\n            this.session.reset();\n            if (reason === CANCELED) {\n                this.signalError(CANCELED, []);\n                return UnsuccessfulStart(CANCELED);\n            }\n            this._debug('session_start', reason);\n            const errorMessage = reason instanceof Error ? reason.message : reason.toString();\n            this.signalError(errorMessage, []);\n            return UnsuccessfulStart(errorMessage);\n        }\n    }\n    addOnUxtCb(cb) {\n        // @ts-ignore\n        this.onUxtCb.push(cb);\n    }\n    getUxtId() {\n        return this.uxtManager?.getTestId();\n    }\n    async waitStart() {\n        return new Promise((resolve) => {\n            const check = () => {\n                if (this.canStart) {\n                    resolve(true);\n                }\n                else {\n                    setTimeout(check, 25);\n                }\n            };\n            check();\n        });\n    }\n    async waitStarted() {\n        return new Promise((resolve) => {\n            const check = () => {\n                if (this.activityState === ActivityState.Active) {\n                    resolve(true);\n                }\n                else {\n                    setTimeout(check, 25);\n                }\n            };\n            check();\n        });\n    }\n    /**\n     * basically we ask other tabs during constructor\n     * and here we just apply 10ms delay just in case\n     * */\n    async start(...args) {\n        if (this.activityState === ActivityState.Active ||\n            this.activityState === ActivityState.Starting) {\n            const reason = 'OpenReplay: trying to call `start()` on the instance that has been started already.';\n            return Promise.resolve(UnsuccessfulStart(reason));\n        }\n        if (!document.hidden) {\n            await this.waitStart();\n            return this._start(...args);\n        }\n        else {\n            return new Promise((resolve) => {\n                const onVisibilityChange = async () => {\n                    if (!document.hidden) {\n                        await this.waitStart();\n                        // eslint-disable-next-line\n                        document.removeEventListener('visibilitychange', onVisibilityChange);\n                        resolve(this._start(...args));\n                    }\n                };\n                // eslint-disable-next-line\n                document.addEventListener('visibilitychange', onVisibilityChange);\n            });\n        }\n    }\n    forceFlushBatch() {\n        this.worker?.postMessage('forceFlushBatch');\n    }\n    getTabId() {\n        return this.session.getTabId();\n    }\n    clearBuffers() {\n        this.bufferedMessages1.length = 0;\n        this.bufferedMessages2.length = 0;\n    }\n    /**\n     * Creates a named hook that expects event name, data string and msg direction (up/down),\n     * it will skip any message bigger than 5 mb or event name bigger than 255 symbols\n     * @returns {(msgType: string, data: string, dir: \"up\" | \"down\") => void}\n     * */\n    trackWs(channelName) {\n        const channel = channelName;\n        return (msgType, data, dir = 'down') => {\n            if (typeof msgType !== 'string' ||\n                typeof data !== 'string' ||\n                data.length > 5 * 1024 * 1024 ||\n                msgType.length > 255) {\n                return;\n            }\n            this.send(WSChannel('websocket', channel, data, this.timestamp(), dir, msgType));\n        };\n    }\n    stop(stopWorker = true) {\n        if (this.activityState !== ActivityState.NotActive) {\n            try {\n                this.attributeSender.clear();\n                this.sanitizer.clear();\n                this.observer.disconnect();\n                this.nodes.clear();\n                this.ticker.stop();\n                this.stopCallbacks.forEach((cb) => cb());\n                this.debug.log('OpenReplay tracking stopped.');\n                this.tagWatcher.clear();\n                if (this.worker && stopWorker) {\n                    this.worker.postMessage('stop');\n                }\n                this.canvasRecorder?.clear();\n            }\n            finally {\n                this.activityState = ActivityState.NotActive;\n            }\n        }\n    }\n}\n", "import { ConnectionInformation } from '../app/messages.gen.js';\nexport default function (app) {\n    const connection = navigator.connection ||\n        navigator.mozConnection ||\n        navigator.webkitConnection;\n    if (connection === undefined) {\n        return;\n    }\n    const sendConnectionInformation = () => app.send(ConnectionInformation(Math.round(connection.downlink * 1000), connection.type || 'unknown'));\n    sendConnectionInformation();\n    connection.addEventListener('change', sendConnectionInformation);\n}\n", "import { IN_BROWSER } from '../utils.js';\nimport { ConsoleLog } from '../app/messages.gen.js';\nconst printError = IN_BROWSER && 'InstallTrigger' in window // detect Firefox\n    ? (e) => e.message + '\\n' + e.stack\n    : (e) => e.stack || e.message;\nfunction printString(arg) {\n    if (arg === undefined) {\n        return 'undefined';\n    }\n    if (arg === null) {\n        return 'null';\n    }\n    if (arg instanceof Error) {\n        return printError(arg);\n    }\n    if (Array.isArray(arg)) {\n        return `Array(${arg.length})`;\n    }\n    return String(arg);\n}\nfunction printFloat(arg) {\n    if (typeof arg !== 'number')\n        return 'NaN';\n    return arg.toString();\n}\nfunction printInt(arg) {\n    if (typeof arg !== 'number')\n        return 'NaN';\n    return Math.floor(arg).toString();\n}\nfunction printObject(arg) {\n    if (arg === undefined) {\n        return 'undefined';\n    }\n    if (arg === null) {\n        return 'null';\n    }\n    if (arg instanceof Error) {\n        return printError(arg);\n    }\n    if (Array.isArray(arg)) {\n        const length = arg.length;\n        const values = arg.slice(0, 10).map(printString).join(', ');\n        return `Array(${length})[${values}]`;\n    }\n    if (typeof arg === 'object') {\n        const res = [];\n        let i = 0;\n        for (const k in arg) {\n            if (++i === 10) {\n                break;\n            }\n            const v = arg[k];\n            res.push(k + ': ' + printString(v));\n        }\n        return '{' + res.join(', ') + '}';\n    }\n    return arg.toString();\n}\nfunction printf(args) {\n    if (typeof args[0] === 'string') {\n        args.unshift(args.shift().replace(/%(o|s|f|d|i)/g, (s, t) => {\n            const arg = args.shift();\n            if (arg === undefined)\n                return s;\n            switch (t) {\n                case 'o':\n                    return printObject(arg);\n                case 's':\n                    return printString(arg);\n                case 'f':\n                    return printFloat(arg);\n                case 'd':\n                case 'i':\n                    return printInt(arg);\n                default:\n                    return s;\n            }\n        }));\n    }\n    return args.map(printObject).join(' ');\n}\nconst consoleMethods = ['log', 'info', 'warn', 'error', 'debug', 'assert'];\nexport default function (app, opts) {\n    const options = Object.assign({\n        consoleMethods,\n        consoleThrottling: 30,\n    }, opts);\n    if (!Array.isArray(options.consoleMethods) || options.consoleMethods.length === 0) {\n        return;\n    }\n    const sendConsoleLog = app.safe((level, args) => app.send(ConsoleLog(level, printf(args))));\n    let n = 0;\n    const reset = () => {\n        n = 0;\n    };\n    app.attachStartCallback(reset);\n    app.ticker.attach(reset, 33, false);\n    const patchConsole = (console, ctx) => {\n        const handler = {\n            apply: function (target, thisArg, argumentsList) {\n                Reflect.apply(target, ctx, argumentsList);\n                n = n + 1;\n                if (n > options.consoleThrottling) {\n                    return;\n                }\n                else {\n                    sendConsoleLog(target.name, argumentsList);\n                }\n            },\n        };\n        options.consoleMethods.forEach((method) => {\n            if (consoleMethods.indexOf(method) === -1) {\n                app.debug.error(`OpenReplay: unsupported console method \"${method}\"`);\n                return;\n            }\n            const fn = ctx.console[method];\n            console[method] = new Proxy(fn, handler);\n        });\n    };\n    const patchContext = app.safe((context) => patchConsole(context.console, context));\n    patchContext(window);\n    app.observer.attachContextCallback(patchContext);\n}\n", "import { JSException } from '../app/messages.gen.js';\nimport ErrorStackParser from 'error-stack-parser';\nfunction getDefaultStack(e) {\n    return [\n        {\n            columnNumber: e.colno,\n            lineNumber: e.lineno,\n            fileName: e.filename,\n            functionName: '',\n            source: '',\n        },\n    ];\n}\nexport function getExceptionMessage(error, fallbackStack, metadata = {}) {\n    let stack = fallbackStack;\n    try {\n        stack = ErrorStackParser.parse(error);\n    }\n    catch (e) { }\n    return JSException(error.name, error.message, JSON.stringify(stack), JSON.stringify(metadata));\n}\nexport function getExceptionMessageFromEvent(e, context = window, metadata = {}) {\n    if (e instanceof ErrorEvent) {\n        if (e.error instanceof Error) {\n            return getExceptionMessage(e.error, getDefaultStack(e), metadata);\n        }\n        else {\n            let [name, message] = e.message.split(':');\n            if (!message) {\n                name = 'Error';\n                message = e.message;\n            }\n            return JSException(name, message, JSON.stringify(getDefaultStack(e)), JSON.stringify(metadata));\n        }\n    }\n    else if ('PromiseRejectionEvent' in context && e instanceof context.PromiseRejectionEvent) {\n        if (e.reason instanceof Error) {\n            return getExceptionMessage(e.reason, [], metadata);\n        }\n        else {\n            let message;\n            try {\n                message = JSON.stringify(e.reason);\n            }\n            catch (_) {\n                message = String(e.reason);\n            }\n            return JSException('Unhandled Promise Rejection', message, '[]', JSON.stringify(metadata));\n        }\n    }\n    return null;\n}\nexport default function (app, opts) {\n    const options = Object.assign({\n        captureExceptions: true,\n    }, opts);\n    function patchContext(context) {\n        function handler(e) {\n            const msg = getExceptionMessageFromEvent(e, context);\n            if (msg != null) {\n                app.send(msg);\n            }\n        }\n        app.attachEventListener(context, 'unhandledrejection', handler);\n        app.attachEventListener(context, 'error', handler);\n    }\n    if (options.captureExceptions) {\n        app.observer.attachContextCallback(patchContext); // TODO: attach once-per-iframe (?)\n        patchContext(window);\n    }\n}\n", "import { isURL, IS_FIREFOX, MAX_STR_LEN, createMutationObserver } from '../utils.js';\nimport { ResourceTiming, SetNodeAttributeURLBased } from '../app/messages.gen.js';\nimport { hasTag } from '../app/guards.js';\nfunction resolveURL(url, location = document.location) {\n    url = url.trim();\n    if (url.startsWith('//') ||\n        url.startsWith('http://') ||\n        url.startsWith('https://') ||\n        url.startsWith('data:') // any other possible value here? https://bugzilla.mozilla.org/show_bug.cgi?id=1758035\n    ) {\n        return url;\n    }\n    else if (url.startsWith('/')) {\n        return location.origin + url;\n    }\n    else {\n        return location.origin + location.pathname + url;\n    }\n}\n// https://bugzilla.mozilla.org/show_bug.cgi?id=1607081\nfunction isSVGInFireFox(url) {\n    return IS_FIREFOX && (url.startsWith('data:image/svg+xml') || url.match(/.svg$|/i));\n}\nconst PLACEHOLDER_SRC = 'https://static.openreplay.com/tracker/placeholder.jpeg';\nexport default function (app) {\n    function sendPlaceholder(id, node) {\n        app.attributeSender.sendSetAttribute(id, 'src', PLACEHOLDER_SRC);\n        const { width, height } = node.getBoundingClientRect();\n        if (!node.hasAttribute('width')) {\n            app.attributeSender.sendSetAttribute(id, 'width', String(width));\n        }\n        if (!node.hasAttribute('height')) {\n            app.attributeSender.sendSetAttribute(id, 'height', String(height));\n        }\n    }\n    const sendSrcset = function (id, img) {\n        const { srcset } = img;\n        if (!srcset) {\n            return;\n        }\n        const resolvedSrcset = srcset\n            .split(srcset.match(/,\\s+/) ? /,\\s+/ : ',')\n            .map((str) => resolveURL(str))\n            .join(', ');\n        app.attributeSender.sendSetAttribute(id, 'srcset', resolvedSrcset);\n    };\n    const sendSrc = function (id, img) {\n        if (img.src.length > MAX_STR_LEN) {\n            sendPlaceholder(id, img);\n        }\n        app.send(SetNodeAttributeURLBased(id, 'src', img.src, app.getBaseHref()));\n    };\n    const sendImgError = app.safe(function (img) {\n        const resolvedSrc = resolveURL(img.src || ''); // Src type is null sometimes. - is it true?\n        if (isURL(resolvedSrc)) {\n            app.send(ResourceTiming(app.timestamp(), 0, 0, 0, 0, 0, resolvedSrc, 'img', 0, false));\n        }\n    });\n    const sendImgAttrs = app.safe(function (img) {\n        const id = app.nodes.getID(img);\n        if (id === undefined) {\n            return;\n        }\n        if (!img.complete) {\n            return;\n        }\n        if (img.naturalHeight === 0 && img.naturalWidth === 0 && !isSVGInFireFox(img.src)) {\n            sendImgError(img);\n        }\n        else if (app.sanitizer.isHidden(id) || app.sanitizer.isObscured(id)) {\n            sendPlaceholder(id, img);\n        }\n        else {\n            sendSrc(id, img);\n            sendSrcset(id, img);\n        }\n    });\n    const observer = createMutationObserver(app.safe((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type === 'attributes') {\n                const target = mutation.target;\n                const id = app.nodes.getID(target);\n                if (id === undefined) {\n                    return;\n                }\n                if (mutation.attributeName === 'src') {\n                    sendSrc(id, target);\n                }\n                if (mutation.attributeName === 'srcset') {\n                    sendSrcset(id, target);\n                }\n            }\n        }\n    }));\n    app.attachStopCallback(() => {\n        observer.disconnect();\n    });\n    app.nodes.attachNodeCallback((node) => {\n        if (!hasTag(node, 'img')) {\n            return;\n        }\n        app.nodes.attachNodeListener(node, 'error', () => sendImgError(node));\n        app.nodes.attachNodeListener(node, 'load', () => sendImgAttrs(node));\n        sendImgAttrs(node);\n        observer.observe(node, { attributes: true, attributeFilter: ['src', 'srcset'] });\n    });\n}\n", "import { normSpaces, IN_BROWSER, getLabelAttribute, now } from '../utils.js';\nimport { hasTag } from '../app/guards.js';\nimport { InputChange, SetInputValue, SetInputChecked } from '../app/messages.gen.js';\nconst INPUT_TYPES = [\n    'text',\n    'password',\n    'email',\n    'search',\n    'number',\n    'range',\n    'date',\n    'tel',\n    'time',\n];\nfunction isTextFieldElement(node) {\n    if (hasTag(node, 'textarea')) {\n        return true;\n    }\n    if (!hasTag(node, 'input')) {\n        return false;\n    }\n    return INPUT_TYPES.includes(node.type);\n}\nfunction isCheckbox(node) {\n    if (!hasTag(node, 'input')) {\n        return false;\n    }\n    const type = node.type;\n    return type === 'checkbox' || type === 'radio';\n}\nconst labelElementFor = IN_BROWSER && 'labels' in HTMLInputElement.prototype\n    ? (node) => {\n        let p = node;\n        while ((p = p.parentNode) !== null) {\n            if (hasTag(p, 'label')) {\n                return p;\n            }\n        }\n        const labels = node.labels;\n        if (labels !== null && labels.length === 1) {\n            return labels[0];\n        }\n    }\n    : (node) => {\n        let p = node;\n        while ((p = p.parentNode) !== null) {\n            if (hasTag(p, 'label')) {\n                return p;\n            }\n        }\n        const id = node.id;\n        if (id) {\n            const labels = node.ownerDocument.querySelectorAll('label[for=\"' + id + '\"]');\n            if (labels !== null && labels.length === 1) {\n                return labels[0];\n            }\n        }\n    };\nexport function getInputLabel(node) {\n    let label = getLabelAttribute(node);\n    if (label === null) {\n        const labelElement = labelElementFor(node);\n        label =\n            (labelElement && labelElement.innerText) ||\n                node.placeholder ||\n                node.name ||\n                node.id ||\n                node.className ||\n                node.type;\n    }\n    return normSpaces(label).slice(0, 100);\n}\nexport const InputMode = {\n    Plain: 0,\n    Obscured: 1,\n    Hidden: 2,\n};\nexport default function (app, opts) {\n    const options = Object.assign({\n        obscureInputNumbers: true,\n        obscureInputEmails: true,\n        defaultInputMode: InputMode.Obscured,\n        obscureInputDates: false,\n    }, opts);\n    function getInputValue(id, node) {\n        let value = node.value;\n        let inputMode = options.defaultInputMode;\n        if (node.type === 'password' || app.sanitizer.isHidden(id)) {\n            inputMode = InputMode.Hidden;\n        }\n        else if (app.sanitizer.isObscured(id) ||\n            (inputMode === InputMode.Plain &&\n                ((options.obscureInputNumbers && node.type !== 'date' && /\\d\\d\\d\\d/.test(value)) ||\n                    (options.obscureInputDates && node.type === 'date') ||\n                    (options.obscureInputEmails && (node.type === 'email' || !!~value.indexOf('@')))))) {\n            inputMode = InputMode.Obscured;\n        }\n        let mask = 0;\n        switch (inputMode) {\n            case InputMode.Hidden:\n                mask = -1;\n                value = '';\n                break;\n            case InputMode.Obscured:\n                mask = value.length;\n                value = '';\n                break;\n        }\n        return { value, mask };\n    }\n    function sendInputValue(id, node) {\n        const { value, mask } = getInputValue(id, node);\n        app.send(SetInputValue(id, value, mask));\n    }\n    const inputValues = new Map();\n    const checkboxValues = new Map();\n    app.attachStopCallback(() => {\n        inputValues.clear();\n        checkboxValues.clear();\n    });\n    function trackInputValue(id, node) {\n        if (inputValues.get(id) === node.value) {\n            return;\n        }\n        inputValues.set(id, node.value);\n        sendInputValue(id, node);\n    }\n    function trackCheckboxValue(id, value) {\n        if (checkboxValues.get(id) === value) {\n            return;\n        }\n        checkboxValues.set(id, value);\n        app.send(SetInputChecked(id, value));\n    }\n    // The only way (to our knowledge) to track all kinds of input changes, including those made by JS\n    app.ticker.attach(() => {\n        inputValues.forEach((value, id) => {\n            const node = app.nodes.getNode(id);\n            if (!node)\n                return inputValues.delete(id);\n            trackInputValue(id, node);\n        });\n        checkboxValues.forEach((checked, id) => {\n            const node = app.nodes.getNode(id);\n            if (!node)\n                return checkboxValues.delete(id);\n            trackCheckboxValue(id, node.checked);\n        });\n    }, 3);\n    function sendInputChange(id, node, hesitationTime, inputTime) {\n        const { value, mask } = getInputValue(id, node);\n        const label = getInputLabel(node);\n        app.send(InputChange(id, value, mask !== 0, label, hesitationTime, inputTime));\n    }\n    app.nodes.attachNodeCallback(app.safe((node) => {\n        const id = app.nodes.getID(node);\n        if (id === undefined) {\n            return;\n        }\n        // TODO: support multiple select (?): use selectedOptions;\n        if (hasTag(node, 'select')) {\n            sendInputValue(id, node);\n            app.nodes.attachNodeListener(node, 'change', () => sendInputValue(id, node));\n        }\n        if (isTextFieldElement(node)) {\n            trackInputValue(id, node);\n            let nodeFocusTime = 0;\n            let nodeHesitationTime = 0;\n            let inputTime = 0;\n            const onFocus = () => {\n                nodeFocusTime = now();\n            };\n            const onInput = () => {\n                if (nodeHesitationTime === 0 && nodeFocusTime !== 0) {\n                    nodeHesitationTime = now() - nodeFocusTime;\n                }\n            };\n            const onChange = () => {\n                if (nodeFocusTime !== 0) {\n                    inputTime = now() - nodeFocusTime;\n                }\n                sendInputChange(id, node, nodeHesitationTime, inputTime);\n                nodeHesitationTime = 0;\n                inputTime = 0;\n                nodeFocusTime = 0;\n            };\n            app.nodes.attachNodeListener(node, 'focus', onFocus);\n            app.nodes.attachNodeListener(node, 'input', onInput);\n            app.nodes.attachNodeListener(node, 'change', onChange);\n            return;\n        }\n        if (isCheckbox(node)) {\n            trackCheckboxValue(id, node.checked);\n            app.nodes.attachNodeListener(node, 'change', () => trackCheckboxValue(id, node.checked));\n            return;\n        }\n    }));\n}\n", "// License: MIT\n// Author: Anton Medvedev <anton@medv.io>\n// Source: https://github.com/antonmedv/finder\nlet config;\nlet rootDocument;\nlet start;\nexport function finder(input, options) {\n    start = new Date();\n    if (input.nodeType !== Node.ELEMENT_NODE) {\n        throw new Error(`Can't generate CSS selector for non-element node type.`);\n    }\n    if ('html' === input.tagName.toLowerCase()) {\n        return 'html';\n    }\n    const defaults = {\n        root: document.body,\n        idName: (name) => true,\n        className: (name) => true,\n        tagName: (name) => true,\n        attr: (name, value) => false,\n        seedMinLength: 1,\n        optimizedMinLength: 2,\n        threshold: 1000,\n        maxNumberOfTries: 10000,\n        timeoutMs: undefined,\n    };\n    config = { ...defaults, ...options };\n    rootDocument = findRootDocument(config.root, defaults);\n    let path = bottomUpSearch(input, 'all', () => bottomUpSearch(input, 'two', () => bottomUpSearch(input, 'one', () => bottomUpSearch(input, 'none'))));\n    if (path) {\n        const optimized = sort(optimize(path, input));\n        if (optimized.length > 0) {\n            path = optimized[0];\n        }\n        return selector(path);\n    }\n    else {\n        throw new Error(`Selector was not found.`);\n    }\n}\nfunction findRootDocument(rootNode, defaults) {\n    if (rootNode.nodeType === Node.DOCUMENT_NODE) {\n        return rootNode;\n    }\n    if (rootNode === defaults.root) {\n        return rootNode.ownerDocument;\n    }\n    return rootNode;\n}\nfunction bottomUpSearch(input, limit, fallback) {\n    let path = null;\n    let stack = [];\n    let current = input;\n    let i = 0;\n    while (current) {\n        const elapsedTime = new Date().getTime() - start.getTime();\n        if (config.timeoutMs !== undefined && elapsedTime > config.timeoutMs) {\n            throw new Error(`Timeout: Can't find a unique selector after ${elapsedTime}ms`);\n        }\n        let level = maybe(id(current)) ||\n            maybe(...attr(current)) ||\n            maybe(...classNames(current)) ||\n            maybe(tagName(current)) || [any()];\n        const nth = index(current);\n        if (limit == 'all') {\n            if (nth) {\n                level = level.concat(level.filter(dispensableNth).map((node) => nthChild(node, nth)));\n            }\n        }\n        else if (limit == 'two') {\n            level = level.slice(0, 1);\n            if (nth) {\n                level = level.concat(level.filter(dispensableNth).map((node) => nthChild(node, nth)));\n            }\n        }\n        else if (limit == 'one') {\n            const [node] = (level = level.slice(0, 1));\n            if (nth && dispensableNth(node)) {\n                level = [nthChild(node, nth)];\n            }\n        }\n        else if (limit == 'none') {\n            level = [any()];\n            if (nth) {\n                level = [nthChild(level[0], nth)];\n            }\n        }\n        for (let node of level) {\n            node.level = i;\n        }\n        stack.push(level);\n        if (stack.length >= config.seedMinLength) {\n            path = findUniquePath(stack, fallback);\n            if (path) {\n                break;\n            }\n        }\n        current = current.parentElement;\n        i++;\n    }\n    if (!path) {\n        path = findUniquePath(stack, fallback);\n    }\n    if (!path && fallback) {\n        return fallback();\n    }\n    return path;\n}\nfunction findUniquePath(stack, fallback) {\n    const paths = sort(combinations(stack));\n    if (paths.length > config.threshold) {\n        return fallback ? fallback() : null;\n    }\n    for (let candidate of paths) {\n        if (unique(candidate)) {\n            return candidate;\n        }\n    }\n    return null;\n}\nfunction selector(path) {\n    let node = path[0];\n    let query = node.name;\n    for (let i = 1; i < path.length; i++) {\n        const level = path[i].level || 0;\n        if (node.level === level - 1) {\n            query = `${path[i].name} > ${query}`;\n        }\n        else {\n            query = `${path[i].name} ${query}`;\n        }\n        node = path[i];\n    }\n    return query;\n}\nfunction penalty(path) {\n    return path.map((node) => node.penalty).reduce((acc, i) => acc + i, 0);\n}\nfunction unique(path) {\n    const css = selector(path);\n    switch (rootDocument.querySelectorAll(css).length) {\n        case 0:\n            throw new Error(`Can't select any node with this selector: ${css}`);\n        case 1:\n            return true;\n        default:\n            return false;\n    }\n}\nfunction id(input) {\n    const elementId = input.getAttribute('id');\n    if (elementId && config.idName(elementId)) {\n        return {\n            name: '#' + CSS.escape(elementId),\n            penalty: 0,\n        };\n    }\n    return null;\n}\nfunction attr(input) {\n    const attrs = Array.from(input.attributes).filter((attr) => config.attr(attr.name, attr.value));\n    return attrs.map((attr) => ({\n        name: `[${CSS.escape(attr.name)}=\"${CSS.escape(attr.value)}\"]`,\n        penalty: 0.5,\n    }));\n}\nfunction classNames(input) {\n    const names = Array.from(input.classList).filter(config.className);\n    return names.map((name) => ({\n        name: '.' + CSS.escape(name),\n        penalty: 1,\n    }));\n}\nfunction tagName(input) {\n    const name = input.tagName.toLowerCase();\n    if (config.tagName(name)) {\n        return {\n            name,\n            penalty: 2,\n        };\n    }\n    return null;\n}\nfunction any() {\n    return {\n        name: '*',\n        penalty: 3,\n    };\n}\nfunction index(input) {\n    const parent = input.parentNode;\n    if (!parent) {\n        return null;\n    }\n    let child = parent.firstChild;\n    if (!child) {\n        return null;\n    }\n    let i = 0;\n    while (child) {\n        if (child.nodeType === Node.ELEMENT_NODE) {\n            i++;\n        }\n        if (child === input) {\n            break;\n        }\n        child = child.nextSibling;\n    }\n    return i;\n}\nfunction nthChild(node, i) {\n    return {\n        name: node.name + `:nth-child(${i})`,\n        penalty: node.penalty + 1,\n    };\n}\nfunction dispensableNth(node) {\n    return node.name !== 'html' && !node.name.startsWith('#');\n}\nfunction maybe(...level) {\n    const list = level.filter(notEmpty);\n    if (list.length > 0) {\n        return list;\n    }\n    return null;\n}\nfunction notEmpty(value) {\n    return value !== null && value !== undefined;\n}\nfunction* combinations(stack, path = []) {\n    if (stack.length > 0) {\n        for (let node of stack[0]) {\n            yield* combinations(stack.slice(1, stack.length), path.concat(node));\n        }\n    }\n    else {\n        yield path;\n    }\n}\nfunction sort(paths) {\n    return [...paths].sort((a, b) => penalty(a) - penalty(b));\n}\nfunction* optimize(path, input, scope = {\n    counter: 0,\n    visited: new Map(),\n}) {\n    if (path.length > 2 && path.length > config.optimizedMinLength) {\n        for (let i = 1; i < path.length - 1; i++) {\n            if (scope.counter > config.maxNumberOfTries) {\n                return; // Okay At least I tried!\n            }\n            scope.counter += 1;\n            const newPath = [...path];\n            newPath.splice(i, 1);\n            const newPathKey = selector(newPath);\n            if (scope.visited.has(newPathKey)) {\n                return;\n            }\n            if (unique(newPath) && same(newPath, input)) {\n                yield newPath;\n                scope.visited.set(newPathKey, true);\n                yield* optimize(newPath, input, scope);\n            }\n        }\n    }\n}\nfunction same(path, input) {\n    return rootDocument.querySelector(selector(path)) === input;\n}\n", "import { hasTag, isSVGElement, isDocument } from '../app/guards.js';\nimport { normSpaces, hasOpenreplayAttribute, getLabelAttribute, now } from '../utils.js';\nimport { MouseMove, MouseClick, MouseThrashing } from '../app/messages.gen.js';\nimport { getInputLabel } from './input.js';\nimport { finder } from '@medv/finder';\nfunction _getSelector(target, document, options) {\n    const selector = finder(target, {\n        root: document.body,\n        seedMinLength: 3,\n        optimizedMinLength: options?.minSelectorDepth || 2,\n        threshold: options?.nthThreshold || 1000,\n        maxNumberOfTries: options?.maxOptimiseTries || 10000,\n    });\n    return selector;\n}\nfunction isClickable(element) {\n    const tag = element.tagName.toUpperCase();\n    return (tag === 'BUTTON' ||\n        tag === 'A' ||\n        tag === 'LI' ||\n        tag === 'SELECT' ||\n        tag === 'TR' ||\n        tag === 'TH' ||\n        element.onclick != null ||\n        element.getAttribute('role') === 'button');\n    //|| element.className.includes(\"btn\")\n    // MBTODO: intercept addEventListener\n}\n//TODO: fix (typescript is not sure about target variable after assignation of svg)\nfunction getTarget(target, document) {\n    if (target instanceof Element) {\n        return _getTarget(target, document);\n    }\n    return null;\n}\nfunction _getTarget(target, document) {\n    let element = target;\n    while (element !== null && element !== document.documentElement) {\n        if (hasOpenreplayAttribute(element, 'masked')) {\n            return null;\n        }\n        element = element.parentElement;\n    }\n    if (isSVGElement(target)) {\n        let owner = target.ownerSVGElement;\n        while (owner !== null) {\n            target = owner;\n            owner = owner.ownerSVGElement;\n        }\n    }\n    element = target;\n    while (element !== null && element !== document.documentElement) {\n        const tag = element.tagName.toUpperCase();\n        if (tag === 'LABEL') {\n            return null;\n        }\n        if (tag === 'INPUT') {\n            return element;\n        }\n        if (isClickable(element) || getLabelAttribute(element) !== null) {\n            return element;\n        }\n        element = element.parentElement;\n    }\n    return target === document.documentElement ? null : target;\n}\nexport default function (app, options) {\n    const { disableClickmaps = false } = options || {};\n    function getTargetLabel(target) {\n        const dl = getLabelAttribute(target);\n        if (dl !== null) {\n            return dl;\n        }\n        if (hasTag(target, 'input')) {\n            return getInputLabel(target);\n        }\n        if (isClickable(target)) {\n            let label = '';\n            if (target instanceof HTMLElement) {\n                label = app.sanitizer.getInnerTextSecure(target);\n            }\n            label = label || target.id || target.className;\n            return normSpaces(label).slice(0, 100);\n        }\n        return '';\n    }\n    let mousePositionX = -1;\n    let mousePositionY = -1;\n    let mousePositionChanged = false;\n    let mouseTarget = null;\n    let mouseTargetTime = 0;\n    let selectorMap = {};\n    let velocity = 0;\n    let direction = 0;\n    let directionChangeCount = 0;\n    let distance = 0;\n    let checkIntervalId;\n    const shakeThreshold = 0.008;\n    const shakeCheckInterval = 225;\n    function checkMouseShaking() {\n        const nextVelocity = distance / shakeCheckInterval;\n        if (!velocity) {\n            velocity = nextVelocity;\n            return;\n        }\n        const acceleration = (nextVelocity - velocity) / shakeCheckInterval;\n        if (directionChangeCount > 4 && acceleration > shakeThreshold) {\n            app.send(MouseThrashing(now()));\n        }\n        distance = 0;\n        directionChangeCount = 0;\n        velocity = nextVelocity;\n    }\n    app.attachStartCallback(() => {\n        checkIntervalId = setInterval(() => checkMouseShaking(), shakeCheckInterval);\n    });\n    app.attachStopCallback(() => {\n        mousePositionX = -1;\n        mousePositionY = -1;\n        mousePositionChanged = false;\n        mouseTarget = null;\n        selectorMap = {};\n        if (checkIntervalId) {\n            clearInterval(checkIntervalId);\n        }\n    });\n    const sendMouseMove = () => {\n        if (mousePositionChanged) {\n            app.send(MouseMove(mousePositionX, mousePositionY));\n            mousePositionChanged = false;\n        }\n    };\n    const patchDocument = (document, topframe = false) => {\n        function getSelector(id, target, options) {\n            return (selectorMap[id] = selectorMap[id] || _getSelector(target, document, options));\n        }\n        const attachListener = topframe\n            ? app.attachEventListener.bind(app) // attached/removed on start/stop\n            : app.nodes.attachNodeListener.bind(app.nodes); // attached/removed on node register/unregister\n        attachListener(document.documentElement, 'mouseover', (e) => {\n            const target = getTarget(e.target, document);\n            if (target !== mouseTarget) {\n                mouseTarget = target;\n                mouseTargetTime = performance.now();\n            }\n        });\n        attachListener(document, 'mousemove', (e) => {\n            const [left, top] = app.observer.getDocumentOffset(document); // MBTODO?: document-id related message\n            mousePositionX = e.clientX + left;\n            mousePositionY = e.clientY + top;\n            mousePositionChanged = true;\n            const nextDirection = Math.sign(e.movementX);\n            distance += Math.abs(e.movementX) + Math.abs(e.movementY);\n            if (nextDirection !== direction) {\n                direction = nextDirection;\n                directionChangeCount++;\n            }\n        }, false);\n        attachListener(document, 'click', (e) => {\n            const target = getTarget(e.target, document);\n            if ((!e.clientX && !e.clientY) || target === null) {\n                return;\n            }\n            const id = app.nodes.getID(target);\n            if (id !== undefined) {\n                const clickX = e.pageX;\n                const clickY = e.pageY;\n                const contentWidth = document.documentElement.scrollWidth;\n                const contentHeight = document.documentElement.scrollHeight;\n                const normalizedX = roundNumber(clickX / contentWidth);\n                const normalizedY = roundNumber(clickY / contentHeight);\n                sendMouseMove();\n                app.send(MouseClick(id, mouseTarget === target ? Math.round(performance.now() - mouseTargetTime) : 0, getTargetLabel(target), isClickable(target) && !disableClickmaps ? getSelector(id, target, options) : '', normalizedX, normalizedY), true);\n            }\n            mouseTarget = null;\n        });\n    };\n    app.nodes.attachNodeCallback((node) => {\n        if (isDocument(node)) {\n            patchDocument(node);\n        }\n    });\n    patchDocument(document, true);\n    app.ticker.attach(sendMouseMove, options?.trackingOffset || 7);\n}\n/**\n * we get 0 to 1 decimal number, convert and round it, then turn to %\n * 0.39643 => 396.43 => 396 => 39.6%\n * */\nfunction roundNumber(num) {\n    return Math.round(num * 1e4);\n}\n", "import { hasTag } from '../app/guards.js';\nimport { isURL, getTimeOrigin } from '../utils.js';\nimport { ResourceTiming, PageLoadTiming, PageRenderTiming } from '../app/messages.gen.js';\nfunction getPaintBlocks(resources) {\n    const paintBlocks = [];\n    const elements = document.getElementsByTagName('*');\n    const styleURL = /url\\((\"[^\"]*\"|'[^']*'|[^)]*)\\)/i;\n    for (let i = 0; i < elements.length; i++) {\n        const element = elements[i];\n        let src = '';\n        if (hasTag(element, 'img')) {\n            src = element.currentSrc || element.src;\n        }\n        if (!src) {\n            const backgroundImage = getComputedStyle(element).getPropertyValue('background-image');\n            if (backgroundImage) {\n                const matches = styleURL.exec(backgroundImage);\n                if (matches !== null) {\n                    src = matches[1];\n                    if (src.startsWith('\"') || src.startsWith(\"'\")) {\n                        src = src.substr(1, src.length - 2);\n                    }\n                }\n            }\n        }\n        if (!src)\n            continue;\n        const time = src.substr(0, 10) === 'data:image' ? 0 : resources[src];\n        if (time === undefined)\n            continue;\n        const rect = element.getBoundingClientRect();\n        const top = Math.max(rect.top, 0);\n        const left = Math.max(rect.left, 0);\n        const bottom = Math.min(rect.bottom, window.innerHeight ||\n            (document.documentElement && document.documentElement.clientHeight) ||\n            0);\n        const right = Math.min(rect.right, window.innerWidth || (document.documentElement && document.documentElement.clientWidth) || 0);\n        if (bottom <= top || right <= left)\n            continue;\n        const area = (bottom - top) * (right - left);\n        paintBlocks.push({ time, area });\n    }\n    return paintBlocks;\n}\nfunction calculateSpeedIndex(firstContentfulPaint, paintBlocks) {\n    let a = (Math.max((document.documentElement && document.documentElement.clientWidth) || 0, window.innerWidth || 0) *\n        Math.max((document.documentElement && document.documentElement.clientHeight) || 0, window.innerHeight || 0)) /\n        10;\n    let s = a * firstContentfulPaint;\n    for (let i = 0; i < paintBlocks.length; i++) {\n        const { time, area } = paintBlocks[i];\n        a += area;\n        s += area * (time > firstContentfulPaint ? time : firstContentfulPaint);\n    }\n    return a === 0 ? 0 : s / a;\n}\nexport default function (app, opts) {\n    const options = Object.assign({\n        captureResourceTimings: true,\n        capturePageLoadTimings: true,\n        capturePageRenderTimings: true,\n        excludedResourceUrls: [],\n    }, opts);\n    if (!('PerformanceObserver' in window)) {\n        options.captureResourceTimings = false;\n    }\n    if (!options.captureResourceTimings) {\n        return;\n    } // Resources are necessary for all timings\n    let resources = {};\n    function resourceTiming(entry) {\n        if (entry.duration < 0 || !isURL(entry.name) || app.isServiceURL(entry.name))\n            return;\n        if (resources !== null) {\n            resources[entry.name] = entry.startTime + entry.duration;\n        }\n        let shouldSkip = false;\n        options.excludedResourceUrls?.forEach((url) => {\n            if (entry.name.startsWith(url)) {\n                shouldSkip = true;\n                return;\n            }\n        });\n        if (shouldSkip) {\n            return;\n        }\n        app.send(ResourceTiming(entry.startTime + getTimeOrigin(), entry.duration, entry.responseStart && entry.startTime ? entry.responseStart - entry.startTime : 0, entry.transferSize > entry.encodedBodySize ? entry.transferSize - entry.encodedBodySize : 0, entry.encodedBodySize || 0, entry.decodedBodySize || 0, entry.name, entry.initiatorType, entry.transferSize, \n        // @ts-ignore\n        (entry.responseStatus && entry.responseStatus === 304) || entry.transferSize === 0));\n    }\n    const observer = new PerformanceObserver((list) => list.getEntries().forEach(resourceTiming));\n    let prevSessionID;\n    app.attachStartCallback(function ({ sessionID }) {\n        if (sessionID !== prevSessionID) {\n            // Send past page resources on a newly started session\n            performance.getEntriesByType('resource').forEach(resourceTiming);\n            prevSessionID = sessionID;\n        }\n        observer.observe({ entryTypes: ['resource'] });\n    });\n    app.attachStopCallback(function () {\n        observer.disconnect();\n    });\n    let firstPaint = 0, firstContentfulPaint = 0;\n    if (options.capturePageLoadTimings) {\n        let pageLoadTimingSent = false;\n        app.ticker.attach(() => {\n            if (pageLoadTimingSent) {\n                return;\n            }\n            if (firstPaint === 0 || firstContentfulPaint === 0) {\n                performance.getEntriesByType('paint').forEach((entry) => {\n                    const { name, startTime } = entry;\n                    switch (name) {\n                        case 'first-paint':\n                            firstPaint = startTime;\n                            break;\n                        case 'first-contentful-paint':\n                            firstContentfulPaint = startTime;\n                            break;\n                    }\n                });\n            }\n            if (performance.timing.loadEventEnd || performance.now() > 30000) {\n                pageLoadTimingSent = true;\n                const { \n                // should be ok to use here, (https://github.com/mdn/content/issues/4713)\n                // since it is compared with the values obtained on the page load (before any possible sleep state)\n                // deprecated though\n                navigationStart, requestStart, responseStart, responseEnd, domContentLoadedEventStart, domContentLoadedEventEnd, loadEventStart, loadEventEnd, } = performance.timing;\n                app.send(PageLoadTiming(requestStart - navigationStart || 0, responseStart - navigationStart || 0, responseEnd - navigationStart || 0, domContentLoadedEventStart - navigationStart || 0, domContentLoadedEventEnd - navigationStart || 0, loadEventStart - navigationStart || 0, loadEventEnd - navigationStart || 0, firstPaint, firstContentfulPaint));\n            }\n        }, 30);\n    }\n    if (options.capturePageRenderTimings) {\n        let visuallyComplete = 0, interactiveWindowStartTime = 0, interactiveWindowTickTime = 0, paintBlocks = null;\n        let pageRenderTimingSent = false;\n        app.ticker.attach(() => {\n            if (pageRenderTimingSent) {\n                return;\n            }\n            const time = performance.now();\n            if (resources !== null) {\n                visuallyComplete = Math.max.apply(null, Object.keys(resources).map((k) => resources[k]));\n                if (time - visuallyComplete > 1000) {\n                    paintBlocks = getPaintBlocks(resources);\n                    resources = null;\n                }\n            }\n            if (interactiveWindowTickTime !== null) {\n                if (time - interactiveWindowTickTime > 50) {\n                    interactiveWindowStartTime = time;\n                }\n                interactiveWindowTickTime = time - interactiveWindowStartTime > 5000 ? null : time;\n            }\n            if ((paintBlocks !== null && interactiveWindowTickTime === null) || time > 30000) {\n                pageRenderTimingSent = true;\n                resources = null;\n                const speedIndex = paintBlocks === null\n                    ? 0\n                    : calculateSpeedIndex(firstContentfulPaint || firstPaint, paintBlocks);\n                const { domContentLoadedEventEnd, navigationStart } = performance.timing;\n                const timeToInteractive = interactiveWindowTickTime === null\n                    ? Math.max(interactiveWindowStartTime, firstContentfulPaint, domContentLoadedEventEnd - navigationStart || 0)\n                    : 0;\n                app.send(PageRenderTiming(speedIndex, firstContentfulPaint > visuallyComplete ? firstContentfulPaint : visuallyComplete, timeToInteractive));\n            }\n        });\n    }\n}\n", "import { SetViewportScroll, SetNodeScroll } from '../app/messages.gen.js';\nimport { isNode, isElementNode, isRootNode, isDocument } from '../app/guards.js';\nfunction getDocumentScroll(doc) {\n    const win = doc.defaultView;\n    return [\n        (win && win.scrollX) ||\n            (doc.documentElement && doc.documentElement.scrollLeft) ||\n            (doc.body && doc.body.scrollLeft) ||\n            0,\n        (win && win.scrollY) ||\n            (doc.documentElement && doc.documentElement.scrollTop) ||\n            (doc.body && doc.body.scrollTop) ||\n            0,\n    ];\n}\nexport default function (app, insideIframe) {\n    let documentScroll = false;\n    const nodeScroll = new Map();\n    function setNodeScroll(target) {\n        if (!isNode(target)) {\n            return;\n        }\n        if (isElementNode(target)) {\n            nodeScroll.set(target, [target.scrollLeft, target.scrollTop]);\n        }\n        if (isDocument(target)) {\n            nodeScroll.set(target, getDocumentScroll(target));\n        }\n    }\n    const sendSetViewportScroll = app.safe(() => {\n        if (insideIframe) {\n            return;\n        }\n        app.send(SetViewportScroll(...getDocumentScroll(document)));\n    });\n    const sendSetNodeScroll = app.safe((s, node) => {\n        const id = app.nodes.getID(node);\n        if (id !== undefined) {\n            app.send(SetNodeScroll(id, s[0], s[1]));\n        }\n    });\n    app.attachStartCallback(sendSetViewportScroll);\n    app.attachStopCallback(() => {\n        documentScroll = false;\n        nodeScroll.clear();\n    });\n    app.nodes.attachNodeCallback((node, isStart) => {\n        // MBTODO: iterate over all the nodes on start instead of using isStart hack\n        if (isStart) {\n            if (isElementNode(node) && node.scrollLeft + node.scrollTop > 0) {\n                nodeScroll.set(node, [node.scrollLeft, node.scrollTop]);\n            }\n            else if (isDocument(node)) {\n                // DRY somehow?\n                nodeScroll.set(node, getDocumentScroll(node));\n            }\n        }\n        if (isRootNode(node)) {\n            // scroll is not-composed event (https://javascript.info/shadow-dom-events)\n            app.nodes.attachNodeListener(node, 'scroll', (e) => {\n                setNodeScroll(e.target);\n            });\n        }\n    });\n    app.attachEventListener(document, 'scroll', (e) => {\n        const target = e.target;\n        if (target === document) {\n            documentScroll = true;\n            return;\n        }\n        setNodeScroll(target);\n    });\n    app.ticker.attach(() => {\n        if (documentScroll) {\n            sendSetViewportScroll();\n            documentScroll = false;\n        }\n        nodeScroll.forEach(sendSetNodeScroll);\n        nodeScroll.clear();\n    }, 5, false);\n}\n", "import { getTimeOrigin } from '../utils.js';\nimport { SetPageLocation, SetViewportSize, SetPageVisibility } from '../app/messages.gen.js';\nexport default function (app) {\n    let url, width, height;\n    let navigationStart;\n    let referrer = document.referrer;\n    const sendSetPageLocation = app.safe(() => {\n        const { URL } = document;\n        if (URL !== url) {\n            url = URL;\n            app.send(SetPageLocation(url, referrer, navigationStart, document.title));\n            navigationStart = 0;\n            referrer = url;\n        }\n    });\n    const sendSetViewportSize = app.safe(() => {\n        const { innerWidth, innerHeight } = window;\n        if (innerWidth !== width || innerHeight !== height) {\n            width = innerWidth;\n            height = innerHeight;\n            app.send(SetViewportSize(width, height));\n        }\n    });\n    const sendSetPageVisibility = document.hidden === undefined\n        ? Function.prototype\n        : app.safe(() => app.send(SetPageVisibility(document.hidden)));\n    app.attachStartCallback(() => {\n        url = null;\n        navigationStart = getTimeOrigin();\n        width = height = -1;\n        sendSetPageLocation();\n        sendSetViewportSize();\n        sendSetPageVisibility();\n    });\n    if (document.hidden !== undefined) {\n        app.attachEventListener(document, 'visibilitychange', sendSetPageVisibility, false, false);\n    }\n    app.ticker.attach(sendSetPageLocation, 1, false);\n    app.ticker.attach(sendSetViewportSize, 5, false);\n}\n", "import { AdoptedSSReplaceURLBased, AdoptedSSInsertRuleURLBased, AdoptedSSAddOwner, AdoptedSSRemoveOwner, } from '../app/messages.gen.js';\nimport { isRootNode } from '../app/guards.js';\nfunction hasAdoptedSS(node) {\n    return (isRootNode(node) &&\n        // @ts-ignore\n        !!node.adoptedStyleSheets);\n}\n// TODO: encapsulate to be init-ed on-start and join with cssrules.ts under one folder\nlet _id = 0xf;\nexport function nextID() {\n    return _id++;\n}\nexport const styleSheetIDMap = new Map();\nexport default function (app) {\n    if (app === null) {\n        return;\n    }\n    if (!hasAdoptedSS(document)) {\n        return;\n    }\n    const styleSheetIDMap = new Map();\n    const adoptedStyleSheetsOwnings = new Map();\n    const sendAdoptedStyleSheetsUpdate = (root) => setTimeout(() => {\n        let nodeID = app.nodes.getID(root);\n        if (root === document) {\n            nodeID = 0; // main document doesn't have nodeID. ID count starts from the documentElement\n        }\n        if (nodeID === undefined) {\n            return;\n        }\n        let pastOwning = adoptedStyleSheetsOwnings.get(nodeID);\n        if (!pastOwning) {\n            pastOwning = [];\n        }\n        const nowOwning = [];\n        const styleSheets = root.adoptedStyleSheets;\n        if (styleSheets && Symbol.iterator in styleSheets) {\n            for (const s of styleSheets) {\n                let sheetID = styleSheetIDMap.get(s);\n                const init = !sheetID;\n                if (!sheetID) {\n                    sheetID = nextID();\n                    styleSheetIDMap.set(s, sheetID);\n                }\n                if (!pastOwning.includes(sheetID)) {\n                    app.send(AdoptedSSAddOwner(sheetID, nodeID));\n                }\n                if (init) {\n                    const rules = s.cssRules;\n                    for (let i = 0; i < rules.length; i++) {\n                        app.send(AdoptedSSInsertRuleURLBased(sheetID, rules[i].cssText, i, app.getBaseHref()));\n                    }\n                }\n                nowOwning.push(sheetID);\n            }\n        }\n        if (Symbol.iterator in pastOwning) {\n            for (const sheetID of pastOwning) {\n                if (!nowOwning.includes(sheetID)) {\n                    app.send(AdoptedSSRemoveOwner(sheetID, nodeID));\n                }\n            }\n        }\n        adoptedStyleSheetsOwnings.set(nodeID, nowOwning);\n    }, 20); // Mysterious bug:\n    /* On the page https://explore.fast.design/components/fast-accordion\n      the only rule inside the only adoptedStyleSheet of the iframe-s document\n      gets changed during first milliseconds after the load.\n      However, none of the documented methods (replace, insertRule) is triggered.\n      The rule is not substituted (remains the same object), however the text gets changed.\n    */\n    function patchAdoptedStyleSheets(prototype) {\n        const nativeAdoptedStyleSheetsDescriptor = Object.getOwnPropertyDescriptor(prototype, 'adoptedStyleSheets');\n        if (nativeAdoptedStyleSheetsDescriptor) {\n            Object.defineProperty(prototype, 'adoptedStyleSheets', {\n                ...nativeAdoptedStyleSheetsDescriptor,\n                set: function (value) {\n                    // @ts-ignore\n                    const retVal = nativeAdoptedStyleSheetsDescriptor.set.call(this, value);\n                    sendAdoptedStyleSheetsUpdate(this);\n                    return retVal;\n                },\n            });\n        }\n    }\n    const patchContext = (context) => {\n        // @ts-ignore\n        if (context.__openreplay_adpss_patched__) {\n            return;\n        }\n        else {\n            // @ts-ignore\n            context.__openreplay_adpss_patched__ = true;\n        }\n        patchAdoptedStyleSheets(context.Document.prototype);\n        patchAdoptedStyleSheets(context.ShadowRoot.prototype);\n        //@ts-ignore TODO: upgrade ts to 4.8+\n        const { replace, replaceSync } = context.CSSStyleSheet.prototype;\n        //@ts-ignore\n        context.CSSStyleSheet.prototype.replace = function (text) {\n            return replace.call(this, text).then((sheet) => {\n                const sheetID = styleSheetIDMap.get(this);\n                if (sheetID) {\n                    app.send(AdoptedSSReplaceURLBased(sheetID, text, app.getBaseHref()));\n                }\n                return sheet;\n            });\n        };\n        //@ts-ignore\n        context.CSSStyleSheet.prototype.replaceSync = function (text) {\n            const sheetID = styleSheetIDMap.get(this);\n            if (sheetID) {\n                app.send(AdoptedSSReplaceURLBased(sheetID, text, app.getBaseHref()));\n            }\n            return replaceSync.call(this, text);\n        };\n    };\n    patchContext(window);\n    app.observer.attachContextCallback(app.safe(patchContext));\n    app.attachStopCallback(() => {\n        styleSheetIDMap.clear();\n        adoptedStyleSheetsOwnings.clear();\n    });\n    // So far main Document is not triggered with nodeCallbacks\n    app.attachStartCallback(() => {\n        sendAdoptedStyleSheetsUpdate(document);\n    });\n    app.nodes.attachNodeCallback((node) => {\n        if (hasAdoptedSS(node)) {\n            sendAdoptedStyleSheetsUpdate(node);\n        }\n    });\n}\n", "import { AdoptedSSInsertRuleURLBased, // TODO: rename to common StyleSheet names\nAdoptedSSDeleteRule, AdoptedSSAddOwner, TechnicalInfo, } from '../app/messages.gen.js';\nimport { hasTag } from '../app/guards.js';\nimport { nextID, styleSheetIDMap } from './constructedStyleSheets.js';\nexport default function (app) {\n    if (app === null) {\n        return;\n    }\n    if (!window.CSSStyleSheet) {\n        app.send(TechnicalInfo('no_stylesheet_prototype_in_window', ''));\n        return;\n    }\n    const sendInsertDeleteRule = app.safe((sheet, index, rule) => {\n        const sheetID = styleSheetIDMap.get(sheet);\n        if (!sheetID) {\n            // OK-case. Sheet haven't been registered yet. Rules will be sent on registration.\n            return;\n        }\n        if (typeof rule === 'string') {\n            app.send(AdoptedSSInsertRuleURLBased(sheetID, rule, index, app.getBaseHref()));\n        }\n        else {\n            app.send(AdoptedSSDeleteRule(sheetID, index));\n        }\n    });\n    // TODO: proper rule insertion/removal (how?)\n    const sendReplaceGroupingRule = app.safe((rule) => {\n        let topmostRule = rule;\n        while (topmostRule.parentRule) {\n            topmostRule = topmostRule.parentRule;\n        }\n        const sheet = topmostRule.parentStyleSheet;\n        if (!sheet) {\n            app.debug.warn('No parent StyleSheet found for', topmostRule, rule);\n            return;\n        }\n        const sheetID = styleSheetIDMap.get(sheet);\n        if (!sheetID) {\n            app.debug.warn('No sheedID found for', sheet, styleSheetIDMap);\n            return;\n        }\n        const cssText = topmostRule.cssText;\n        const ruleList = sheet.cssRules;\n        const idx = Array.from(ruleList).indexOf(topmostRule);\n        if (idx >= 0) {\n            app.send(AdoptedSSInsertRuleURLBased(sheetID, cssText, idx, app.getBaseHref()));\n            app.send(AdoptedSSDeleteRule(sheetID, idx + 1)); // Remove previous clone\n        }\n        else {\n            app.debug.warn('Rule index not found in', sheet, topmostRule);\n        }\n    });\n    const patchContext = app.safe((context) => {\n        const { insertRule, deleteRule } = context.CSSStyleSheet.prototype;\n        const { insertRule: groupInsertRule, deleteRule: groupDeleteRule } = context.CSSGroupingRule.prototype;\n        context.CSSStyleSheet.prototype.insertRule = function (rule, index = 0) {\n            sendInsertDeleteRule(this, index, rule);\n            return insertRule.call(this, rule, index);\n        };\n        context.CSSStyleSheet.prototype.deleteRule = function (index) {\n            sendInsertDeleteRule(this, index);\n            return deleteRule.call(this, index);\n        };\n        context.CSSGroupingRule.prototype.insertRule = function (rule, index = 0) {\n            const result = groupInsertRule.call(this, rule, index);\n            sendReplaceGroupingRule(this);\n            return result;\n        };\n        context.CSSGroupingRule.prototype.deleteRule = function (index = 0) {\n            const result = groupDeleteRule.call(this, index);\n            sendReplaceGroupingRule(this);\n            return result;\n        };\n    });\n    patchContext(window);\n    app.observer.attachContextCallback(patchContext);\n    app.nodes.attachNodeCallback((node) => {\n        if (!hasTag(node, 'style') || !node.sheet) {\n            return;\n        }\n        if (node.textContent !== null && node.textContent.trim().length > 0) {\n            return; // Non-virtual styles captured by the observer as a text\n        }\n        const nodeID = app.nodes.getID(node);\n        if (!nodeID) {\n            return;\n        }\n        const sheet = node.sheet;\n        const sheetID = nextID();\n        styleSheetIDMap.set(sheet, sheetID);\n        app.send(AdoptedSSAddOwner(sheetID, nodeID));\n        const rules = sheet.cssRules;\n        for (let i = 0; i < rules.length; i++) {\n            sendInsertDeleteRule(sheet, i, rules[i].cssText);\n        }\n    });\n}\n", "import { isNode, hasTag } from '../app/guards.js';\nimport { SetNodeFocus } from '../app/messages.gen.js';\nexport default function (app) {\n    function sendSetNodeFocus(n) {\n        const id = app.nodes.getID(n);\n        if (id !== undefined) {\n            app.send(SetNodeFocus(id));\n        }\n    }\n    let blurred = false;\n    app.nodes.attachNodeCallback((node) => {\n        if (!hasTag(node, 'body')) {\n            return;\n        }\n        app.nodes.attachNodeListener(node, 'focus', (e) => {\n            if (!isNode(e.target)) {\n                return;\n            }\n            sendSetNodeFocus(e.target);\n            blurred = false;\n        });\n        app.nodes.attachNodeListener(node, 'blur', (e) => {\n            if (e.relatedTarget === null) {\n                blurred = true;\n                setTimeout(() => {\n                    if (blurred) {\n                        app.send(SetNodeFocus(-1));\n                    }\n                }, 0);\n            }\n        });\n    });\n    app.attachStartCallback(() => {\n        let elem = document.activeElement;\n        while (elem && hasTag(elem, 'iframe') && elem.contentDocument) {\n            elem = elem.contentDocument.activeElement;\n        }\n        if (elem && elem !== elem.ownerDocument.body) {\n            sendSetNodeFocus(elem);\n        }\n    }, true);\n}\n", "import { isDocument } from '../app/guards.js';\nimport { LoadFontFace } from '../app/messages.gen.js';\nexport default function (app) {\n    if (!window.FontFace) {\n        return;\n    }\n    const docFonts = new Map();\n    const patchWindow = (wnd) => {\n        class FontFaceInterceptor extends wnd.FontFace {\n            constructor(...args) {\n                //maybe do this on load(). In this case check if the document.fonts.load(...) function calls the font's load()\n                if (typeof args[1] === 'string') {\n                    let desc = '';\n                    if (args[2]) {\n                        app.safe(() => {\n                            desc = JSON.stringify(args[2]);\n                        });\n                    }\n                    const ffData = [args[0], args[1], desc];\n                    const ffDataArr = docFonts.get(wnd.document) || [];\n                    ffDataArr.push(ffData);\n                    docFonts.set(wnd.document, ffDataArr);\n                    const parentID = wnd === window ? 0 : app.nodes.getID(wnd.document);\n                    if (parentID === undefined) {\n                        return;\n                    }\n                    if (app.active()) {\n                        app.send(LoadFontFace(parentID, ...ffData));\n                    }\n                }\n                super(...args);\n            }\n        }\n        wnd.FontFace = FontFaceInterceptor;\n    };\n    app.observer.attachContextCallback(patchWindow);\n    patchWindow(window);\n    app.nodes.attachNodeCallback(app.safe((node) => {\n        if (!isDocument(node)) {\n            return;\n        }\n        const ffDataArr = docFonts.get(node);\n        if (!ffDataArr) {\n            return;\n        }\n        const parentID = node.defaultView === window ? 0 : app.nodes.getID(node);\n        if (parentID === undefined) {\n            return;\n        }\n        ffDataArr.forEach((ffData) => {\n            app.send(LoadFontFace(parentID, ...ffData));\n        });\n    }));\n}\n", "import { NetworkRequest } from '../app/messages.gen.js';\nimport { getTimeOrigin } from '../utils.js';\nimport { getExceptionMessage } from './exception.js';\nexport default function (app, instance, opts, sanitize, stringify) {\n    app.debug.log('Openreplay: attaching axios spy to instance', instance);\n    function captureResponseData(axiosResponseObj) {\n        app.debug.log('Openreplay: capturing axios response data', axiosResponseObj);\n        const { headers: reqHs, data: reqData, method, url, baseURL } = axiosResponseObj.config;\n        const { data: rData, headers: rHs, status: globStatus, response } = axiosResponseObj;\n        const { data: resData, headers: resHs, status: resStatus } = response || {};\n        const ihOpt = opts.ignoreHeaders;\n        const isHIgnoring = Array.isArray(ihOpt) ? (name) => ihOpt.includes(name) : () => ihOpt;\n        function writeHeader(hsObj, header) {\n            if (!isHIgnoring(header[0])) {\n                hsObj[header[0]] = header[1];\n            }\n        }\n        let requestHs = {};\n        let responseHs = {};\n        if (reqHs.toJSON) {\n            requestHs = reqHs.toJSON();\n        }\n        else if (reqHs instanceof Headers) {\n            reqHs.forEach((v, n) => writeHeader(requestHs, [n, v]));\n        }\n        else if (Array.isArray(reqHs)) {\n            reqHs.forEach((h) => writeHeader(requestHs, h));\n        }\n        else if (typeof reqHs === 'object') {\n            Object.entries(reqHs).forEach((h) => writeHeader(requestHs, h));\n        }\n        const usedResHeader = resHs ? resHs : rHs;\n        if (usedResHeader.toJSON) {\n            responseHs = usedResHeader.toJSON();\n        }\n        else if (usedResHeader instanceof Headers) {\n            usedResHeader.forEach((v, n) => writeHeader(responseHs, [n, v]));\n        }\n        else if (Array.isArray(usedResHeader)) {\n            usedResHeader.forEach((h) => writeHeader(responseHs, h));\n        }\n        else if (typeof usedResHeader === 'object') {\n            Object.entries(usedResHeader).forEach(([n, v]) => {\n                if (!isHIgnoring(n))\n                    responseHs[n] = v;\n            });\n        }\n        const reqResInfo = sanitize({\n            url,\n            method: method || '',\n            status: globStatus || resStatus || 0,\n            request: {\n                headers: requestHs,\n                body: reqData,\n            },\n            response: {\n                headers: responseHs,\n                body: resData || rData,\n            },\n        });\n        if (!reqResInfo) {\n            app.debug.log('Openreplay: empty request/response info, skipping');\n            return;\n        }\n        const requestStart = axiosResponseObj.config.__openreplay_timing;\n        const duration = performance.now() - requestStart;\n        app.debug.log('Openreplay: final req object', reqResInfo);\n        app.send(NetworkRequest('xhr', String(method), String(reqResInfo.url), stringify(reqResInfo.request), stringify(reqResInfo.response), reqResInfo.status, requestStart + getTimeOrigin(), duration, 0));\n    }\n    function getStartTime(config) {\n        app.debug.log('Openreplay: capturing API request', config);\n        config.__openreplay_timing = performance.now();\n        if (opts.sessionTokenHeader) {\n            const header = typeof opts.sessionTokenHeader === 'string'\n                ? opts.sessionTokenHeader\n                : 'X-OpenReplay-Session-Token';\n            const headerValue = app.getSessionToken();\n            if (headerValue) {\n                config.headers.set(header, headerValue);\n            }\n        }\n        return config;\n    }\n    function captureNetworkRequest(response) {\n        if (opts.failuresOnly)\n            return response;\n        captureResponseData(response);\n        return response;\n    }\n    function captureNetworkError(error) {\n        app.debug.log('Openreplay: capturing API request error', error);\n        if (isAxiosError(error) && Boolean(error.response)) {\n            captureResponseData(error.response);\n        }\n        else if (error instanceof Error) {\n            app.send(getExceptionMessage(error, []));\n        }\n        return Promise.reject(error);\n    }\n    function logRequestError(ev) {\n        app.debug.log('Openreplay: failed API request, skipping', ev);\n    }\n    const reqInt = instance.interceptors.request.use(getStartTime, logRequestError, {\n        synchronous: true,\n    });\n    const resInt = instance.interceptors.response.use(captureNetworkRequest, captureNetworkError, {\n        synchronous: true,\n    });\n    app.attachStopCallback(() => {\n        instance.interceptors.request.eject?.(reqInt);\n        instance.interceptors.response.eject?.(resInt);\n    });\n}\nfunction isAxiosError(payload) {\n    return isObject(payload) && payload.isAxiosError === true;\n}\nfunction isObject(thing) {\n    return thing !== null && typeof thing === 'object';\n}\n", "import { NetworkRequest } from '../../app/messages.gen.js';\nimport { getTimeOrigin } from '../../utils.js';\nexport var RequestState;\n(function (RequestState) {\n    RequestState[RequestState[\"UNSENT\"] = 0] = \"UNSENT\";\n    RequestState[RequestState[\"OPENED\"] = 1] = \"OPENED\";\n    RequestState[RequestState[\"HEADERS_RECEIVED\"] = 2] = \"HEADERS_RECEIVED\";\n    RequestState[RequestState[\"LOADING\"] = 3] = \"LOADING\";\n    RequestState[RequestState[\"DONE\"] = 4] = \"DONE\";\n})(RequestState || (RequestState = {}));\n/**\n * I know we're not using most of the information from this class\n * but it can be useful in the future if we will decide to display more stuff in our ui\n * */\nexport default class NetworkMessage {\n    constructor(ignoredHeaders = [], setSessionTokenHeader, sanitize) {\n        this.ignoredHeaders = ignoredHeaders;\n        this.setSessionTokenHeader = setSessionTokenHeader;\n        this.sanitize = sanitize;\n        this.id = '';\n        this.name = '';\n        this.method = '';\n        this.url = '';\n        this.status = 0;\n        this.statusText = '';\n        this.cancelState = 0;\n        this.readyState = 0;\n        this.header = {};\n        this.responseType = '';\n        this.requestHeader = {};\n        this.responseSize = 0; // bytes\n        this.responseSizeText = '';\n        this.startTime = 0;\n        this.endTime = 0;\n        this.duration = 0;\n        this.getData = {};\n        this.requestData = null;\n    }\n    getMessage() {\n        const { reqHs, resHs } = this.writeHeaders();\n        const request = {\n            headers: reqHs,\n            body: this.method === 'GET' ? JSON.stringify(this.getData) : this.requestData,\n        };\n        const response = { headers: resHs, body: this.response };\n        const messageInfo = this.sanitize({\n            url: this.url,\n            method: this.method,\n            status: this.status,\n            request,\n            response,\n        });\n        if (!messageInfo)\n            return;\n        return NetworkRequest(this.requestType, messageInfo.method, messageInfo.url, JSON.stringify(messageInfo.request), JSON.stringify(messageInfo.response), messageInfo.status, this.startTime + getTimeOrigin(), this.duration, this.responseSize);\n    }\n    writeHeaders() {\n        const reqHs = {};\n        Object.entries(this.requestHeader).forEach(([key, value]) => {\n            if (this.isHeaderIgnored(key))\n                return;\n            reqHs[key] = value;\n        });\n        this.setSessionTokenHeader((name, value) => {\n            reqHs[name] = value;\n        });\n        const resHs = {};\n        Object.entries(this.header).forEach(([key, value]) => {\n            if (this.isHeaderIgnored(key))\n                return;\n            resHs[key] = value;\n        });\n        return { reqHs, resHs };\n    }\n    isHeaderIgnored(key) {\n        if (Array.isArray(this.ignoredHeaders)) {\n            return this.ignoredHeaders.map((k) => k.toLowerCase()).includes(key.toLowerCase());\n        }\n        else {\n            return this.ignoredHeaders;\n        }\n    }\n}\n", "export const genResponseByType = (responseType, response) => {\n    let result = '';\n    switch (responseType) {\n        case '':\n        case 'text':\n        case 'json':\n            if (typeof response == 'string') {\n                try {\n                    result = JSON.parse(response);\n                }\n                catch (e) {\n                    // not a JSON string\n                    result = response.slice(0, 10000);\n                }\n            }\n            else if (isPureObject(response) || Array.isArray(response)) {\n                result = JSON.stringify(response);\n            }\n            else if (typeof response !== 'undefined') {\n                result = Object.prototype.toString.call(response);\n            }\n            break;\n        case 'blob':\n        case 'document':\n        case 'arraybuffer':\n        default:\n            if (typeof response !== 'undefined') {\n                result = Object.prototype.toString.call(response);\n            }\n            break;\n    }\n    return result;\n};\nexport const getStringResponseByType = (responseType, response) => {\n    let result = '';\n    switch (responseType) {\n        case '':\n        case 'text':\n        case 'json':\n            if (typeof response == 'string') {\n                result = response;\n            }\n            else if (isPureObject(response) || Array.isArray(response)) {\n                result = JSON.stringify(response);\n            }\n            else if (typeof response !== 'undefined') {\n                result = Object.prototype.toString.call(response);\n            }\n            break;\n        case 'blob':\n        case 'document':\n        case 'arraybuffer':\n        default:\n            if (typeof response !== 'undefined') {\n                result = Object.prototype.toString.call(response);\n            }\n            break;\n    }\n    return result;\n};\nexport const genStringBody = (body) => {\n    if (!body) {\n        return null;\n    }\n    let result;\n    if (typeof body === 'string') {\n        if (body[0] === '{' || body[0] === '[') {\n            result = body;\n        }\n        // 'a=1&b=2' => try to parse as query\n        const arr = body.split('&');\n        if (arr.length === 1) {\n            // not a query, parse as original string\n            result = body;\n        }\n        else {\n            // 'a=1&b=2&c' => parse as query\n            result = arr.join(',');\n        }\n    }\n    else if (isIterable(body)) {\n        // FormData or URLSearchParams or Array\n        const arr = [];\n        for (const [key, value] of body) {\n            arr.push(`${key}=${typeof value === 'string' ? value : '[object Object]'}`);\n        }\n        result = arr.join(',');\n    }\n    else if (body instanceof Blob ||\n        body instanceof ReadableStream ||\n        body instanceof ArrayBuffer) {\n        result = 'byte data';\n    }\n    else if (isPureObject(body)) {\n        // overriding ArrayBufferView which is not convertable to string\n        result = body;\n    }\n    else {\n        result = `can't parse body ${typeof body}`;\n    }\n    return result;\n};\nexport const genGetDataByUrl = (url, getData = {}) => {\n    if (!isPureObject(getData)) {\n        getData = {};\n    }\n    let query = url ? url.split('?') : []; // a.php?b=c&d=?e => ['a.php', 'b=c&d=', 'e']\n    query.shift(); // => ['b=c&d=', 'e']\n    if (query.length > 0) {\n        query = query.join('?').split('&'); // => 'b=c&d=?e' => ['b=c', 'd=?e']\n        for (const q of query) {\n            const kv = q.split('=');\n            try {\n                getData[kv[0]] = decodeURIComponent(kv[1]);\n            }\n            catch (e) {\n                // \"URIError: URI malformed\" will be thrown when `kv[1]` contains \"%\", so just use raw data\n                // @issue #470\n                // @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Malformed_URI\n                getData[kv[0]] = kv[1];\n            }\n        }\n    }\n    return getData;\n};\nexport const genFormattedBody = (body) => {\n    if (!body) {\n        return null;\n    }\n    let result;\n    if (typeof body === 'string') {\n        try {\n            // '{a:1}' =>\n            result = JSON.parse(body);\n        }\n        catch (e) {\n            // 'a=1&b=2' => try to parse as query\n            const arr = body.split('&');\n            result = {};\n            // eslint-disable-next-line\n            for (let q of arr) {\n                const kv = q.split('=');\n                result[kv[0]] = kv[1] === undefined ? 'undefined' : kv[1];\n            }\n        }\n    }\n    else if (isIterable(body)) {\n        // FormData or URLSearchParams or Array\n        result = {};\n        for (const [key, value] of body) {\n            result[key] = typeof value === 'string' ? value : '[object Object]';\n        }\n    }\n    else if (ArrayBuffer.isView(body) ||\n        body instanceof Blob ||\n        body instanceof ReadableStream ||\n        body instanceof ArrayBuffer) {\n        result = '[byte data]';\n    }\n    else if (isPureObject(body)) {\n        result = body;\n    }\n    else {\n        result = `can't parse body ${typeof body}`;\n    }\n    return result;\n};\nexport function isPureObject(input) {\n    return null !== input && typeof input === 'object';\n}\nexport function isIterable(value) {\n    if (value === null || value === undefined) {\n        return false;\n    }\n    if (ArrayBuffer.isView(value)) {\n        return false;\n    }\n    return typeof Symbol !== 'undefined' && typeof value[Symbol.iterator] === 'function';\n}\nexport function formatByteSize(bytes) {\n    if (bytes <= 0) {\n        // shouldn't happen?\n        return '';\n    }\n    if (bytes >= 1000 * 1000) {\n        return (bytes / 1000 / 1000).toFixed(1) + ' MB';\n    }\n    if (bytes >= 1000) {\n        return (bytes / 1000).toFixed(1) + ' KB';\n    }\n    return `${bytes}B`;\n}\nexport const getURL = (urlString) => {\n    if (urlString.startsWith('//')) {\n        const baseUrl = new URL(window.location.href);\n        urlString = `${baseUrl.protocol}${urlString}`;\n    }\n    if (urlString.startsWith('http')) {\n        return new URL(urlString);\n    }\n    else {\n        return new URL(urlString, window.location.href);\n    }\n};\n", "/**\n * I took inspiration in few stack exchange posts\n * and Tencent vConsole library (MIT)\n * by wrapping the XMLHttpRequest object in a Proxy\n * we can intercept the network requests\n * in not-so-hacky way\n * */\nimport NetworkMessage, { RequestState } from './networkMessage.js';\nimport { formatByteSize, genStringBody, getStringResponseByType, getURL } from './utils.js';\nexport class ResponseProxyHandler {\n    constructor(resp, item) {\n        this.resp = resp;\n        this.item = item;\n        this.mockReader();\n    }\n    set(target, key, value) {\n        return Reflect.set(target, key, value);\n    }\n    get(target, key) {\n        const value = Reflect.get(target, key);\n        switch (key) {\n            case 'arrayBuffer':\n            case 'blob':\n            case 'formData':\n            case 'json':\n            case 'text':\n                return () => {\n                    this.item.responseType = key.toLowerCase();\n                    // @ts-ignore\n                    return value.apply(target).then((resp) => {\n                        this.item.response = getStringResponseByType(this.item.responseType, resp);\n                        return resp;\n                    });\n                };\n        }\n        if (typeof value === 'function') {\n            return value.bind(target);\n        }\n        else {\n            return value;\n        }\n    }\n    mockReader() {\n        let readerReceivedValue;\n        if (!this.resp.body) {\n            // some browsers do not return `body` in some cases, like `OPTIONS` method\n            return;\n        }\n        if (typeof this.resp.body.getReader !== 'function') {\n            return;\n        }\n        const _getReader = this.resp.body.getReader;\n        // @ts-ignore\n        this.resp.body.getReader = () => {\n            const reader = _getReader.apply(this.resp.body);\n            // when readyState is already 4,\n            // it's not a chunked stream, or it had already been read.\n            // so should not update status.\n            if (this.item.readyState === RequestState.DONE) {\n                return reader;\n            }\n            const _read = reader.read;\n            const _cancel = reader.cancel;\n            this.item.responseType = 'arraybuffer';\n            // @ts-ignore\n            reader.read = () => {\n                return _read.apply(reader).then((result) => {\n                    if (!readerReceivedValue) {\n                        // @ts-ignore\n                        readerReceivedValue = new Uint8Array(result.value);\n                    }\n                    else {\n                        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                        const newValue = new Uint8Array(readerReceivedValue.length + result.value.length);\n                        newValue.set(readerReceivedValue);\n                        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                        newValue.set(result.value, readerReceivedValue.length);\n                        readerReceivedValue = newValue;\n                    }\n                    this.item.endTime = performance.now();\n                    this.item.duration = this.item.endTime - (this.item.startTime || this.item.endTime);\n                    this.item.readyState = result.done ? 4 : 3;\n                    this.item.statusText = result.done ? String(this.item.status) : 'Loading';\n                    this.item.responseSize = readerReceivedValue.length;\n                    this.item.responseSizeText = formatByteSize(this.item.responseSize);\n                    if (result.done) {\n                        this.item.response = getStringResponseByType(this.item.responseType, readerReceivedValue);\n                    }\n                    return result;\n                });\n            };\n            reader.cancel = (...args) => {\n                this.item.cancelState = 2;\n                this.item.statusText = 'Cancel';\n                this.item.endTime = performance.now();\n                this.item.duration = this.item.endTime - (this.item.startTime || this.item.endTime);\n                this.item.response = getStringResponseByType(this.item.responseType, readerReceivedValue);\n                return _cancel.apply(reader, args);\n            };\n            return reader;\n        };\n    }\n}\nexport class FetchProxyHandler {\n    constructor(ignoredHeaders, setSessionTokenHeader, sanitize, sendMessage, isServiceUrl, tokenUrlMatcher) {\n        this.ignoredHeaders = ignoredHeaders;\n        this.setSessionTokenHeader = setSessionTokenHeader;\n        this.sanitize = sanitize;\n        this.sendMessage = sendMessage;\n        this.isServiceUrl = isServiceUrl;\n        this.tokenUrlMatcher = tokenUrlMatcher;\n    }\n    apply(target, _, argsList) {\n        const input = argsList[0];\n        const init = argsList[1];\n        if (!input ||\n            // @ts-ignore\n            (typeof input !== 'string' && !input?.url)) {\n            return target.apply(window, argsList);\n        }\n        const isORUrl = input instanceof URL || typeof input === 'string'\n            ? this.isServiceUrl(String(input))\n            : this.isServiceUrl(String(input.url));\n        if (isORUrl) {\n            return target.apply(window, argsList);\n        }\n        const item = new NetworkMessage(this.ignoredHeaders, this.setSessionTokenHeader, this.sanitize);\n        this.beforeFetch(item, input, init);\n        this.setSessionTokenHeader((name, value) => {\n            if (this.tokenUrlMatcher !== undefined) {\n                if (!this.tokenUrlMatcher(item.url)) {\n                    return;\n                }\n            }\n            if (argsList[1] === undefined && argsList[0] instanceof Request) {\n                return argsList[0].headers.append(name, value);\n            }\n            else {\n                if (!argsList[1])\n                    argsList[1] = {};\n                if (argsList[1].headers === undefined) {\n                    argsList[1] = { ...argsList[1], headers: {} };\n                }\n                if (argsList[1].headers instanceof Headers) {\n                    argsList[1].headers.append(name, value);\n                }\n                else if (Array.isArray(argsList[1].headers)) {\n                    argsList[1].headers.push([name, value]);\n                }\n                else {\n                    // @ts-ignore\n                    argsList[1].headers[name] = value;\n                }\n            }\n        });\n        return target.apply(window, argsList)\n            .then(this.afterFetch(item))\n            .catch((e) => {\n            // mock finally\n            item.endTime = performance.now();\n            item.duration = item.endTime - (item.startTime || item.endTime);\n            throw e;\n        });\n    }\n    beforeFetch(item, input, init) {\n        let url, method = 'GET', requestHeader = {};\n        // handle `input` content\n        if (typeof input === 'string') {\n            // when `input` is a string\n            method = init?.method || 'GET';\n            url = getURL(input);\n            requestHeader = init?.headers || {};\n        }\n        else {\n            // when `input` is a `Request` object\n            method = input.method || 'GET';\n            url = getURL(input.url);\n            requestHeader = input.headers;\n        }\n        item.method = method;\n        item.requestType = 'fetch';\n        item.requestHeader = requestHeader;\n        item.url = url.toString();\n        item.name = (url.pathname.split('/').pop() || '') + url.search;\n        item.status = 0;\n        item.statusText = 'Pending';\n        item.readyState = 1;\n        if (!item.startTime) {\n            // UNSENT\n            item.startTime = performance.now();\n        }\n        if (Object.prototype.toString.call(requestHeader) === '[object Headers]') {\n            item.requestHeader = {};\n            for (const [key, value] of requestHeader) {\n                item.requestHeader[key] = value;\n            }\n        }\n        else {\n            item.requestHeader = requestHeader;\n        }\n        // save GET data\n        if (url.search && url.searchParams) {\n            item.getData = {};\n            for (const [key, value] of url.searchParams) {\n                item.getData[key] = value;\n            }\n        }\n        // save POST data\n        if (init?.body) {\n            item.requestData = genStringBody(init.body);\n        }\n    }\n    afterFetch(item) {\n        return (resp) => {\n            item.endTime = performance.now();\n            item.duration = item.endTime - (item.startTime || item.endTime);\n            item.status = resp.status;\n            item.statusText = String(resp.status);\n            let isChunked = false;\n            item.header = {};\n            for (const [key, value] of resp.headers) {\n                item.header[key] = value;\n                isChunked = value.toLowerCase().indexOf('chunked') > -1 ? true : isChunked;\n            }\n            if (isChunked) {\n                // when `transfer-encoding` is chunked, the response is a stream which is under loading,\n                // so the `readyState` should be 3 (Loading),\n                // and the response should NOT be `clone()` which will affect stream reading.\n                item.readyState = 3;\n            }\n            else {\n                // Otherwise, not chunked, the response is not a stream,\n                // so it's completed and can be cloned for `text()` calling.\n                item.readyState = 4;\n                this.handleResponseBody(resp.clone(), item)\n                    .then((responseValue) => {\n                    item.responseSize =\n                        typeof responseValue === 'string' ? responseValue.length : responseValue.byteLength;\n                    item.responseSizeText = formatByteSize(item.responseSize);\n                    item.response = getStringResponseByType(item.responseType, responseValue);\n                    const msg = item.getMessage();\n                    if (msg) {\n                        this.sendMessage(msg);\n                    }\n                })\n                    .catch((e) => {\n                    if (e.name !== 'AbortError') {\n                        throw e;\n                    }\n                    else {\n                        // ignore AbortError\n                    }\n                });\n            }\n            return new Proxy(resp, new ResponseProxyHandler(resp, item));\n        };\n    }\n    handleResponseBody(resp, item) {\n        // parse response body by Content-Type\n        const contentType = resp.headers.get('content-type');\n        if (contentType && contentType.includes('application/json')) {\n            item.responseType = 'json';\n            return resp.text();\n        }\n        else if (contentType &&\n            (contentType.includes('text/html') || contentType.includes('text/plain'))) {\n            item.responseType = 'text';\n            return resp.text();\n        }\n        else {\n            item.responseType = 'arraybuffer';\n            return resp.arrayBuffer();\n        }\n    }\n}\nexport default class FetchProxy {\n    static create(ignoredHeaders, setSessionTokenHeader, sanitize, sendMessage, isServiceUrl, tokenUrlMatcher) {\n        return new Proxy(fetch, new FetchProxyHandler(ignoredHeaders, setSessionTokenHeader, sanitize, sendMessage, isServiceUrl, tokenUrlMatcher));\n    }\n}\n", "/**\n * I took inspiration in few stack exchange posts\n * and Tencent vConsole library (MIT)\n * by wrapping the XMLHttpRequest object in a Proxy\n * we can intercept the network requests\n * in not-so-hacky way\n * */\nimport NetworkMessage, { RequestState } from './networkMessage.js';\nimport { genGetDataByUrl, formatByteSize, genStringBody, getStringResponseByType } from './utils.js';\nexport class XHRProxyHandler {\n    constructor(XMLReq, ignoredHeaders, setSessionTokenHeader, sanitize, sendMessage, isServiceUrl, tokenUrlMatcher) {\n        this.ignoredHeaders = ignoredHeaders;\n        this.setSessionTokenHeader = setSessionTokenHeader;\n        this.sanitize = sanitize;\n        this.sendMessage = sendMessage;\n        this.isServiceUrl = isServiceUrl;\n        this.tokenUrlMatcher = tokenUrlMatcher;\n        this.XMLReq = XMLReq;\n        this.XMLReq.onreadystatechange = () => {\n            this.onReadyStateChange();\n        };\n        this.XMLReq.onabort = () => {\n            this.onAbort();\n        };\n        this.XMLReq.ontimeout = () => {\n            this.onTimeout();\n        };\n        this.item = new NetworkMessage(ignoredHeaders, setSessionTokenHeader, sanitize);\n        this.item.requestType = 'xhr';\n    }\n    get(target, key) {\n        switch (key) {\n            case 'open':\n                return this.getOpen(target);\n            case 'send':\n                this.setSessionTokenHeader((name, value) => {\n                    if (this.tokenUrlMatcher !== undefined) {\n                        if (!this.tokenUrlMatcher(this.item.url)) {\n                            return;\n                        }\n                    }\n                    target.setRequestHeader(name, value);\n                });\n                return this.getSend(target);\n            case 'setRequestHeader':\n                return this.getSetRequestHeader(target);\n            default:\n                // eslint-disable-next-line no-case-declarations\n                const value = Reflect.get(target, key);\n                if (typeof value === 'function') {\n                    return value.bind(target);\n                }\n                else {\n                    return value;\n                }\n        }\n    }\n    set(target, key, value) {\n        switch (key) {\n            case 'onreadystatechange':\n                return this.setOnReadyStateChange(target, key, value);\n            case 'onabort':\n                return this.setOnAbort(target, key, value);\n            case 'ontimeout':\n                return this.setOnTimeout(target, key, value);\n            default:\n            // not tracked methods\n        }\n        return Reflect.set(target, key, value);\n    }\n    onReadyStateChange() {\n        if (this.item.url && this.isServiceUrl(this.item.url))\n            return;\n        this.item.readyState = this.XMLReq.readyState;\n        this.item.responseType = this.XMLReq.responseType;\n        this.item.endTime = performance.now();\n        this.item.duration = this.item.endTime - this.item.startTime;\n        this.updateItemByReadyState();\n        setTimeout(() => {\n            this.item.response = getStringResponseByType(this.item.responseType, this.item.response);\n        }, 0);\n        if (this.XMLReq.readyState === RequestState.DONE) {\n            const msg = this.item.getMessage();\n            if (msg) {\n                this.sendMessage(msg);\n            }\n        }\n    }\n    onAbort() {\n        this.item.cancelState = 1;\n        this.item.statusText = 'Abort';\n        const msg = this.item.getMessage();\n        if (msg) {\n            this.sendMessage(msg);\n        }\n    }\n    onTimeout() {\n        this.item.cancelState = 3;\n        this.item.statusText = 'Timeout';\n        const msg = this.item.getMessage();\n        if (msg) {\n            this.sendMessage(msg);\n        }\n    }\n    getOpen(target) {\n        const targetFunction = Reflect.get(target, 'open');\n        return (...args) => {\n            const method = args[0];\n            const url = args[1];\n            this.item.method = method ? method.toUpperCase() : 'GET';\n            this.item.url = url.toString?.() || '';\n            this.item.name = this.item.url?.replace(new RegExp('/*$'), '').split('/').pop() ?? '';\n            this.item.getData = genGetDataByUrl(this.item.url, {});\n            return targetFunction.apply(target, args);\n        };\n    }\n    getSend(target) {\n        const targetFunction = Reflect.get(target, 'send');\n        return (...args) => {\n            const data = args[0];\n            this.item.requestData = genStringBody(data);\n            return targetFunction.apply(target, args);\n        };\n    }\n    getSetRequestHeader(target) {\n        const targetFunction = Reflect.get(target, 'setRequestHeader');\n        return (...args) => {\n            if (!this.item.requestHeader) {\n                this.item.requestHeader = {};\n            }\n            // @ts-ignore\n            this.item.requestHeader[args[0]] = args[1];\n            return targetFunction.apply(target, args);\n        };\n    }\n    setOnReadyStateChange(target, key, orscFunction) {\n        return Reflect.set(target, key, (...args) => {\n            this.onReadyStateChange();\n            orscFunction?.apply(target, args);\n        });\n    }\n    setOnAbort(target, key, oaFunction) {\n        return Reflect.set(target, key, (...args) => {\n            this.onAbort();\n            oaFunction.apply(target, args);\n        });\n    }\n    setOnTimeout(target, key, otFunction) {\n        return Reflect.set(target, key, (...args) => {\n            this.onTimeout();\n            otFunction.apply(target, args);\n        });\n    }\n    /**\n     * Update item's properties according to readyState.\n     */\n    updateItemByReadyState() {\n        switch (this.XMLReq.readyState) {\n            case RequestState.UNSENT:\n            case RequestState.OPENED:\n                this.item.status = RequestState.UNSENT;\n                this.item.statusText = 'Pending';\n                if (!this.item.startTime) {\n                    this.item.startTime = performance.now();\n                }\n                break;\n            case RequestState.HEADERS_RECEIVED:\n                this.item.status = this.XMLReq.status;\n                this.item.statusText = 'Loading';\n                this.item.header = {};\n                // eslint-disable-next-line no-case-declarations\n                const header = this.XMLReq.getAllResponseHeaders() || '', headerArr = header.split('\\n');\n                // extract plain text to key-value format\n                for (let i = 0; i < headerArr.length; i++) {\n                    const line = headerArr[i];\n                    if (!line) {\n                        continue;\n                    }\n                    const arr = line.split(': ');\n                    const key = arr[0];\n                    this.item.header[key] = arr.slice(1).join(': ');\n                }\n                break;\n            case RequestState.LOADING:\n                this.item.status = this.XMLReq.status;\n                this.item.statusText = 'Loading';\n                if (!!this.XMLReq.response && this.XMLReq.response.length) {\n                    this.item.responseSize = this.XMLReq.response.length;\n                    this.item.responseSizeText = formatByteSize(this.item.responseSize);\n                }\n                break;\n            case RequestState.DONE:\n                // `XMLReq.abort()` will change `status` from 200 to 0, so use previous value in this case\n                this.item.status = this.XMLReq.status || this.item.status || 0;\n                // show status code when request completed\n                this.item.statusText = String(this.item.status);\n                this.item.endTime = performance.now();\n                this.item.duration = this.item.endTime - (this.item.startTime || this.item.endTime);\n                this.item.response = this.XMLReq.response;\n                if (!!this.XMLReq.response && this.XMLReq.response.length) {\n                    this.item.responseSize = this.XMLReq.response.length;\n                    this.item.responseSizeText = formatByteSize(this.item.responseSize);\n                }\n                break;\n            default:\n                this.item.status = this.XMLReq.status;\n                this.item.statusText = 'Unknown';\n                break;\n        }\n    }\n}\nexport default class XHRProxy {\n    static create(ignoredHeaders, setSessionTokenHeader, sanitize, sendMessage, isServiceUrl, tokenUrlMatcher) {\n        return new Proxy(XMLHttpRequest, {\n            construct(original) {\n                const XMLReq = new original();\n                return new Proxy(XMLReq, new XHRProxyHandler(XMLReq, ignoredHeaders, setSessionTokenHeader, sanitize, sendMessage, isServiceUrl, tokenUrlMatcher));\n            },\n        });\n    }\n}\n", "import NetworkMessage from './networkMessage.js';\nimport { genStringBody, getURL } from './utils.js';\n// https://fetch.spec.whatwg.org/#concept-bodyinit-extract\nconst getContentType = (data) => {\n    if (data instanceof Blob) {\n        return data.type;\n    }\n    if (data instanceof FormData) {\n        return 'multipart/form-data';\n    }\n    if (data instanceof URLSearchParams) {\n        return 'application/x-www-form-urlencoded;charset=UTF-8';\n    }\n    return 'text/plain;charset=UTF-8';\n};\nexport class BeaconProxyHandler {\n    constructor(ignoredHeaders, setSessionTokenHeader, sanitize, sendMessage, isServiceUrl) {\n        this.ignoredHeaders = ignoredHeaders;\n        this.setSessionTokenHeader = setSessionTokenHeader;\n        this.sanitize = sanitize;\n        this.sendMessage = sendMessage;\n        this.isServiceUrl = isServiceUrl;\n    }\n    apply(target, thisArg, argsList) {\n        const urlString = argsList[0];\n        const data = argsList[1];\n        const item = new NetworkMessage(this.ignoredHeaders, this.setSessionTokenHeader, this.sanitize);\n        if (this.isServiceUrl(urlString)) {\n            return target.apply(thisArg, argsList);\n        }\n        const url = getURL(urlString);\n        item.method = 'POST';\n        item.url = urlString;\n        item.name = (url.pathname.split('/').pop() || '') + url.search;\n        item.requestType = 'beacon';\n        item.requestHeader = { 'Content-Type': getContentType(data) };\n        item.status = 0;\n        item.statusText = 'Pending';\n        if (url.search && url.searchParams) {\n            item.getData = {};\n            for (const [key, value] of url.searchParams) {\n                item.getData[key] = value;\n            }\n        }\n        item.requestData = genStringBody(data);\n        if (!item.startTime) {\n            item.startTime = performance.now();\n        }\n        const isSuccess = target.apply(thisArg, argsList);\n        if (isSuccess) {\n            item.endTime = performance.now();\n            item.duration = item.endTime - (item.startTime || item.endTime);\n            item.status = 0;\n            item.statusText = 'Sent';\n            item.readyState = 4;\n        }\n        else {\n            item.status = 500;\n            item.statusText = 'Unknown';\n        }\n        const msg = item.getMessage();\n        if (msg) {\n            this.sendMessage(msg);\n        }\n        return isSuccess;\n    }\n}\nexport default class BeaconProxy {\n    static hasSendBeacon() {\n        return !!BeaconProxy.origSendBeacon;\n    }\n    static create(ignoredHeaders, setSessionTokenHeader, sanitize, sendMessage, isServiceUrl) {\n        if (!BeaconProxy.hasSendBeacon()) {\n            return undefined;\n        }\n        return new Proxy(BeaconProxy.origSendBeacon, new BeaconProxyHandler(ignoredHeaders, setSessionTokenHeader, sanitize, sendMessage, isServiceUrl));\n    }\n}\nBeaconProxy.origSendBeacon = window?.navigator?.sendBeacon;\n", "import FetchProxy from './fetchProxy.js';\nimport XHRProxy from './xhrProxy.js';\nimport BeaconProxy from './beaconProxy.js';\nconst getWarning = (api) => console.warn(`Openreplay: Can't find ${api} in global context. \nIf you're using serverside rendering in your app, make sure that tracker is loaded dynamically, otherwise ${api} won't be tracked.`);\nexport default function setProxy(context, ignoredHeaders, setSessionTokenHeader, sanitize, sendMessage, isServiceUrl, tokenUrlMatcher) {\n    if (context.XMLHttpRequest) {\n        context.XMLHttpRequest = XHRProxy.create(ignoredHeaders, setSessionTokenHeader, sanitize, sendMessage, isServiceUrl, tokenUrlMatcher);\n    }\n    else {\n        getWarning('XMLHttpRequest');\n    }\n    if (context.fetch) {\n        context.fetch = FetchProxy.create(ignoredHeaders, setSessionTokenHeader, sanitize, sendMessage, isServiceUrl, tokenUrlMatcher);\n    }\n    else {\n        getWarning('fetch');\n    }\n    if (context?.navigator?.sendBeacon) {\n        context.navigator.sendBeacon = BeaconProxy.create(ignoredHeaders, setSessionTokenHeader, sanitize, sendMessage, isServiceUrl);\n    }\n}\n", "import { NetworkRequest } from '../app/messages.gen.js';\nimport { getTimeOrigin } from '../utils.js';\nimport axiosSpy from './axiosSpy.js';\nimport setProxy from './Network/index.js';\nfunction getXHRRequestDataObject(xhr) {\n    // @ts-ignore  this is 3x faster than using Map<XHR, XHRRequestData>\n    if (!xhr.__or_req_data__) {\n        // @ts-ignore\n        xhr.__or_req_data__ = { body: undefined, headers: {} };\n    }\n    // @ts-ignore\n    return xhr.__or_req_data__;\n}\nfunction strMethod(method) {\n    return typeof method === 'string' ? method.toUpperCase() : 'GET';\n}\nexport default function (app, opts = {}) {\n    const options = Object.assign({\n        failuresOnly: false,\n        ignoreHeaders: ['cookie', 'set-cookie', 'authorization'],\n        capturePayload: false,\n        sessionTokenHeader: false,\n        captureInIframes: true,\n        axiosInstances: undefined,\n        useProxy: true,\n    }, opts);\n    if (options.useProxy === false) {\n        app.debug.warn('Network module is migrating to proxy api, to gradually migrate and test it set useProxy to true');\n    }\n    const ignoreHeaders = options.ignoreHeaders;\n    const isHIgnored = Array.isArray(ignoreHeaders)\n        ? (name) => ignoreHeaders.includes(name)\n        : () => ignoreHeaders;\n    const stHeader = options.sessionTokenHeader === true ? 'X-OpenReplay-SessionToken' : options.sessionTokenHeader;\n    function setSessionTokenHeader(setRequestHeader) {\n        if (stHeader) {\n            const sessionToken = app.getSessionToken();\n            if (sessionToken) {\n                app.safe(setRequestHeader)(stHeader, sessionToken);\n            }\n        }\n    }\n    function sanitize(reqResInfo) {\n        if (!options.capturePayload) {\n            // @ts-ignore\n            delete reqResInfo.request.body;\n            delete reqResInfo.response.body;\n        }\n        if (options.sanitizer) {\n            const resBody = reqResInfo.response.body;\n            if (typeof resBody === 'string') {\n                // Parse response in order to have handy view in sanitization function\n                try {\n                    reqResInfo.response.body = JSON.parse(resBody);\n                }\n                catch { }\n            }\n            return options.sanitizer(reqResInfo);\n        }\n        return reqResInfo;\n    }\n    function stringify(r) {\n        if (r && typeof r.body !== 'string') {\n            try {\n                r.body = JSON.stringify(r.body);\n            }\n            catch {\n                r.body = '<unable to stringify>';\n                app.notify.warn(\"Openreplay fetch couldn't stringify body:\", r.body);\n            }\n        }\n        return JSON.stringify(r);\n    }\n    const patchWindow = (context) => {\n        /* ====== modern way ====== */\n        if (options.useProxy) {\n            return setProxy(context, options.ignoreHeaders, setSessionTokenHeader, sanitize, (message) => app.send(message), (url) => app.isServiceURL(url), options.tokenUrlMatcher);\n        }\n        /* ====== Fetch ====== */\n        const origFetch = context.fetch.bind(context);\n        const trackFetch = (input, init = {}) => {\n            if (!(typeof input === 'string' || input instanceof URL) || app.isServiceURL(String(input))) {\n                return origFetch(input, init);\n            }\n            setSessionTokenHeader(function (name, value) {\n                if (init.headers === undefined) {\n                    init.headers = {};\n                }\n                if (init.headers instanceof Headers) {\n                    init.headers.append(name, value);\n                }\n                else if (Array.isArray(init.headers)) {\n                    init.headers.push([name, value]);\n                }\n                else {\n                    init.headers[name] = value;\n                }\n            });\n            const startTime = performance.now();\n            return origFetch(input, init).then((response) => {\n                const duration = performance.now() - startTime;\n                if (options.failuresOnly && response.status < 400) {\n                    return response;\n                }\n                const r = response.clone();\n                r.text()\n                    .then((text) => {\n                    const reqHs = {};\n                    const resHs = {};\n                    if (ignoreHeaders !== true) {\n                        // request headers\n                        const writeReqHeader = ([n, v]) => {\n                            if (!isHIgnored(n)) {\n                                reqHs[n] = v;\n                            }\n                        };\n                        if (init.headers instanceof Headers) {\n                            init.headers.forEach((v, n) => writeReqHeader([n, v]));\n                        }\n                        else if (Array.isArray(init.headers)) {\n                            init.headers.forEach(writeReqHeader);\n                        }\n                        else if (typeof init.headers === 'object') {\n                            Object.entries(init.headers).forEach(writeReqHeader);\n                        }\n                        // response headers\n                        r.headers.forEach((v, n) => {\n                            if (!isHIgnored(n))\n                                resHs[n] = v;\n                        });\n                    }\n                    const method = strMethod(init.method);\n                    const reqResInfo = sanitize({\n                        url: String(input),\n                        method,\n                        status: r.status,\n                        request: {\n                            headers: reqHs,\n                            // @ts-ignore\n                            body: init.body || null,\n                        },\n                        response: {\n                            headers: resHs,\n                            body: text,\n                        },\n                    });\n                    if (!reqResInfo) {\n                        return;\n                    }\n                    app.send(NetworkRequest('fetch', method, String(reqResInfo.url), stringify(reqResInfo.request), stringify(reqResInfo.response), r.status, startTime + getTimeOrigin(), duration, 0));\n                })\n                    .catch((e) => app.debug.error('Could not process Fetch response:', e));\n                return response;\n            });\n        };\n        // @ts-ignore\n        context.fetch = trackFetch;\n        /* ====== <> ====== */\n        /* ====== XHR ====== */\n        const nativeOpen = context.XMLHttpRequest.prototype.open;\n        const nativeSetRequestHeader = context.XMLHttpRequest.prototype.setRequestHeader;\n        const nativeSend = context.XMLHttpRequest.prototype.send;\n        function trackXMLHttpReqOpen(initMethod, url) {\n            const xhr = this;\n            setSessionTokenHeader((name, value) => xhr.setRequestHeader(name, value));\n            let startTime = 0;\n            xhr.addEventListener('loadstart', (e) => {\n                startTime = e.timeStamp;\n            });\n            xhr.addEventListener('load', app.safe((e) => {\n                const { headers: reqHs, body: reqBody } = getXHRRequestDataObject(xhr);\n                const duration = startTime > 0 ? e.timeStamp - startTime : 0;\n                const hString = xhr.getAllResponseHeaders() || ''; // might be null (only if no response received though)\n                const headersArr = hString.trim().split(/[\\r\\n]+/);\n                const headerMap = {};\n                headersArr.forEach(function (line) {\n                    const parts = line.split(': ');\n                    const header = parts.shift();\n                    if (!isHIgnored(header)) {\n                        headerMap[header] = parts.join(': ');\n                    }\n                });\n                const method = strMethod(initMethod);\n                const reqResInfo = sanitize({\n                    url: String(url),\n                    method,\n                    status: xhr.status,\n                    request: {\n                        headers: reqHs,\n                        // @ts-ignore\n                        body: reqBody || null,\n                    },\n                    response: {\n                        headers: headerMap,\n                        body: xhr.response,\n                    },\n                });\n                if (!reqResInfo) {\n                    return;\n                }\n                app.send(NetworkRequest('xhr', method, String(reqResInfo.url), stringify(reqResInfo.request), stringify(reqResInfo.response), xhr.status, startTime + getTimeOrigin(), duration, 0));\n            }));\n            //TODO: handle error (though it has no Error API nor any useful information)\n            //xhr.addEventListener('error', (e) => {})\n            return nativeOpen.apply(this, arguments);\n        }\n        function trackXHRSend(body) {\n            const rdo = getXHRRequestDataObject(this);\n            rdo.body = body;\n            // @ts-ignore ??? this -> XMLHttpRequest\n            return nativeSend.apply(this, arguments);\n        }\n        function trackSetReqHeader(name, value) {\n            if (!isHIgnored(name)) {\n                const rdo = getXHRRequestDataObject(this);\n                rdo.headers[name] = value;\n            }\n            return nativeSetRequestHeader.apply(this, arguments);\n        }\n        if (!options.axiosInstances) {\n            context.XMLHttpRequest.prototype.open = trackXMLHttpReqOpen;\n            context.XMLHttpRequest.prototype.send = trackXHRSend;\n            context.XMLHttpRequest.prototype.setRequestHeader = trackSetReqHeader;\n        }\n        /* ====== <> ====== */\n    };\n    patchWindow(window);\n    if (options.axiosInstances) {\n        options.axiosInstances.forEach((axiosInstance) => {\n            axiosSpy(app, axiosInstance, options, sanitize, stringify);\n        });\n    }\n    if (options.captureInIframes) {\n        app.observer.attachContextCallback(app.safe(patchWindow));\n    }\n}\n", "import { SelectionChange } from '../app/messages.gen.js';\nfunction selection(app) {\n    app.attachEventListener(document, 'selectionchange', () => {\n        const selection = document.getSelection();\n        if (selection !== null && !selection.isCollapsed) {\n            const selectionStart = app.nodes.getID(selection.anchorNode);\n            const selectionEnd = app.nodes.getID(selection.focusNode);\n            const selectedText = selection.toString().replace(/\\s+/g, ' ');\n            if (selectionStart && selectionEnd) {\n                app.send(SelectionChange(selectionStart, selectionEnd, selectedText));\n            }\n        }\n        else {\n            app.send(SelectionChange(-1, -1, ''));\n        }\n    });\n}\nexport default selection;\n/** TODO: research how to get all in-between nodes inside selection range\n *        including nodes between anchor and focus nodes and their children\n *        without recursively searching the dom tree\n */\n// if (selection.rangeCount) {\n//   const nodes = [];\n//   for (let i = 0; i < selection.rangeCount; i++) {\n//     const range = selection.getRangeAt(i);\n//     let node: Node | null = range.startContainer;\n//     while (node) {\n//       nodes.push(node);\n//       if (node === range.endContainer) break;\n//       node = node.nextSibling;\n//     }\n//   }\n//   // send selected nodes\n// }\n", "import { TabChange } from '../app/messages.gen.js';\nexport default function (app) {\n    function changeTab() {\n        if (!document.hidden) {\n            app.debug.log('Openreplay: tab change to' + app.session.getTabId());\n            app.send(TabChange(app.session.getTabId()));\n        }\n    }\n    app.attachEventListener(window, 'focus', changeTab, false, false);\n}\n", "import App, { DEFAULT_INGEST_POINT } from './app/index.js';\nexport { default as App } from './app/index.js';\nimport { UserAnonymousID, CustomEvent, CustomIssue } from './app/messages.gen.js';\nimport * as _Messages from './app/messages.gen.js';\nexport const Messages = _Messages;\nexport { SanitizeLevel } from './app/sanitizer.js';\nimport Connection from './modules/connection.js';\nimport Console from './modules/console.js';\nimport Exception, { getExceptionMessageFromEvent, getExceptionMessage, } from './modules/exception.js';\nimport Img from './modules/img.js';\nimport Input from './modules/input.js';\nimport Mouse from './modules/mouse.js';\nimport Timing from './modules/timing.js';\nimport Performance from './modules/performance.js';\nimport Scroll from './modules/scroll.js';\nimport Viewport from './modules/viewport.js';\nimport CSSRules from './modules/cssrules.js';\nimport Focus from './modules/focus.js';\nimport Fonts from './modules/fonts.js';\nimport Network from './modules/network.js';\nimport ConstructedStyleSheets from './modules/constructedStyleSheets.js';\nimport Selection from './modules/selection.js';\nimport Tabs from './modules/tabs.js';\nimport { IN_BROWSER, deprecationWarn, DOCS_HOST, inIframe } from './utils.js';\nconst DOCS_SETUP = '/installation/javascript-sdk';\nfunction processOptions(obj) {\n    if (obj == null) {\n        console.error(`OpenReplay: invalid options argument type. Please, check documentation on ${DOCS_HOST}${DOCS_SETUP}`);\n        return false;\n    }\n    if (typeof obj.projectKey !== 'string') {\n        if (typeof obj.projectKey !== 'number') {\n            if (typeof obj.projectID !== 'number') {\n                // Back compatability\n                console.error(`OpenReplay: projectKey is missing or wrong type (string is expected). Please, check ${DOCS_HOST}${DOCS_SETUP} for more information.`);\n                return false;\n            }\n            else {\n                obj.projectKey = obj.projectID.toString();\n                deprecationWarn('`projectID` option', '`projectKey` option', DOCS_SETUP);\n            }\n        }\n        else {\n            console.warn('OpenReplay: projectKey is expected to have a string type.');\n            obj.projectKey = obj.projectKey.toString();\n        }\n    }\n    if (obj.sessionToken != null) {\n        deprecationWarn('`sessionToken` option', '`sessionHash` start() option', '/');\n    }\n    return true;\n}\nexport default class API {\n    constructor(options) {\n        this.options = options;\n        this.app = null;\n        this.crossdomainMode = false;\n        this.checkDoNotTrack = () => {\n            return (this.options.respectDoNotTrack &&\n                (navigator.doNotTrack == '1' ||\n                    // @ts-ignore\n                    window.doNotTrack == '1'));\n        };\n        this.signalStartIssue = (reason, missingApi) => {\n            const doNotTrack = this.checkDoNotTrack();\n            const req = new XMLHttpRequest();\n            const orig = this.options.ingestPoint || DEFAULT_INGEST_POINT;\n            req.open('POST', orig + '/v1/web/not-started');\n            req.send(JSON.stringify({\n                trackerVersion: '14.0.3',\n                projectKey: this.options.projectKey,\n                doNotTrack,\n                reason: missingApi.length ? `missing api: ${missingApi.join(',')}` : reason,\n            }));\n        };\n        this.restartCanvasTracking = () => {\n            if (this.app === null) {\n                return;\n            }\n            this.app.restartCanvasTracking();\n        };\n        this.handleError = (e, metadata = {}) => {\n            if (this.app === null) {\n                return;\n            }\n            if (e instanceof Error) {\n                const msg = getExceptionMessage(e, [], metadata);\n                this.app.send(msg);\n            }\n            else if (e instanceof ErrorEvent ||\n                ('PromiseRejectionEvent' in window && e instanceof PromiseRejectionEvent)) {\n                const msg = getExceptionMessageFromEvent(e, undefined, metadata);\n                if (msg != null) {\n                    this.app.send(msg);\n                }\n            }\n        };\n        this.crossdomainMode = Boolean(inIframe() && options.crossdomain?.enabled);\n        if (!IN_BROWSER || !processOptions(options)) {\n            return;\n        }\n        if (window.__OPENREPLAY__) {\n            console.error('OpenReplay: one tracker instance has been initialised already');\n            return;\n        }\n        if (!options.__DISABLE_SECURE_MODE && location.protocol !== 'https:') {\n            console.error('OpenReplay: Your website must be publicly accessible and running on SSL in order for OpenReplay to properly capture and replay the user session. You can disable this check by setting `__DISABLE_SECURE_MODE` option to `true` if you are testing in localhost. Keep in mind, that asset files on a local machine are not available to the outside world. This might affect tracking if you use css files.');\n            return;\n        }\n        const doNotTrack = this.checkDoNotTrack();\n        const failReason = [];\n        const conditions = [\n            'Map',\n            'Set',\n            'MutationObserver',\n            'performance',\n            'timing',\n            'startsWith',\n            'Blob',\n            'Worker',\n        ];\n        if (doNotTrack) {\n            failReason.push('doNotTrack');\n        }\n        else {\n            for (const condition of conditions) {\n                if (condition === 'timing') {\n                    if ('performance' in window && !(condition in performance)) {\n                        failReason.push(condition);\n                        break;\n                    }\n                }\n                else if (condition === 'startsWith') {\n                    if (!(condition in String.prototype)) {\n                        failReason.push(condition);\n                        break;\n                    }\n                }\n                else {\n                    if (!(condition in window)) {\n                        failReason.push(condition);\n                        break;\n                    }\n                }\n            }\n        }\n        if (failReason.length > 0) {\n            const missingApi = failReason.join(',');\n            console.error(`OpenReplay: browser doesn't support API required for tracking or doNotTrack is set to 1. Reason: ${missingApi}`);\n            this.signalStartIssue('missing_api', failReason);\n            return;\n        }\n        const app = new App(options.projectKey, options.sessionToken, options, this.signalStartIssue, this.crossdomainMode);\n        this.app = app;\n        if (!this.crossdomainMode) {\n            // no need to send iframe viewport data since its a node for us\n            Viewport(app);\n            // calculated in main window\n            Connection(app);\n            // while we can calculate it here, trying to compute it for all parts is hard\n            Performance(app, options);\n            // no tabs in iframes yet\n            Tabs(app);\n        }\n        Mouse(app, options.mouse);\n        // inside iframe, we ignore viewport scroll\n        Scroll(app, this.crossdomainMode);\n        CSSRules(app);\n        ConstructedStyleSheets(app);\n        Console(app, options);\n        Exception(app, options);\n        Img(app);\n        Input(app, options);\n        Timing(app, options);\n        Focus(app);\n        Fonts(app);\n        Network(app, options.network);\n        Selection(app);\n        window.__OPENREPLAY__ = this;\n        if (options.flags && options.flags.onFlagsLoad) {\n            this.onFlagsLoad(options.flags.onFlagsLoad);\n        }\n        const wOpen = window.open;\n        if (options.autoResetOnWindowOpen || options.resetTabOnWindowOpen) {\n            app.attachStartCallback(() => {\n                const tabId = app.getTabId();\n                const sessStorage = app.sessionStorage ?? window.sessionStorage;\n                window.open = function (...args) {\n                    if (options.autoResetOnWindowOpen) {\n                        app.resetNextPageSession(true);\n                    }\n                    if (options.resetTabOnWindowOpen) {\n                        sessStorage.removeItem(options.session_tabid_key || '__openreplay_tabid');\n                    }\n                    app.resetNextPageSession(false);\n                    sessStorage.setItem(options.session_tabid_key || '__openreplay_tabid', tabId);\n                    return wOpen.call(window, ...args);\n                };\n            });\n            app.attachStopCallback(() => {\n                window.open = wOpen;\n            });\n        }\n    }\n    isFlagEnabled(flagName) {\n        return this.featureFlags.isFlagEnabled(flagName);\n    }\n    onFlagsLoad(callback) {\n        this.app?.featureFlags.onFlagsLoad(callback);\n    }\n    clearPersistFlags() {\n        this.app?.featureFlags.clearPersistFlags();\n    }\n    reloadFlags() {\n        return this.app?.featureFlags.reloadFlags();\n    }\n    getFeatureFlag(flagName) {\n        return this.app?.featureFlags.getFeatureFlag(flagName);\n    }\n    getAllFeatureFlags() {\n        return this.app?.featureFlags.flags;\n    }\n    use(fn) {\n        return fn(this.app, this.options);\n    }\n    isActive() {\n        if (this.app === null) {\n            return false;\n        }\n        return this.app.active();\n    }\n    /**\n     * Creates a named hook that expects event name, data string and msg direction (up/down),\n     * it will skip any message bigger than 5 mb or event name bigger than 255 symbols\n     * msg direction is \"down\" (incoming) by default\n     *\n     * @returns {(msgType: string, data: string, dir: 'up' | 'down') => void}\n     * */\n    trackWs(channelName) {\n        if (this.app === null) {\n            return;\n        }\n        return this.app.trackWs(channelName);\n    }\n    start(startOpts) {\n        if (this.browserEnvCheck()) {\n            if (this.app === null) {\n                return Promise.reject(\"Browser doesn't support required api, or doNotTrack is active.\");\n            }\n            return this.app.start(startOpts);\n        }\n        else {\n            return Promise.reject('Trying to start not in browser.');\n        }\n    }\n    browserEnvCheck() {\n        if (!IN_BROWSER) {\n            console.error(`OpenReplay: you are trying to start Tracker on a node.js environment. If you want to use OpenReplay with SSR, please, use componentDidMount or useEffect API for placing the \\`tracker.start()\\` line. Check documentation on ${DOCS_HOST}${DOCS_SETUP}`);\n            return false;\n        }\n        return true;\n    }\n    /**\n     * start buffering messages without starting the actual session, which gives user 30 seconds to \"activate\" and record\n     * session by calling start() on conditional trigger and we will then send buffered batch, so it won't get lost\n     * */\n    coldStart(startOpts, conditional) {\n        if (this.browserEnvCheck()) {\n            if (this.app === null) {\n                return Promise.reject('Tracker not initialized');\n            }\n            void this.app.coldStart(startOpts, conditional);\n        }\n        else {\n            return Promise.reject('Trying to start not in browser.');\n        }\n    }\n    /**\n     * Starts offline session recording. Keep in mind that only user device time will be used for timestamps.\n     * (no backend delay sync)\n     *\n     * @param {Object} startOpts - options for session start, same as .start()\n     * @param {Function} onSessionSent - callback that will be called once session is fully sent\n     * @returns methods to manipulate buffer:\n     *\n     * saveBuffer - to save it in localStorage\n     *\n     * getBuffer - returns current buffer\n     *\n     * setBuffer - replaces current buffer with given\n     * */\n    startOfflineRecording(startOpts, onSessionSent) {\n        if (this.browserEnvCheck()) {\n            if (this.app === null) {\n                return Promise.reject('Tracker not initialized');\n            }\n            return this.app.offlineRecording(startOpts, onSessionSent);\n        }\n        else {\n            return Promise.reject('Trying to start not in browser.');\n        }\n    }\n    /**\n     * Uploads the stored session buffer to backend\n     * @returns promise that resolves once messages are loaded, it has to be awaited\n     * so the session can be uploaded properly\n     * @resolve - if messages were loaded into service worker successfully\n     * @reject {string} - error message\n     * */\n    uploadOfflineRecording() {\n        if (this.app === null) {\n            return;\n        }\n        return this.app.uploadOfflineRecording();\n    }\n    stop() {\n        if (this.app === null) {\n            return;\n        }\n        this.app.stop();\n        return this.app.session.getSessionHash();\n    }\n    forceFlushBatch() {\n        if (this.app === null) {\n            return;\n        }\n        this.app.forceFlushBatch();\n    }\n    getSessionToken() {\n        if (this.app === null) {\n            return null;\n        }\n        return this.app.getSessionToken();\n    }\n    getSessionInfo() {\n        if (this.app === null) {\n            return null;\n        }\n        return this.app.session.getInfo();\n    }\n    getSessionID() {\n        if (this.app === null) {\n            return null;\n        }\n        return this.app.getSessionID();\n    }\n    getTabId() {\n        if (this.app === null) {\n            return null;\n        }\n        return this.app.getTabId();\n    }\n    getUxId() {\n        if (this.app === null) {\n            return null;\n        }\n        return this.app.getUxtId();\n    }\n    sessionID() {\n        deprecationWarn(\"'sessionID' method\", \"'getSessionID' method\", '/');\n        return this.getSessionID();\n    }\n    getSessionURL(options) {\n        if (this.app === null) {\n            return undefined;\n        }\n        return this.app.getSessionURL(options);\n    }\n    setUserID(id) {\n        if (typeof id === 'string' && this.app !== null) {\n            this.app.session.setUserID(id);\n        }\n    }\n    userID(id) {\n        deprecationWarn(\"'userID' method\", \"'setUserID' method\", '/');\n        this.setUserID(id);\n    }\n    setUserAnonymousID(id) {\n        if (typeof id === 'string' && this.app !== null) {\n            this.app.send(UserAnonymousID(id));\n        }\n    }\n    userAnonymousID(id) {\n        deprecationWarn(\"'userAnonymousID' method\", \"'setUserAnonymousID' method\", '/');\n        this.setUserAnonymousID(id);\n    }\n    setMetadata(key, value) {\n        if (typeof key === 'string' && typeof value === 'string' && this.app !== null) {\n            this.app.session.setMetadata(key, value);\n        }\n    }\n    metadata(key, value) {\n        deprecationWarn(\"'metadata' method\", \"'setMetadata' method\", '/');\n        this.setMetadata(key, value);\n    }\n    event(key, payload = null, issue = false) {\n        if (typeof key === 'string' && this.app !== null) {\n            if (issue) {\n                return this.issue(key, payload);\n            }\n            else {\n                try {\n                    payload = JSON.stringify(payload);\n                }\n                catch (e) {\n                    return;\n                }\n                this.app.send(CustomEvent(key, payload));\n            }\n        }\n    }\n    issue(key, payload = null) {\n        if (typeof key === 'string' && this.app !== null) {\n            try {\n                payload = JSON.stringify(payload);\n            }\n            catch (e) {\n                return;\n            }\n            this.app.send(CustomIssue(key, payload));\n        }\n    }\n}\n"],
  "mappings": "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",
  "names": ["i", "ErrorStackParser", "location", "id", "err", "start", "l", "_a", "_b", "i", "td", "id", "id", "err", "dat", "fl", "Deflate", "AsyncDeflate", "Inflate", "AsyncInflate", "Gzip", "Gunzip", "AsyncGunzip", "Zlib", "Unzlib", "AsyncUnzlib", "Decompress", "AsyncDecompress", "err", "DecodeUTF8", "_a", "EncodeUTF8", "_a", "fl", "ZipPassThrough", "ZipDeflate", "AsyncZipDeflate", "err", "Zip", "err", "_a", "_b", "UnzipPassThrough", "UnzipInflate", "AsyncUnzipInflate", "err", "Unzip", "_a", "err", "dat", "final", "id", "_a", "attr", "id", "index", "selector", "location", "selection", "_a", "_b", "event", "id", "start", "id", "err", "_a", "_b", "index", "tagName", "id", "isIgnored", "id", "RecentsType", "id", "attr", "node", "index", "left", "top", "_a", "id", "SanitizeLevel", "id", "ActivityState", "_a", "id", "selector", "sessionToken", "err", "_b", "delay", "console", "ErrorStackParser", "location", "id", "id", "attr", "document", "selector", "id", "options", "_a", "id", "URL", "styleSheetIDMap", "index", "id", "config", "_a", "_b", "RequestState", "value", "_a", "_b", "_a", "_a", "selection", "_a", "doNotTrack", "id"]
}
